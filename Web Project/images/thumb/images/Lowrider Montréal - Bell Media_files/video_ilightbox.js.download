(function($) {
    /**
     * videos ilightbox
     * Note: function should be a "var", unless it's called by an external plugin -> window.
     */
    initVideoLightbox = function () {
        $('.js-lightbox-video-link').each(function () {
            $(this).iLightBox({
                skin    : 'metro-white',
                controls: {
                    fullscreen: false
                },
                callback: {
                    onShow: function (api) {
                        var videoContainer = api.currentElement.find('.mediaplayerdiv');
                        videoContainer.attr('id', new Date().getTime());
                        videoContainer.attr('data-width', api.currentElement.width());
                        videoContainer.attr('data-height', api.currentElement.height());

                        var player = new BmPlayer(videoContainer, globalDestination, globalPlatform);
                        player.embedPlayer(true);
                        $('.ilightbox-wrapper').css('overflow', 'hidden');
                    }
                }
            });
        });
    };

    if( $('.js-lightbox-video-link').length ) {
        initVideoLightbox();
    }
})(jQuery);