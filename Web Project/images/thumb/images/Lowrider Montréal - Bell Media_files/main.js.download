/**
GIT TAG: 2.2.0-build13
GIT REVISION: e2f7bb2c
**/

!function(){"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(r,t){var o,n;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),e=i.length>>>0;if("[object Function]"!={}.toString.call(r))throw new TypeError(r+" is not a function");for(t&&(o=t),n=0;n<e;){var c;n in i&&(c=i[n],r.call(o,c,n,i)),n++}})}();
!function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(r){for(var t=0,n=this.length;t<n;t+=1)if(this[t]===r)return t;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(r){for(var t=this.length-1;0<=t;t-=1)if(this[t]===r)return t;return-1})}();
window.console&&void 0===window.console.time&&(console.time=function(e,o){if(e){var n=(new Date).getTime();console.timeCounters||(console.timeCounters={});var t="KEY"+e.toString();!o&&console.timeCounters[t]||(console.timeCounters[t]=n)}},console.timeEnd=function(e){var o=(new Date).getTime();if(console.timeCounters){var n,t="KEY"+e.toString(),i=console.timeCounters[t];if(i){var s=e+": "+(n=o-i)+"ms";console.info(s),delete console.timeCounters[t]}return n}});
Date.now||(Date.now=function(){return(new Date).getTime()});
var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,o,f,u,i=gap,p=e[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof rep&&(p=rep.call(e,t,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,r=0;r<f;r+=1)u[r]=str(r,p)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(f=rep.length,r=0;r<f;r+=1)"string"==typeof rep[r]&&(o=str(n=rep[r],p))&&u.push(quote(n)+(gap?": ":":")+o);else for(n in p)Object.prototype.hasOwnProperty.call(p,n)&&(o=str(n,p))&&u.push(quote(n)+(gap?": ":":")+o);return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,o}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,r){var n;if(indent=gap="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var r,n,o=t[e];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(n=walk(o,r))?o[r]=n:delete o[r]);return reviver.call(t,e,o)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
!function(t,n,e){n[t]=n[t]||e(),"undefined"!=typeof module&&module.exports?module.exports=n[t]:"function"==typeof define&&define.amd&&define(function(){return n[t]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";var n,e,o,i,r,c,t=Object.prototype.toString,f="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),n=function(t,n,e,o){return Object.defineProperty(t,n,{value:e,writable:!0,configurable:!1!==o})}}catch(t){n=function(t,n,e){return t[n]=e,t}}function u(t,n){o.add(t,n),e||(e=f(o.drain))}function a(t){var n,e=typeof t;return null==t||"object"!=e&&"function"!=e||(n=t.then),"function"==typeof n&&n}function s(){for(var t=0;t<this.chain.length;t++)h(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function h(t,n,e){var o,i;try{!1===n?e.reject(t.msg):(o=!0===n?t.msg:n.call(void 0,t.msg))===e.promise?e.reject(TypeError("Promise-chain cycle")):(i=a(o))?i.call(o,e.resolve,e.reject):e.resolve(o)}catch(t){e.reject(t)}}function l(t){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=t,n.state=2,0<n.chain.length&&u(s,n))}function p(t,e,o,i){for(var n=0;n<e.length;n++)!function(n){t.resolve(e[n]).then(function(t){o(n,t)},i)}(n)}function y(t){this.def=t,this.triggered=!1}function d(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new function(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(t,n){var e={success:"function"!=typeof t||t,failure:"function"==typeof n&&n};return e.promise=new this.constructor(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");e.resolve=t,e.reject=n}),o.chain.push(e),0!==o.state&&u(s,o),e.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,function(t){(function t(e){var o,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(o=a(e))?u(function(){var n=new y(i);try{o.call(e,function(){t.apply(n,arguments)},function(){l.apply(n,arguments)})}catch(t){l.call(n,t)}}):(i.msg=e,i.state=1,0<i.chain.length&&u(s,i))}catch(t){l.call(new y(i),t)}}}).call(o,t)},function(t){l.call(o,t)})}catch(t){l.call(o,t)}}o={add:function(t,n){c=new function(t,n){this.fn=t,this.self=n,this.next=void 0}(t,n),r?r.next=c:i=c,r=c,c=void 0},drain:function(){var t=i;for(i=r=e=void 0;t;)t.fn.call(t.self),t=t.next}};var g=n({},"constructor",d,!1);return n(d.prototype=g,"__NPO__",0,!1),n(d,"resolve",function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),n(d,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),n(d,"all",function(n){var c=this;return"[object Array]"!=t.call(n)?c.reject(TypeError("Not an array")):0===n.length?c.resolve([]):new c(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");var o=n.length,i=Array(o),r=0;p(c,n,function(t,n){i[t]=n,++r===o&&e(i)},t)})}),n(d,"race",function(n){var o=this;return"[object Array]"!=t.call(n)?o.reject(TypeError("Not an array")):new o(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");p(o,n,function(t,n){e(n)},t)})}),d});
!function(){"use strict";Object.create||(Object.create=function(t){if(1<arguments.length)throw new Error("Object.create implementation only accepts the first parameter.");function e(){}return e.prototype=t,new e})}();
!function(){"use strict";void 0===window.console&&(window.console={});for(var o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","trace","warn"],n=function(){console.log(arguments)},e=o.length,i=0;i<e;i+=1)void 0===window.console[o[i]]&&(window.console[o[i]]="log"!==o[i]?n:function(){})}();
function aisresponse(e,t){ais_client.aisresponse(e),ais_client.log("aisresponse: Response Data"+(1==t?" (cache) ":""),!0),ais_client.log(e)}!function(){function e(){this.callbacks={bounce:this._nullhandler,echo_response:this._nullhandler,chooser:this._nullhandler,init:this._nullhandler,identity:this._nullhandler,logout_result:this._nullhandler,becomes_authenticated:this._nullhandler,becomes_unauthenticated:this._nullhandler,authz_query:this._nullhandler,resources:this._nullhandler,device:this._nullhandler,vcs:this._nullhandler,vcs_list:this._nullhandler,authz_query_list:this._nullhandler},this.baseurl="idp.securetve.com/rest/1.0/",this.responsefield="aisresponse",this.authstate=!1,this.platform_id="",this.aisuid="",this.use_logging=!1,this.log_target="",this.use_cache=!0,this.response_cache={},this.cache_time={init:3e4,chooser:3e4,authz_query:3e4,identity:3e4,bounce:2e3,echo_response:3e4,vcs:2e3,vcs_list:5e3,resources:3e4,authz_query_list:3e4},this.script_insert_type="",this.log_toggle=0,this.supportsLocalStorage=void 0,this.ls_prepend="AIS_client___",this.language_override="","http:"==window.location.protocol||"https:"==window.location.protocol?this.protocol=window.location.protocol+"//":"ios-cravetv"===window.osPlatform||"android-cravetv"===window.osPlatform?this.protocol="https://":this.protocol="http://",this.log_object={},this.log_object_keys=[],this.log_object_size=20}e.prototype.assignhandler=function(e,t){this._isFunction(t)?this.callbacks[e]=t:this.log("unable to assign handler to callback type ("+e+") because it is not callable",!0)},e.prototype.setPlatformId=function(e){this.platform_id!=e&&this._reset_cache(!0),this.platform_id=e,this.log("setPlatformId ("+this.platform_id+")",!0)},e.prototype.setLanguageOverride=function(e){this.language_override=e,this.log("setLanguageOverride ("+this.language_override+")",!0)},e.prototype.setProtocol=function(e){this.protocol=e,this.log("setProtocol ("+this.protocol+")",!0)},e.prototype.setResponsefield=function(e){this.responsefield=e,this.log("setResponsefield ("+this.responsefield+")",!0)},e.prototype.aisresponse=function(e){if(void 0!==e.authenticated&&this.authstate!==this._mkboolean(e.authenticated)&&(this.authstate=this._mkboolean(e.authenticated),this._reset_cache(),this.authstate?(this.log("Authenticated",!0),this._dispatch("becomes_authenticated",e)):(this.log("Not Authenticated",!0),this._dispatch("becomes_unauthenticated",e))),void 0!==e.authorization&&(this._mkboolean(e.authorization)?this.log("Authorized: "+e.resource,!0):this.log("Not Authorized: "+e.resource,!0)),void 0!==e.aisuid?(this.aisuid=e.aisuid,this.log("Init: AISUID - "+this.aisuid,!0)):void 0!==e.identity&&(this.aisuid=e.identity.aisuid,this.log("Identity: AISUID - "+this.aisuid,!0)),this._set_cache(e),"authz_query_list"==e._type||"vcs_list"==e._type)for(i=0;i<e.documents.length;i++)this._set_cache(e.documents[i]);"logout_result"==e._type&&(this.log("aisresponse: clearing cache",!0),this._reset_cache(!0));var t=e._type;this._dispatch(t,e)},e.prototype.bounce=function(e){this.log("bounce ",!0),1!=e&&0!=this._use_cache("bounce")||this._call_ais("bounce")},e.prototype.echo=function(e,t){this.log("echo ",!0),1!=t&&0!=this._use_cache("echo_response",e)||this._call_ais("echo",e)},e.prototype.init=function(e){this.log("init: ("+(1==this.authstate?"init":"chooser")+")",!0),1!=e&&0!=this._use_cache(1==this.authstate?"init":"chooser")||this._call_ais("init")},e.prototype.chooser=function(e){this.log("chooser ",!0),1!=e&&0!=this._use_cache("chooser")||this._call_ais("chooser")},e.prototype.init_increaseScope=function(e){this.log("init_increaseScope DEPRECATED, using chooser",!0),1!=e&&0!=this._use_cache("chooser")||this._call_ais("chooser")},e.prototype.identity=function(e){this.log("identity ",!0),1!=e&&0!=this._use_cache("identity")||this._call_ais("identity")},e.prototype.logout=function(){this.log("logout ",!0),this._reset_cache(),this._call_ais("logout")},e.prototype.resourceAccess=function(e,t){this.log("resourceAccess: "+e,!0),1!=t&&0!=this._use_cache("authz_query",e)||this._call_ais("resourceAccess",e)},e.prototype.resourceAccessList=function(e,t){this.log("resourceAccessList: "+e.join(","),!0),null==e||"object"!=typeof e?this.log("resourceAccessList: no resourceid_array provided"+("object"!=typeof e),!0):1!=t&&0!=this._use_cache("authz_query_list",e)||this._call_ais("resourceAccessList",e)},e.prototype.channelAccess=function(e,t){this.log("channelAccess: "+e,!0),1!=t&&0!=this._use_cache("authz_query",e)||this._call_ais("channelAccess",e)},e.prototype.resources=function(e){this.log("resources ",!0),1!=e&&0!=this._use_cache("resources")||this._call_ais("resources")},e.prototype.registerDevice=function(e){this.log("registerDevice ",!0),this._call_ais("registerDevice",e)},e.prototype.vcsGet=function(e,t){this.log("vcsGet: "+e,!0),null==e||""==e?this.log("vcsGet: no contentid provided",!0):1!=t&&0!=this._use_cache("vcs",e)||this._call_ais("vcsGet",e)},e.prototype.vcsSet=function(e,t){this.log("vcsSet: "+e+","+t,!0),this._call_ais("vcsSet",e,t)},e.prototype.vcsList=function(e,t){this.log("vcsList: "+(null!=e?e.join(","):"no contentid_array"),!0),1!=t&&0!=this._use_cache("vcs_list",e)||this._call_ais("vcsList",e)},e.prototype.vcsListRecent=function(e,t){this.log("vcsListRecent: "+e,!0),1!=t&&0!=this._use_cache("vcs_list",e)||this._call_ais("vcsListRecent",e)},e.prototype.loginFormat=function(e,t){return this.protocol+this.baseurl+this.platform_id+"/init/"+e+"?responsemethod=redirect&format=jsonp"+(null!=t&&""!=t?"&responsetarget="+t:"")+(""!=this.language_override?"&lang="+this.language_override:"")},e.prototype.logoutFormat=function(e){return this.protocol+this.baseurl+this.platform_id+"/slo/?responsemethod=redirect&format=jsonp"+(null!=e?"&responsetarget="+e:"")},e.prototype.login=function(e){return this.log("ais_client.login DEPRECATED. Use ais_client.loginFormat instead.",!0),this.protocol+this.baseurl+this.platform_id+"/init/"+e+"?format=jsonp"},e.prototype.setLogging=function(e,t){1==e?(this.use_logging=e,this.log("setLogging: Logging enabled ("+(null!=t&&document.getElementById(t)?"HTML - "+t:"console.log")+")",!0)):(this.log("setLogging: Logging disabled",!0),this.use_logging=e),null!=t?document.getElementById(t)&&(this.log_target=t):this.log_target=""},e.prototype.setCacheTime=function(e,t){var s=!1;if("number"==typeof t)switch(e){case"init":case"chooser":case"authz_query":case"identity":case"bounce":case"echo_response":case"vcs":case"resources":case"vcs_list":case"authz_query_list":this.cache_time[e]=t,s=!0}return this.log("setCache ("+e+","+t+") "+(1==s?"changed successfully":"invalid call"),!0),this.log(this.cache_time),s},e.prototype.setUseCache=function(e){1!=e&&0!=e||e==this.use_cache||(this.use_cache=e,this.log("setUseCache: changed to (use_cache="+e+")",!0)),this.log("setUseCache: (use_cache="+this.use_cache+")",!0)},e.prototype.setScriptInsert=function(e){this.script_insert_type="","jquery"==e&&(this.script_insert_type=e),this.log("setScriptInsert ("+e+")",!0)},e.prototype.setRedirectLocation=function(e){this.log("setRedirectLocation ("+e+")",!0),this._set("ais_client_redirect_location",e)},e.prototype.getRedirectLocation=function(){return this.log("getRedirectLocation ("+this._get("ais_client_redirect_location")+")",!0),this._get("ais_client_redirect_location")},e.prototype.clearRedirectLocation=function(){this._clear("ais_client_redirect_location"),this.log("clearRedirectLocation",!0)},e.prototype.log=function(e,t){var s="";if(s=1==t?"[AIS] "+e:e,this.log_object_keys.length>=this.log_object_size){var o=this.log_object_keys.shift();delete this.log_object[o]}var i=new Date,c=i.getFullYear()+"-"+i.getMonth()+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();if(this.log_object[c]=s,this.log_object_keys[this.log_object_keys.length]=c,1==this.use_logging&&(window.console&&console.log&&console.log(s),""!=this.log_target)){var r="";"object"==typeof e&&(r+="<br>",s="[AIS] "+s+(r+=this._create_object_log_output(e))),document.getElementById(this.log_target).innerHTML+="<div"+(0==this.log_toggle?"":' style="background: #E8E8E8;"')+">"+s+"</div>",this.log_toggle=1==this.log_toggle?0:1}},e.prototype._call_ais=function(e,t,s){var o=this.protocol+this.baseurl+this.platform_id;if("echo"==e?o+="/echo/"+t:"bounce"==e?o+="/bounce/":"init"==e?o+="/init/":"chooser"==e?o+="/chooser/":"identity"==e?o+="/identity/":"logout"==e?o+="/slo/":"resourceAccess"==e?o+="/identity/resourceAccess/"+t:"channelAccess"==e?o+="/identity/channelAccess/"+t:"resources"==e?o+="/identity/resourceAccess/":"registerDevice"==e?o+="/identity/registerDevice/"+t:"vcsGet"==e?o+="/vcs/"+t:"vcsList"==e?o+="/vcs/":"vcsListRecent"==e?o+="/vcs/":"vcsSet"==e?o+="/vcs/"+t:"resourceAccessList"==e&&(o+="/identity/resourceAccess/"),o+="?format=jsonp&responsefield="+this.responsefield,"vcsSet"==e&&(o+="&ph_pos="+s+"&trickmode=post"),"vcsList"==e&&null!=t&&null!=t&&""!=t&&(o+="&content_id="+t.join("&content_id=")),"vcsListRecent"==e&&null!=t&&null!=t&&""!=t&&(o+="&limit="+t),"resourceAccessList"==e&&(o+="&resource_id="+t.join("&resource_id=")),""==this.language_override||"resourceAccess"!=e&&"channelAccess"!=e&&"resourceAccessList"!=e||(o+="&lang="+this.language_override),this.log(e+": "+o,!0),"jquery"==this.script_insert_type)jQuery.ajax({url:o,dataType:"script",cache:!0,async:!0});else{var i=document.createElement("script");i.setAttribute("src",o),document.getElementsByTagName("head")[0].appendChild(i)}},e.prototype._mkboolean=function(e){return/^true$/i.test(e)},e.prototype._isFunction=function(e){return!!e&&e.constructor==Function},e.prototype._nullhandler=function(e,t){},e.prototype._alerthandler=function(e,t){alert("alert handler received message of type: "+e+"\n with: "+t,!0)},e.prototype._dispatch=function(e,t){void 0!==this.callbacks[e]&&this._isFunction(this.callbacks[e])?(runner=this.callbacks[e],runner(e,t)):this.log("callable is not set for handler: "+e,!0)},e.prototype._create_object_log_output=function(e){var t="";for(key in t="{",e)"object"==typeof e[key]?(t+=("string"==typeof key?'"'+key+'"':key)+":",t+=this._create_object_log_output(e[key]),t+=", "):t+=("string"==typeof key?'"'+key+'"':key)+":"+("string"==typeof e[key]?'"'+e[key]+'"':e[key])+", ";return t=t.substring(0,t.length-2),t+="}"},e.prototype._use_cache=function(e){var t=!1;if(0==this.use_cache)return this.log("_use_cache: caching disabled",!0),t;var s=0,o="",i=new Date,c=e;"authz_query"==c||"vcs"==c?c+="-"+arguments[1]:"echo_response"==c?c+="-"+escape(arguments[1]):"vcs_list"==c&&(c+="-"+("object"!=typeof arguments[1]?arguments[1]:arguments[1].join("-")));var r=void 0;return 1==this.supportsLocalStorage&&(r=localStorage.getItem(this.ls_prepend+this.platform_id+"__response_cache_update__"+c)),void 0!==this.response_cache._response_cache_updates[c]?(s=this.response_cache._response_cache_updates[c],o="js"):null!=r&&(s=r,o="localStorage"),0<s&&i.getTime()-s<this.cache_time[e]?("js"==o?aisresponse(this.response_cache[c],!0):"localStorage"==o&&aisresponse(JSON.parse(localStorage.getItem(this.ls_prepend+this.platform_id+"__"+c)),!0),t=!0,this.log("_use_cache: "+c+" ("+o+" cached "+(this.cache_time[e]-(i.getTime()-s))+"/"+this.cache_time[e]+")",!0)):(t=!1,1==this.supportsLocalStorage&&(localStorage.removeItem(this.ls_prepend+this.platform_id+"__response_cache_update__"+c),localStorage.removeItem(this.ls_prepend+this.platform_id+"__"+c))),t},e.prototype._set_cache=function(e){var t=new Date,s=e._type;if("authz_query"==s)s=e._type+"-"+e.resource;else if("echo_response"==s)s+="-"+escape(e.response_value);else if("vcs"==s)s+="-"+escape(e.content_id);else if("vcs_list"==s)for(i=0;i<e.documents.length;i++)s+="-"+e.documents[i].content_id;if(void 0===this.response_cache[s]||t.getTime()-this.response_cache._response_cache_updates[s]>this.cache_time[e._type]){var o=void 0;1==this.supportsLocalStorage&&(o=localStorage.getItem(this.ls_prepend+this.platform_id+"__response_cache_update__"+s)),this.response_cache._response_cache_updates[s]=null!=o?o:t.getTime(),1==this.supportsLocalStorage&&localStorage.setItem(this.ls_prepend+this.platform_id+"__response_cache_update__"+s,t.getTime())}this.response_cache[s]=e,1==this.supportsLocalStorage&&localStorage.setItem(this.ls_prepend+this.platform_id+"__"+s,JSON.stringify(e)),this.log("_set_cache: "+s+" (caching length = "+this.cache_time[e._type]+")",!0),this.log(this.response_cache)},e.prototype._reset_cache=function(e){if(this.response_cache={_response_cache_updates:{}},1==e&&1==this.supportsLocalStorage){var t=[];for(i=0;i<=localStorage.length-1;i++)t[i]=localStorage.key(i);var s=this.ls_prepend+this.platform_id+"__";for(i=0;i<=t.length-1;i++)t[i].substring(0,s.length)==s&&(this.log("_reset_cache: Removing| "+t[i],!0),localStorage.removeItem(t[i]))}},e.prototype._set=function(e,t){if(1==this.supportsLocalStorage)return this.log('_set: using localStorage (key: "'+e+'", value: "'+t+'")',!0),localStorage.removeItem(e),localStorage.setItem(e,escape(t));var s="";if(arguments[2]){var o=new Date;o.setTime(o.getTime()+24*arguments[2]*60*60*1e3),s="; expires="+o.toGMTString()}return document.cookie=e+"="+escape(t)+s+"; path=/",void this.log('_set: using cookies (key: "'+e+'", value: "'+t+'", expires: "'+s+'", cookie_value: "'+e+"="+t+s+'; path=/")',!0)},e.prototype._get=function(e){if(1==this.supportsLocalStorage)return this.log('_get: using localStorage (key: "'+e+'", value: "'+localStorage.getItem(e)+'")',!0),unescape(localStorage.getItem(e));for(var t=e+"=",s=document.cookie.split(";"),o=0;o<s.length;o++){for(var i=s[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return this.log('_get: using cookies (key: "'+e+'", value: "'+i.substring(t.length,i.length)+'")',!0),unescape(i.substring(t.length,i.length))}return null},e.prototype._clear=function(e){1==this.supportsLocalStorage?localStorage.removeItem(e):this._set(e,"",-1)},e.prototype._setLocalStorageSupport=function(){this.supportsLocalStorage=this.__checkLocalStorageSupport()},e.prototype.__checkLocalStorageSupport=function(){try{return JSON.stringify({a:"b"}),"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},window.ais_client=new e,window.ais_client._reset_cache(),window.ais_client._setLocalStorageSupport()}();
"use strict";jQuery.base64=function(r){var c="=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function o(r,t){var e=a.indexOf(r.charAt(t));if(-1===e)throw"Cannot decode base64";return e}function u(r,t){var e=r.charCodeAt(t);if(255<e)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return e}return{decode:function(r){var t,e,n=0,h=r.length,a=[];if(r=String(r),0===h)return r;if(h%4!=0)throw"Cannot decode base64";for(r.charAt(h-1)===c&&(n=1,r.charAt(h-2)===c&&(n=2),h-=4),t=0;t<h;t+=4)e=o(r,t)<<18|o(r,t+1)<<12|o(r,t+2)<<6|o(r,t+3),a.push(String.fromCharCode(e>>16,e>>8&255,255&e));switch(n){case 1:e=o(r,t)<<18|o(r,t+1)<<12|o(r,t+2)<<6,a.push(String.fromCharCode(e>>16,e>>8&255));break;case 2:e=o(r,t)<<18|o(r,t+1)<<12,a.push(String.fromCharCode(e>>16))}return a.join("")},encode:function(r){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";var t,e,n=[],h=(r=String(r)).length-r.length%3;if(0===r.length)return r;for(t=0;t<h;t+=3)e=u(r,t)<<16|u(r,t+1)<<8|u(r,t+2),n.push(a.charAt(e>>18)),n.push(a.charAt(e>>12&63)),n.push(a.charAt(e>>6&63)),n.push(a.charAt(63&e));switch(r.length-h){case 1:e=u(r,t)<<16,n.push(a.charAt(e>>18)+a.charAt(e>>12&63)+c+c);break;case 2:e=u(r,t)<<16|u(r,t+1)<<8,n.push(a.charAt(e>>18)+a.charAt(e>>12&63)+a.charAt(e>>6&63)+c)}return n.join("")},VERSION:"1.0"}}(jQuery);
!function(e){"use strict";var n,s,d="remodal",o={hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnOutsideClick:!0};e[d]={lookup:[]};var a=function(t){var i=t.css("transition-duration")||t.css("-webkit-transition-duration")||t.css("-moz-transition-duration")||t.css("-o-transition-duration")||t.css("-ms-transition-duration")||0,s=t.css("transition-delay")||t.css("-webkit-transition-delay")||t.css("-moz-transition-delay")||t.css("-o-transition-delay")||t.css("-ms-transition-delay")||0;return 1e3*(parseFloat(i)+parseFloat(s))},r=function(){if(e(document.body).height()<=e(window).height())return 0;var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);var i=t.offsetWidth;t.style.overflow="scroll";var s=document.createElement("div");s.style.width="100%",t.appendChild(s);var o=s.offsetWidth;return t.parentNode.removeChild(t),i-o};function l(t,i){this.settings=e.extend({},o,i),this.modal=t,this.buildDOM(),this.addEventListeners(),this.index=e[d].lookup.push(this)-1,this.busy=!1}l.prototype.buildDOM=function(){this.body=e(document.body),this.bg=e("."+d+"-bg"),this.modalClose=e("<a href='#'>").addClass(d+"-close"),this.overlay=e("<div>").addClass(d+"-overlay"),this.modal.hasClass(d)||this.modal.addClass(d),this.modal.css("visibility","visible"),this.modal.append(this.modalClose),this.overlay.append(this.modal),this.body.append(this.overlay),this.confirm=this.modal.find("."+d+"-confirm"),this.cancel=this.modal.find("."+d+"-cancel");var t=a(this.overlay),i=a(this.modal),s=a(this.bg);this.td=t<i?i:t,this.td=s>this.td?s:this.td},l.prototype.addEventListeners=function(){var i=this;e(document).bind("keyup."+d,function(t){27===t.keyCode&&i.close()}),i.settings.closeOnOutsideClick&&this.overlay.bind("click."+d,function(t){e(t.target).hasClass(d+"-overlay")&&i.close()})},l.prototype.open=function(){if(!this.busy){this.busy=!0,this.modal.trigger("open");var t=this.modal.attr("data-"+d+"-id");t&&this.settings.hashTracking&&(s=e(window).scrollTop(),location.hash=t),n&&n!==this&&(n.overlay.hide(),n.body.removeClass(d+"_active")),n=this,e(document.body).css("padding-right","+="+r()),e("html, body").addClass(d+"_lock"),this.overlay.show();var i=this;setTimeout(function(){i.body.addClass(d+"_active"),setTimeout(function(){i.busy=!1,i.modal.trigger("opened")},i.td+50)},25)}},l.prototype.close=function(){if(!this.busy){this.busy=!0,this.modal.trigger("close"),this.settings.hashTracking&&this.modal.attr("data-"+d+"-id")===location.hash.substr(1)&&(location.hash="",e(window).scrollTop(s)),this.body.removeClass(d+"_active");var t=this;setTimeout(function(){t.overlay.hide(),e(document.body).css("padding-right","-="+r()),e("html, body").removeClass(d+"_lock"),t.busy=!1,t.modal.trigger("closed")},t.td+50)}},e&&(e.fn[d]=function(o){var a;return this.each(function(t,i){var s=e(i);null==s.data(d)&&(a=new l(s,o),s.data(d,a.index),a.settings.hashTracking&&s.attr("data-"+d+"-id")===location.hash.substr(1)&&a.open())}),a}),e(document).ready(function(){e(document).on("click","[data-"+d+"-target]",function(t){t.preventDefault();var i=t.currentTarget.getAttribute("data-"+d+"-target"),s=e("[data-"+d+"-id="+i+"]");e[d].lookup[s.data(d)].open()}),e(document).find("."+d).each(function(t,i){var s=e(i),o=s.data(d+"-options");o?("string"==typeof o||o instanceof String)&&(o=function(t){var i,s,o,a,e={};for(s=0,o=(i=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(",")).length;s<o;s++)i[s]=i[s].split(":"),("string"==typeof(a=i[s][1])||a instanceof String)&&(a="true"===a||"false"!==a&&a),("string"==typeof a||a instanceof String)&&(a=isNaN(a)?a:+a),e[i[s][0]]=a;return e}(o)):o={},s[d](o)})});e(window).bind("hashchange."+d,function(t,i){var s=location.hash.replace("#","");if(void 0===i&&(i=!0),s){var o;try{o=e("[data-"+d+"-id="+s.replace(new RegExp("/","g"),"\\/")+"]")}catch(t){}if(o&&o.length){var a=e[d].lookup[o.data(d)];a&&a.settings.hashTracking&&a.open()}}else i&&n&&!n.busy&&n.settings.hashTracking&&n.close()})}(window.jQuery||window.Zepto);
!function(t,e){"object"==typeof exports&&exports?e(exports):e(t.Mustache={})}(this,function(x){var e=Object.prototype.toString,U=Array.isArray||function(t){return"[object Array]"===e.call(t)};function f(t){return"function"==typeof t}function E(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var r=RegExp.prototype.test;var s=/\S/;function m(t){return e=s,n=t,!r.call(e,n);var e,n}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};var T=/\s*/,j=/\s+/,C=/\s*=/,A=/\s*\}/,R=/#|\^|\/|>|\{|&|=|!/;function S(t){this.string=t,this.tail=t,this.pos=0}function i(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function t(){this.cache={}}S.prototype.eos=function(){return""===this.tail},S.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},S.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},i.prototype.push=function(t){return new i(t,this)},i.prototype.lookup=function(t){var e,n=this.cache;if(t in n)e=n[t];else{for(var r,s,i=this;i;){if(0<t.indexOf("."))for(e=i.view,r=t.split("."),s=0;null!=e&&s<r.length;)e=e[r[s++]];else e=i.view[t];if(null!=e)break;i=i.parent}n[t]=e}return f(e)&&(e=e.call(this.view)),e},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,e){var n=this.cache,r=n[t];return null==r&&(r=n[t]=function(t,e){if(!t)return[];var n,r,s,i=[],o=[],a=[],c=!1,u=!1;function h(){if(c&&!u)for(;a.length;)delete o[a.pop()];else a=[];u=c=!1}function l(t){if("string"==typeof t&&(t=t.split(j,2)),!U(t)||2!==t.length)throw new Error("Invalid tags: "+t);n=new RegExp(E(t[0])+"\\s*"),r=new RegExp("\\s*"+E(t[1])),s=new RegExp("\\s*"+E("}"+t[1]))}l(e||x.tags);for(var p,f,g,v,w,d,k=new S(t);!k.eos();){if(p=k.pos,g=k.scanUntil(n))for(var y=0,b=g.length;y<b;++y)m(v=g.charAt(y))?a.push(o.length):u=!0,o.push(["text",v,p,p+1]),p+=1,"\n"===v&&h();if(!k.scan(n))break;if(c=!0,f=k.scan(R)||"name",k.scan(T),"="===f?(g=k.scanUntil(C),k.scan(C),k.scanUntil(r)):"{"===f?(g=k.scanUntil(s),k.scan(A),k.scanUntil(r),f="&"):g=k.scanUntil(r),!k.scan(r))throw new Error("Unclosed tag at "+k.pos);if(w=[f,g,p,k.pos],o.push(w),"#"===f||"^"===f)i.push(w);else if("/"===f){if(!(d=i.pop()))throw new Error('Unopened section "'+g+'" at '+p);if(d[1]!==g)throw new Error('Unclosed section "'+d[1]+'" at '+p)}else"name"===f||"{"===f||"&"===f?u=!0:"="===f&&l(g)}if(d=i.pop())throw new Error('Unclosed section "'+d[1]+'" at '+k.pos);return function(t){for(var e,n=[],r=n,s=[],i=0,o=t.length;i<o;++i)switch((e=t[i])[0]){case"#":case"^":r.push(e),s.push(e),r=e[4]=[];break;case"/":s.pop()[5]=e[2],r=0<s.length?s[s.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],s=0,i=t.length;s<i;++s)(e=t[s])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(o))}(t,e)),r},t.prototype.render=function(t,e,n){var r=this.parse(t),s=e instanceof i?e:new i(e);return this.renderTokens(r,s,n,t)},t.prototype.renderTokens=function(t,e,n,r){var s,i,o="",a=this;function c(t){return a.render(t,e,n)}for(var u=0,h=t.length;u<h;++u)switch((s=t[u])[0]){case"#":if(!(i=e.lookup(s[1])))continue;if(U(i))for(var l=0,p=i.length;l<p;++l)o+=this.renderTokens(s[4],e.push(i[l]),n,r);else if("object"==typeof i||"string"==typeof i)o+=this.renderTokens(s[4],e.push(i),n,r);else if(f(i)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(i=i.call(e.view,r.slice(s[3],s[5]),c))&&(o+=i)}else o+=this.renderTokens(s[4],e,n,r);break;case"^":(!(i=e.lookup(s[1]))||U(i)&&0===i.length)&&(o+=this.renderTokens(s[4],e,n,r));break;case">":if(!n)continue;null!=(i=f(n)?n(s[1]):n[s[1]])&&(o+=this.renderTokens(this.parse(i),e,n,i));break;case"&":null!=(i=e.lookup(s[1]))&&(o+=i);break;case"name":null!=(i=e.lookup(s[1]))&&(o+=x.escape(i));break;case"text":o+=s[1]}return o},x.name="mustache.js",x.version="0.8.1",x.tags=["{{","}}"];var o=new t;x.clearCache=function(){return o.clearCache()},x.parse=function(t,e){return o.parse(t,e)},x.render=function(t,e,n){return o.render(t,e,n)},x.to_html=function(t,e,n,r){var s=x.render(t,e,n);if(!f(r))return s;r(s)},x.escape=function(t){return String(t).replace(/[&<>"'\/]/g,function(t){return n[t]})},x.Scanner=S,x.Context=i,x.Writer=t});
!function(e){var t;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():("undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.pako=e())}(function(){return function a(r,s,o){function f(i,e){if(!s[i]){if(!r[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);throw new Error("Cannot find module '"+i+"'")}var n=s[i]={exports:{}};r[i][0].call(n.exports,function(e){var t=r[i][1][e];return f(t||e)},n,n.exports,a,r,s,o)}return s[i].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)f(o[e]);return f}({1:[function(e,t,i){"use strict";function n(e,t){var i=new o(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}var l=e("./zlib/inflate.js"),d=e("./utils/common"),u=e("./utils/strings"),c=e("./zlib/constants"),a=e("./zlib/messages"),r=e("./zlib/zstream"),s=e("./zlib/gzheader"),o=function(e){this.options=d.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var i=l.inflateInit2(this.strm,t.windowBits);if(i!==c.Z_OK)throw new Error(a[i]);this.header=new s,l.inflateGetHeader(this.strm,this.header)};o.prototype.push=function(e,t){var i,n,a,r,s,o=this.strm,f=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?c.Z_FINISH:c.Z_NO_FLUSH,o.input="string"==typeof e?u.binstring2buf(e):e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new d.Buf8(f),o.next_out=0,o.avail_out=f),(i=l.inflate(o,c.Z_NO_FLUSH))!==c.Z_STREAM_END&&i!==c.Z_OK)return this.onEnd(i),this.ended=!0,!1;o.next_out&&(0===o.avail_out||i===c.Z_STREAM_END||0===o.avail_in&&n===c.Z_FINISH)&&("string"===this.options.to?(a=u.utf8border(o.output,o.next_out),r=o.next_out-a,s=u.buf2string(o.output,a),o.next_out=r,o.avail_out=f-r,r&&d.arraySet(o.output,o.output,a,r,0),this.onData(s)):this.onData(d.shrinkBuf(o.output,o.next_out)))}while(0<o.avail_in&&i!==c.Z_STREAM_END);return i===c.Z_STREAM_END&&(n=c.Z_FINISH),n!==c.Z_FINISH||(i=l.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c.Z_OK)},o.prototype.onData=function(e){this.chunks.push(e)},o.prototype.onEnd=function(e){e===c.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):d.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=o,i.inflate=n,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},i.ungzip=n},{"./utils/common":2,"./utils/strings":3,"./zlib/constants":5,"./zlib/gzheader":7,"./zlib/inflate.js":9,"./zlib/messages":11,"./zlib/zstream":12}],2:[function(e,t,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),a);else for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){var t,i,n,a,r,s;for(t=n=0,i=e.length;t<i;t++)n+=e[t].length;for(s=new Uint8Array(n),t=a=0,i=e.length;t<i;t++)r=e[t],s.set(r,a),a+=r.length;return s}},r={arraySet:function(e,t,i,n,a){for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(n)},{}],3:[function(e,t,i){"use strict";function f(e,t){if(t<65537&&(e.subarray&&r||!e.subarray&&a))return String.fromCharCode.apply(null,l.shrinkBuf(e,t));for(var i="",n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i}var l=e("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var d=new l.Buf8(256),n=0;n<256;n++)d[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;d[254]=d[254]=1,i.string2buf=function(e){var t,i,n,a,r,s=e.length,o=0;for(a=0;a<s;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<s&&(56320==(64512&(n=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new l.Buf8(o),a=r=0;r<o;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<s&&(56320==(64512&(n=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(n-56320),a++)),i<128?t[r++]=i:(i<2048?t[r++]=192|i>>>6:(i<65536?t[r++]=224|i>>>12:(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63),t[r++]=128|i>>>6&63),t[r++]=128|63&i);return t},i.buf2binstring=function(e){return f(e,e.length)},i.binstring2buf=function(e){for(var t=new l.Buf8(e.length),i=0,n=t.length;i<n;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,n,a,r,s=t||e.length,o=new Array(2*s);for(i=n=0;i<s;)if((a=e[i++])<128)o[n++]=a;else if(4<(r=d[a]))o[n++]=65533,i+=r-1;else{for(a&=2===r?31:3===r?15:7;1<r&&i<s;)a=a<<6|63&e[i++],r--;1<r?o[n++]=65533:a<65536?o[n++]=a:(a-=65536,o[n++]=55296|a>>10&1023,o[n++]=56320|1023&a)}return f(o,n)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0?t:0===i?t:i+d[e[i]]>t?i:t}},{"./common":2}],4:[function(e,t){"use strict";t.exports=function(e,t,i,n){for(var a=65535&e|0,r=e>>>16&65535|0,s=0;0!==i;){for(i-=s=2e3<i?2e3:i;r=r+(a=a+t[n++]|0)|0,--s;);a%=65521,r%=65521}return a|r<<16|0}},{}],5:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],6:[function(e,t){"use strict";var o=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,n){var a=o,r=n+i;e^=-1;for(var s=n;s<r;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],7:[function(e,t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],8:[function(e,t){"use strict";t.exports=function(e,t){var i,n,a,r,s,o,f,l,d,u,c,h,b,m,w,k,g,_,v,p,x,y,S,B,E;i=e.state,n=e.next_in,B=e.input,a=n+(e.avail_in-5),r=e.next_out,E=e.output,s=r-(t-e.avail_out),o=r+(e.avail_out-257),f=i.dmax,l=i.wsize,d=i.whave,u=i.wnext,c=i.window,h=i.hold,b=i.bits,m=i.lencode,w=i.distcode,k=(1<<i.lenbits)-1,g=(1<<i.distbits)-1;e:do{b<15&&(h+=B[n++]<<b,b+=8,h+=B[n++]<<b,b+=8),_=m[h&k];t:for(;;){if(h>>>=v=_>>>24,b-=v,0===(v=_>>>16&255))E[r++]=65535&_;else{if(!(16&v)){if(0==(64&v)){_=m[(65535&_)+(h&(1<<v)-1)];continue t}if(32&v){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}p=65535&_,(v&=15)&&(b<v&&(h+=B[n++]<<b,b+=8),p+=h&(1<<v)-1,h>>>=v,b-=v),b<15&&(h+=B[n++]<<b,b+=8,h+=B[n++]<<b,b+=8),_=w[h&g];i:for(;;){if(h>>>=v=_>>>24,b-=v,!(16&(v=_>>>16&255))){if(0==(64&v)){_=w[(65535&_)+(h&(1<<v)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(x=65535&_,b<(v&=15)&&(h+=B[n++]<<b,(b+=8)<v&&(h+=B[n++]<<b,b+=8)),f<(x+=h&(1<<v)-1)){e.msg="invalid distance too far back",i.mode=30;break e}if(h>>>=v,b-=v,(v=r-s)<x){if(d<(v=x-v)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(S=c,(y=0)===u){if(y+=l-v,v<p){for(p-=v;E[r++]=c[y++],--v;);y=r-x,S=E}}else if(u<v){if(y+=l+u-v,(v-=u)<p){for(p-=v;E[r++]=c[y++],--v;);if(y=0,u<p){for(p-=v=u;E[r++]=c[y++],--v;);y=r-x,S=E}}}else if(y+=u-v,v<p){for(p-=v;E[r++]=c[y++],--v;);y=r-x,S=E}for(;2<p;)E[r++]=S[y++],E[r++]=S[y++],E[r++]=S[y++],p-=3;p&&(E[r++]=S[y++],1<p&&(E[r++]=S[y++]))}else{for(y=r-x;E[r++]=E[y++],E[r++]=E[y++],E[r++]=E[y++],2<(p-=3););p&&(E[r++]=E[y++],1<p&&(E[r++]=E[y++]))}break}}break}}while(n<a&&r<o);n-=p=b>>3,h&=(1<<(b-=p<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<o?o-r+257:257-(r-o),i.hold=h,i.bits=b}},{}],9:[function(e,t,i){"use strict";function T(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=ie,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new D.Buf32(l),t.distcode=t.distdyn=new D.Buf32(d),t.sane=1,t.back=-1,X):Q}function a(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,n(e)):Q}function r(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?Q:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,a(e))):Q}function s(e,t){var i,n;return e?(n=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new D.Buf16(320),this.work=new D.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},(e.state=n).window=null,(i=r(e,t))!==X&&(e.state=null),i):Q}function F(e){if(c){var t;for(o=new D.Buf32(512),f=new D.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(M(j,e.lens,0,288,o,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;M(P,e.lens,0,32,f,0,e.work,{bits:5}),c=!1}e.lencode=o,e.lenbits=9,e.distcode=f,e.distbits=5}var o,f,D=e("../utils/common"),U=e("./adler32"),L=e("./crc32"),H=e("./inffast"),M=e("./inftrees"),K=0,j=1,P=2,q=4,Y=5,G=6,X=0,W=1,J=2,Q=-2,V=-3,$=-4,ee=-5,te=8,ie=1,ne=2,ae=3,re=4,se=5,oe=6,fe=7,le=8,de=9,ue=10,ce=11,he=12,be=13,me=14,we=15,ke=16,ge=17,_e=18,ve=19,pe=20,xe=21,ye=22,Se=23,Be=24,Ee=25,Ze=26,Ae=27,ze=28,Re=29,Ce=30,Ne=31,Ie=32,l=852,d=592,u=15,c=!0;i.inflateReset=a,i.inflateReset2=r,i.inflateResetKeep=n,i.inflateInit=function(e){return s(e,u)},i.inflateInit2=s,i.inflate=function(e,t){var i,n,a,r,s,o,f,l,d,u,c,h,b,m,w,k,g,_,v,p,x,y,S,B,E,Z,A,z,R,C,N=0,I=new D.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Q;(i=e.state).mode===he&&(i.mode=be),s=e.next_out,a=e.output,f=e.avail_out,r=e.next_in,n=e.input,o=e.avail_in,l=i.hold,d=i.bits,u=o,c=f,y=X;e:for(;;)switch(i.mode){case ie:if(0===i.wrap){i.mode=be;break}for(;d<16;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(2&i.wrap&&35615===l){I[i.check=0]=255&l,I[1]=l>>>8&255,i.check=L(i.check,I,2,0),d=l=0,i.mode=ne;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",i.mode=Ce;break}if((15&l)!==te){e.msg="unknown compression method",i.mode=Ce;break}if(d-=4,x=8+(15&(l>>>=4)),0===i.wbits)i.wbits=x;else if(x>i.wbits){e.msg="invalid window size",i.mode=Ce;break}i.dmax=1<<x,e.adler=i.check=1,i.mode=512&l?ue:he,d=l=0;break;case ne:for(;d<16;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(i.flags=l,(255&i.flags)!==te){e.msg="unknown compression method",i.mode=Ce;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=Ce;break}i.head&&(i.head.text=l>>8&1),512&i.flags&&(I[0]=255&l,I[1]=l>>>8&255,i.check=L(i.check,I,2,0)),d=l=0,i.mode=ae;case ae:for(;d<32;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}i.head&&(i.head.time=l),512&i.flags&&(I[0]=255&l,I[1]=l>>>8&255,I[2]=l>>>16&255,I[3]=l>>>24&255,i.check=L(i.check,I,4,0)),d=l=0,i.mode=re;case re:for(;d<16;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}i.head&&(i.head.xflags=255&l,i.head.os=l>>8),512&i.flags&&(I[0]=255&l,I[1]=l>>>8&255,i.check=L(i.check,I,2,0)),d=l=0,i.mode=se;case se:if(1024&i.flags){for(;d<16;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}i.length=l,i.head&&(i.head.extra_len=l),512&i.flags&&(I[0]=255&l,I[1]=l>>>8&255,i.check=L(i.check,I,2,0)),d=l=0}else i.head&&(i.head.extra=null);i.mode=oe;case oe:if(1024&i.flags&&(o<(h=i.length)&&(h=o),h&&(i.head&&(x=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),D.arraySet(i.head.extra,n,r,h,x)),512&i.flags&&(i.check=L(i.check,n,h,r)),o-=h,r+=h,i.length-=h),i.length))break e;i.length=0,i.mode=fe;case fe:if(2048&i.flags){if(0===o)break e;for(h=0;x=n[r+h++],i.head&&x&&i.length<65536&&(i.head.name+=String.fromCharCode(x)),x&&h<o;);if(512&i.flags&&(i.check=L(i.check,n,h,r)),o-=h,r+=h,x)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=le;case le:if(4096&i.flags){if(0===o)break e;for(h=0;x=n[r+h++],i.head&&x&&i.length<65536&&(i.head.comment+=String.fromCharCode(x)),x&&h<o;);if(512&i.flags&&(i.check=L(i.check,n,h,r)),o-=h,r+=h,x)break e}else i.head&&(i.head.comment=null);i.mode=de;case de:if(512&i.flags){for(;d<16;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(l!==(65535&i.check)){e.msg="header crc mismatch",i.mode=Ce;break}d=l=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=he;break;case ue:for(;d<32;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}e.adler=i.check=T(l),d=l=0,i.mode=ce;case ce:if(0===i.havedict)return e.next_out=s,e.avail_out=f,e.next_in=r,e.avail_in=o,i.hold=l,i.bits=d,J;e.adler=i.check=1,i.mode=he;case he:if(t===Y||t===G)break e;case be:if(i.last){l>>>=7&d,d-=7&d,i.mode=Ae;break}for(;d<3;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}switch(i.last=1&l,d-=1,3&(l>>>=1)){case 0:i.mode=me;break;case 1:if(F(i),i.mode=pe,t===G){l>>>=2,d-=2;break e}break;case 2:i.mode=ge;break;case 3:e.msg="invalid block type",i.mode=Ce}l>>>=2,d-=2;break;case me:for(l>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",i.mode=Ce;break}if(i.length=65535&l,d=l=0,i.mode=we,t===G)break e;case we:i.mode=ke;case ke:if(h=i.length){if(o<h&&(h=o),f<h&&(h=f),0===h)break e;D.arraySet(a,n,r,h,s),o-=h,r+=h,f-=h,s+=h,i.length-=h;break}i.mode=he;break;case ge:for(;d<14;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(i.nlen=257+(31&l),l>>>=5,d-=5,i.ndist=1+(31&l),l>>>=5,d-=5,i.ncode=4+(15&l),l>>>=4,d-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=Ce;break}i.have=0,i.mode=_e;case _e:for(;i.have<i.ncode;){for(;d<3;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}i.lens[O[i.have++]]=7&l,l>>>=3,d-=3}for(;i.have<19;)i.lens[O[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},y=M(K,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,y){e.msg="invalid code lengths set",i.mode=Ce;break}i.have=0,i.mode=ve;case ve:for(;i.have<i.nlen+i.ndist;){for(;k=(N=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,g=65535&N,!((w=N>>>24)<=d);){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(g<16)l>>>=w,d-=w,i.lens[i.have++]=g;else{if(16===g){for(B=w+2;d<B;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(l>>>=w,d-=w,0===i.have){e.msg="invalid bit length repeat",i.mode=Ce;break}x=i.lens[i.have-1],h=3+(3&l),l>>>=2,d-=2}else if(17===g){for(B=w+3;d<B;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}d-=w,x=0,h=3+(7&(l>>>=w)),l>>>=3,d-=3}else{for(B=w+7;d<B;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}d-=w,x=0,h=11+(127&(l>>>=w)),l>>>=7,d-=7}if(i.have+h>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=Ce;break}for(;h--;)i.lens[i.have++]=x}}if(i.mode===Ce)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=Ce;break}if(i.lenbits=9,S={bits:i.lenbits},y=M(j,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,y){e.msg="invalid literal/lengths set",i.mode=Ce;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},y=M(P,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,y){e.msg="invalid distances set",i.mode=Ce;break}if(i.mode=pe,t===G)break e;case pe:i.mode=xe;case xe:if(6<=o&&258<=f){e.next_out=s,e.avail_out=f,e.next_in=r,e.avail_in=o,i.hold=l,i.bits=d,H(e,c),s=e.next_out,a=e.output,f=e.avail_out,r=e.next_in,n=e.input,o=e.avail_in,l=i.hold,d=i.bits,i.mode===he&&(i.back=-1);break}for(i.back=0;k=(N=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,g=65535&N,!((w=N>>>24)<=d);){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(k&&0==(240&k)){for(_=w,v=k,p=g;k=(N=i.lencode[p+((l&(1<<_+v)-1)>>_)])>>>16&255,g=65535&N,!(_+(w=N>>>24)<=d);){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}l>>>=_,d-=_,i.back+=_}if(l>>>=w,d-=w,i.back+=w,i.length=g,0===k){i.mode=Ze;break}if(32&k){i.back=-1,i.mode=he;break}if(64&k){e.msg="invalid literal/length code",i.mode=Ce;break}i.extra=15&k,i.mode=ye;case ye:if(i.extra){for(B=i.extra;d<B;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}i.length+=l&(1<<i.extra)-1,l>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=Se;case Se:for(;k=(N=i.distcode[l&(1<<i.distbits)-1])>>>16&255,g=65535&N,!((w=N>>>24)<=d);){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(0==(240&k)){for(_=w,v=k,p=g;k=(N=i.distcode[p+((l&(1<<_+v)-1)>>_)])>>>16&255,g=65535&N,!(_+(w=N>>>24)<=d);){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}l>>>=_,d-=_,i.back+=_}if(l>>>=w,d-=w,i.back+=w,64&k){e.msg="invalid distance code",i.mode=Ce;break}i.offset=g,i.extra=15&k,i.mode=Be;case Be:if(i.extra){for(B=i.extra;d<B;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}i.offset+=l&(1<<i.extra)-1,l>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=Ce;break}i.mode=Ee;case Ee:if(0===f)break e;if(h=c-f,i.offset>h){if((h=i.offset-h)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=Ce;break}h>i.wnext?(h-=i.wnext,b=i.wsize-h):b=i.wnext-h,h>i.length&&(h=i.length),m=i.window}else m=a,b=s-i.offset,h=i.length;for(f<h&&(h=f),f-=h,i.length-=h;a[s++]=m[b++],--h;);0===i.length&&(i.mode=xe);break;case Ze:if(0===f)break e;a[s++]=i.length,f--,i.mode=xe;break;case Ae:if(i.wrap){for(;d<32;){if(0===o)break e;o--,l|=n[r++]<<d,d+=8}if(c-=f,e.total_out+=c,i.total+=c,c&&(e.adler=i.check=i.flags?L(i.check,a,c,s-c):U(i.check,a,c,s-c)),c=f,(i.flags?l:T(l))!==i.check){e.msg="incorrect data check",i.mode=Ce;break}d=l=0}i.mode=ze;case ze:if(i.wrap&&i.flags){for(;d<32;){if(0===o)break e;o--,l+=n[r++]<<d,d+=8}if(l!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=Ce;break}d=l=0}i.mode=Re;case Re:y=W;break e;case Ce:y=V;break e;case Ne:return $;case Ie:default:return Q}return e.next_out=s,e.avail_out=f,e.next_in=r,e.avail_in=o,i.hold=l,i.bits=d,(i.wsize||c!==e.avail_out&&i.mode<Ce&&(i.mode<Ae||t!==q))&&(Z=(E=e).output,A=e.next_out,z=c-e.avail_out,null===(C=E.state).window&&(C.wsize=1<<C.wbits,C.wnext=0,C.whave=0,C.window=new D.Buf8(C.wsize)),z>=C.wsize?(D.arraySet(C.window,Z,A-C.wsize,C.wsize,0),C.wnext=0,C.whave=C.wsize):(z<(R=C.wsize-C.wnext)&&(R=z),D.arraySet(C.window,Z,A-z,R,C.wnext),(z-=R)?(D.arraySet(C.window,Z,A-z,z,0),C.wnext=z,C.whave=C.wsize):(C.wnext+=R,C.wnext===C.wsize&&(C.wnext=0),C.whave<C.wsize&&(C.whave+=R))),0)?(i.mode=Ne,$):(u-=e.avail_in,c-=e.avail_out,e.total_in+=u,e.total_out+=c,i.total+=c,i.wrap&&c&&(e.adler=i.check=i.flags?L(i.check,a,c,e.next_out-c):U(i.check,a,c,e.next_out-c)),e.data_type=i.bits+(i.last?64:0)+(i.mode===he?128:0)+(i.mode===pe||i.mode===we?256:0),(0===u&&0===c||t===q)&&y===X&&(y=ee),y)},i.inflateEnd=function(e){if(!e||!e.state)return Q;var t=e.state;return t.window&&(t.window=null),e.state=null,X},i.inflateGetHeader=function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?Q:((i.head=t).done=!1,X):Q},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":2,"./adler32":4,"./crc32":6,"./inffast":8,"./inftrees":10}],10:[function(e,t){"use strict";var O=e("../utils/common"),T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],F=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],D=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],U=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,n,a,r,s,o){var f,l,d,u,c,h,b,m,w,k=o.bits,g=0,_=0,v=0,p=0,x=0,y=0,S=0,B=0,E=0,Z=0,A=null,z=0,R=new O.Buf16(16),C=new O.Buf16(16),N=null,I=0;for(g=0;g<=15;g++)R[g]=0;for(_=0;_<n;_++)R[t[i+_]]++;for(x=k,p=15;1<=p&&0===R[p];p--);if(p<x&&(x=p),0===p)return a[r++]=20971520,a[r++]=20971520,o.bits=1,0;for(v=1;v<p&&0===R[v];v++);for(x<v&&(x=v),g=B=1;g<=15;g++)if(B<<=1,(B-=R[g])<0)return-1;if(0<B&&(0===e||1!==p))return-1;for(C[1]=0,g=1;g<15;g++)C[g+1]=C[g]+R[g];for(_=0;_<n;_++)0!==t[i+_]&&(s[C[t[i+_]]++]=_);if(0===e?(A=N=s,h=19):1===e?(A=T,z-=257,N=F,I-=257,h=256):(A=D,N=U,h=-1),g=v,c=r,d=-1,u=(E=1<<(y=x))-1,1===e&&852<E||2===e&&592<E)return 1;for(S=_=Z=0;;){for(0,b=g-S,s[_]<h?(m=0,w=s[_]):s[_]>h?(m=N[I+s[_]],w=A[z+s[_]]):(m=96,w=0),f=1<<g-S,v=l=1<<y;a[c+(Z>>S)+(l-=f)]=b<<24|m<<16|w|0,0!==l;);for(f=1<<g-1;Z&f;)f>>=1;if(0!==f?(Z&=f-1,Z+=f):Z=0,_++,0==--R[g]){if(g===p)break;g=t[i+s[_]]}if(x<g&&(Z&u)!==d){for(0===S&&(S=x),c+=v,B=1<<(y=g-S);y+S<p&&!((B-=R[y+S])<=0);)y++,B<<=1;if(E+=1<<y,1===e&&852<E||2===e&&592<E)return 1;a[d=Z&u]=x<<24|y<<16|c-r|0}}return 0!==Z&&(a[c+Z]=g-S<<24|64<<16|0),o.bits=x,0}},{"../utils/common":2}],11:[function(e,t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],12:[function(e,t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[1])(1)});
var BmAuth=BmAuth||{};!function(n){"use strict";var i={version:"2.2.0_build10",module:{},constants:{accepted:{environments:["prod","test"],platforms:["web","ios","android","xbox360","xboxone","samsung","windows8","roku","appletv","amazonfire","androidtv"],messageOrigin:{authn:["//auth.9c9media.ca","//liveqa.auth.9c9media.ca","//livedev.auth.9c9media.ca","//localhost:3000","//www.rds.ca","//www.tsn.ca","//dev.rds.9c9media.ca","//dev.tsn.9c9media.ca","//www.ctv.ca","//www.ctvcomedy.ca","//www.ctvscifi.ca","//www.ctvnews.ca","//www.ctvdrama.ca","//www.discovery.ca","//www.bnnbloomberg.ca","//www.cp24.com","//www.watcheonline.ca","//activate.cravetv.ca","//activate.tsn.ca","//activate.rds.ca","//activate.discovery.ca","//toronto.ctvnews.ca","//atlantic.ctvnews.ca","//bc.ctvnews.ca","//vancouverisland.ctvnews.ca","//calgary.ctvnews.ca","//edmonton.ctvnews.ca","//montreal.ctvnews.ca","//winnipeg.ctvnews.ca","//northernontario.ctvnews.ca","//ottawa.ctvnews.ca","//regina.ctvnews.ca","//saskatoon.ctvnews.ca","//kitchener.ctvnews.ca","//barrie.ctvnews.ca","//london.ctvnews.ca","//windsor.ctvnews.ca","//www.bellmedia.ca"],tpCookie:["//dev.auth.cms.9c9media.net","//liveqa.auth.9c9media.ca","//auth.9c9media.ca","//livedev.auth.9c9media.ca","//dev.tsn.9c9media.ca"]}},akamaiConfig:{responceMethod:"redirect",responseTarget:"prod2",lang:"en"},ui:{container:".axis-auth-container",overlayBG:".axis-modal-bg",overlay:".remodal-overlay",id:"#axis-auth",element:null},cache:{authn:1547e7,identity:2506e6,authz:1296e4,authzD2c:10,authzConsCheck:162e5},timer:{authZWarningTreshold:4e3,authZTimeoutTreshold:6e3,identityWarningTreshold:4e3,identityTimeoutTreshold:6e3,bounceWarningTreshold:1e3,bounceTimeoutTreshold:3e3,configWarningTreshold:4e3,configTimeouTreshold:6e3,closeModalOnSuccess:2e3,closeModalOnSuccessMulti:8e3,thirdPartyCookieTimeout:1e4,initWarningTreshold:4e3,initTimeoutTreshold:6e3,registerWarningTreshold:4e3,registerTimeoutTreshold:6e3,styelsheetTimeoutTreshold:2e3},authSetting:{environment:"local",inDebug:!0},url:{config:"//auth.9c9media.ca/api/config/",error:"//authlog.9c9media.ca/api//error/",assets:"//auth.9c9media.ca/assets",assetsRoot:"//10.14.71.15",tpCookieChecker:"//auth.9c9media.ca/auth/pages/tpcchecker.aspx",faq:"//esi2.ctv.ca/auth9/pages/faq/",authRoot:"//10.14.71.15:3050/",aisBase:"//idp.securetve.com/rest/1.0/"}},config:{brand:null,platform:null,environment:null,lang:"en",brandUrn:null,messages:{},isMultiAuthzFlow:!1,tpCookieUrl:""},vars:{signinStatus:null,protocol:"http:",domain:null,differed:{isAuthenticated:null,handleSignIn:null},bellmediaLogo:null},ready:null},a=BmAuth.Controller={},o={};BmAuth.init=function(e,t,n,o){try{!function(e,t,n,o){if(!e)throw new BmAuth.Error("BmAuth.init failed. The argument brand must have a value.","EBAB01");if("string"!=typeof e)throw new BmAuth.Error("BmAuth.init failed. The argument brand must be a string (brand: "+e+")","EBAB02");if(e=e.toLowerCase(),"string"!=typeof n?(i.errorhandler.onWarning(new BmAuth.Warning("The value "+n+" for environment in BmAuth init config is not string and therefore invalid. Therefore it is been set to prod to prevent blocking","WBAB02")),n=i.constants.accepted.environment[0]):n=n.toLowerCase(),-1===i.constants.accepted.environments.indexOf(n)&&(i.errorhandler.onWarning(new BmAuth.Warning("The value "+n+" for environment in BmAuth init config is invalid. Therefore it is been set to prod to prevent blocking","WBAB03")),n=i.constants.accepted.environments[0]),"string"!=typeof t?(i.errorhandler.onWarning(new BmAuth.Warning("The value "+t+" for platform in BmAuth init config is not string and therefore invalid. therefore it is been set to web to prevent blocking.","WBAB04")),t=i.constants.accepted.platforms[0]):t=t.toLowerCase(),-1===i.constants.accepted.platforms.indexOf(t)&&(i.errorhandler.onWarning(new BmAuth.Warning("The value "+t+" for platform in BmAuth init config is invalid. therefore it is been set to web to prevent blocking.","WBAB04")),t=i.constants.accepted.platforms[0]),i.config.brand=e,i.config.platform=t,i.config.environment=n,i.config.options=o||{},i.config.options.fromWebview=void 0!==i.config.options.fromWebview&&i.config.options.fromWebview,i.config.options.disableLogs=void 0!==i.config.options.disableLogs&&i.config.options.disableLogs,i.config.options.fulfillOnClose=void 0!==i.config.options.fulfillOnClose&&i.config.options.fulfillOnClose,i.config.options.closeModalOnOutsideClick=void 0===i.config.options.closeModalOnOutsideClick||i.config.options.closeModalOnOutsideClick,"rds"===e?(i.constants.url.feedback=i.vars.protocol+"//contests.bellmedia.ca/feedbackWebAPI/webview/?brand=19&webApikey=887CAE02-D38E-4606-B7C8-658277736FB6&lang=fr&modal=true","qa"===i.constants.authSetting.environment&&(i.constants.authSetting.environment="staging")):"tsn"===e?(i.constants.url.feedback=i.vars.protocol+"//contests.bellmedia.ca/feedbackWebAPI/webview/?brand=18&webApikey=1e65ef36-60c4-4b8e-882e-103ff5fa93eb&lang=en&modal=true","qa"===i.constants.authSetting.environment&&(i.constants.authSetting.environment="staging")):i.constants.url.feedback=i.vars.protocol+"//contests.bellmedia.ca/feedbackWebAPI/webview?brand=15&webApikey=7BB14B29-D6D7-478B-BFA0-71BB55F66A4A&lang=en&modal=true","ios"===t){if(null===i.config.options.schema)throw new BmAuth.Error("Schema was not set in the webview querystring when the platform was ios","EBAB06");!1===new RegExp("bmauth.").test(i.config.options.schema)&&i.errorhandler.onWarning(new BmAuth.Warning("The format of schema used in the webview querystring is not acceptable (schema: "+i.config.options.schema+")","WBAB07"))}"ios"!==t&&"android"!==t||(i.constants.timer.authZWarningTreshold=6e3,i.constants.timer.authZTimeoutTreshold=12e3,i.constants.timer.identityWarningTreshold=6e3,i.constants.timer.identityTimeoutTreshold=12e3,i.constants.timer.bounceWarningTreshold=1e3,i.constants.timer.bounceTimeoutTreshold=3e3,i.constants.timer.configWarningTreshold=6e3,i.constants.timer.configTimeouTreshold=12e3,i.constants.timer.closeModalOnSuccess=2e3,i.constants.timer.closeModalOnSuccessMulti=8e3,i.constants.timer.thirdPartyCookieTimeout=15e3,i.constants.timer.initWarningTreshold=6e3,i.constants.timer.initTimeoutTreshold=12e3,i.constants.timer.registerWarningTreshold=6e3,i.constants.timer.registerTimeoutTreshold=12e3,i.constants.timer.styelsheetTimeoutTreshold=8e3),i.constants.domain=window.location.protocol+"//"+window.location.hostname}(e,t,n,o),i.log("main","initiating BmAuth ",{brand:i.config.brand,platform:i.config.platform,environment:i.config.environment,options:i.config.options}),"object"==typeof a&&"function"==typeof a.init&&a.init.call()}catch(e){return Promise.reject(i.errorhandler.onError(e))}return i.ready},BmAuth.handleSignIn=function(e){return a.handleSignIn(e)},BmAuth.handleSignOut=function(){return a.handleSignOut()},BmAuth.handleLocalSignOut=function(){a.handleLocalSignOut()},BmAuth.isAuthenticated=function(){return a.isAuthenticated()},BmAuth.getTrackingSuites=function(e){return a.getTrackingSuites(e)},BmAuth.canPlayVideo=function(e){return a.canPlayVideo(e)},BmAuth.videoHasLock=function(e){return a.videoHasLuck(e)},BmAuth.videosAddLockStatus=function(e){return a.videosAddLockStatus(e)},BmAuth.getSignInBduName=function(){return a.getSignInBduName()},BmAuth.getIdentity=function(){return a.getIdentity()},BmAuth.addListener=function(e,t){i.event.addListener(e,t)},BmAuth.removeListener=function(e,t){i.event.removeListener(e,t)},BmAuth.displayMessage=function(e){a.displayMessage(e)},BmAuth.registerDevice=function(e,t){return a.registerDevice(e,t)},BmAuth.closeModal=function(e){a.closeModal(e)},BmAuth.isD2cUser=function(){return a.isD2cUser()},BmAuth.quickSignIn=function(e){return a.quickSignIn(e)},BmAuth.define=function(e){var t,n;if("object"!=typeof e)throw new BmAuth.Error("The define method expects a configuration object as the sole argument","EBAA01");if(!e.type&&!e.name&&!e.value)throw new BmAuth.Error("The define method's configuration object requires at least three properties: type, name and value","EBAA02");n=e.name.toLowerCase(),"controller"===(t=e.type.toLowerCase())?a=e.value.call({},i,o):"api-method"===t?i[n]=e.value.call({},i):(i[t]||(i[t]={}),i[t][n]=e.value.call({},i))},BmAuth.newDefine=function(e){var t=e.name,n=e.type.toLowerCase();BmAuth.test||(BmAuth.test={}),"controller"===n?a=e.value.call({},i):"api-method"===n?(i[t]=e.value,BmAuth.test.api||(BmAuth.test.api={}),BmAuth.test.api[t]=e.value):(o[t]=e.value,BmAuth.test.module||(BmAuth.test.module={}),BmAuth.test.module[t]=e.value)},i.createModule=function(e,t){var n;if(e=e.toLowerCase(),!i.module[e])throw new BmAuth.Error("Module Creation Error: "+e+" module not found","EBAA04");return i.module[e].init?(n=Object.create(i.module[e])).init.call(n,t):n=i.module[e],n},i.log=function(e,t,n,o){if(o=o||"log",i.inDebug())switch(o){case"log":void 0===n?console.log("[BmAuth] "+e+" => "+t):console.log("[BmAuth] "+e+" => "+t,n);break;case"warning":null===t?console.warn("[BmAuth] ",n):console.warn("[BmAuth] "+e+" => "+t,n);break;case"error":null===t?console.error("[BmAuth] ",n):console.error("[BmAuth] "+e+" => "+t,n);break;case"info":void 0===n?console.info("[BmAuth] "+e+" => "+t):console.info("[BmAuth] "+e+" => "+t,n);break;default:void 0===n?console.log("[BmAuth] "+e+" => "+t):console.log("[BmAuth] "+e+" => "+t,n)}},i.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},i.inDebug=function(){try{if(!1===i.constants.authSetting.inDebug)return!1;var e=i.getParameterByName("BaDisableLogs");return""!==e?"false"===e:!i.config.options||!i.config.options.disableLogs}catch(e){return!1}},i.isD2cUser=function(e){return a.isD2cUser(e)},i.isAuthenticatedLocal=function(){return a.isAuthenticatedLocal()},i.forceSignOutLocal=function(){a.forceSignOutLocal()},i.resetJsCache=function(){a.resetJsCache()},i.getAisuid=function(){return i.storage.get("aisuid")},i.getSigninTime=function(){return i.storage.get("signinTime")},i.setLastAisCallTime=function(){i.storage.set("lastAisCallTime",Date.now())},i.trackLogoutResult=function(){var e,t,n=i.getSigninTime(),o=i.storage.get("lastAisCallTime");e=null!==n?Math.round((Date.now()-n)/6e4):"Nan",t=null!==o?Math.round((Date.now()-o)/6e4):"Nan";var a="Logout_result received at "+Date.now()+" last ais call at "+o+" ("+t+" min) login at "+n+" ("+e+" min)";i.errorhandler.onWarning(new BmAuth.Warning(a,"WBAE09"))},i.domReady=new Promise(function(e,t){n(document).ready(e)}),i.ready=new Promise(function(e,t){i.domReady.then(function(){i.event.addInternalListener("onReady",e),i.event.addInternalListener("onReadyFailed",t)})}),BmAuth.api=i,"https:"===window.location.protocol?i.vars.protocol="https:":"ios-cravetv"!==window.osPlatform&&"android-cravetv"!==window.osPlatform||(i.vars.protocol="https:"),i.constants.url.feedback=i.vars.protocol+"//contests.bellmedia.ca/feedbackWebAPI/webview?brand=15&webApikey=7BB14B29-D6D7-478B-BFA0-71BB55F66A4A&lang=en&modal=true",i.constants.url.aisBase=i.vars.protocol+"//idp.securetve.com/rest/1.0/",i.constants.authSetting.inDebug=!1,i.constants.url.config=i.vars.protocol+"//auth.9c9media.ca/api/config/",i.constants.url.error=i.vars.protocol+"//authlog.9c9media.ca/api/error/",i.constants.url.assets=i.vars.protocol+"//auth.9c9media.ca/assets",i.constants.url.assetsRoot=i.vars.protocol+"//auth.9c9media.ca",i.constants.akamaiConfig.responseTarget="prod2",i.constants.authSetting.environment="prod",i.constants.url.tpCookieChecker=i.vars.protocol+"//auth.9c9media.ca/auth/pages/tpcchecker.aspx",i.constants.url.tpCookieSet=i.vars.protocol+"//auth.9c9media.ca/auth/pages/set_cookie.aspx",i.constants.url.tpCookieVerify=i.vars.protocol+"//auth.9c9media.ca/auth/pages/validate_cookie.aspx",i.constants.url.authRoot=i.vars.protocol+"//auth.9c9media.ca/auth/","https:"===window.location.protocol?i.constants.akamaiConfig.responseTarget="prod2https":"ios-cravetv"!==window.osPlatform&&"android-cravetv"!==window.osPlatform||(i.constants.akamaiConfig.responseTarget="prod2https"),i.log("main:","",{version:i.version,env:i.constants.authSetting.environment})}(jQuery);
!function(i,r){"use strict";i.Warning=function(r,n,o){this.message=r||"A non blocker exception got cought",this.code=n||"warning-00",this.stack=(new Error).stack,this.options=o||void 0},i.Warning.prototype=Object.create(Error.prototype),i.Warning.prototype.constructor=i.Warning,i.Error=function(r,n,o){this.message=r||"A blocker exception got cought",this.code=n||"error-00",this.stack=(new Error).stack,this.options=o||void 0},i.Error.prototype=Object.create(Error.prototype),i.Error.prototype.constructor=i.Error,i.Error.fromError=function(r){return new this(r.message,"error-00",r.stack)},i.define({name:"ErrorHandler",type:"api-method",value:function(o){var t=[],e=function(r){n(r)},n=function(r){r instanceof i.Warning?o.log(null,null,{message:r.message,code:r.code},"warning"):o.log(null,null,r,"error")};return{init:function(){},onError:function(r,n){return"string"==typeof r&&(r=new i.Error(r,"error-00")),r instanceof i.Error||r.code||(r.code="error-00"),e(r),o.constants.ui.element?!1!==n&&o.view.displayError(r):!0===n&&o.modal.display().then(function(){o.view.displayError(r)}),{error:r,warnings:t}},onWarning:function(r){var n;r instanceof i.Warning?(e(r),void 0!==(n=r)&&n instanceof i.Warning&&t.push(n)):this.onWarning(new i.Warning("The argument of onWarning was not of type BmAuth.Warning or BmAuth.Error","WBAA01"))},onException:function(r){r instanceof i.Warning?o.errorhandler.onWarning(r):o.errorhandler.onError(r)},getWarnings:function(){return t}}}})}(BmAuth,jQuery);
!function(v,e){"use strict";v.define({name:"event",type:"api-method",value:function(g){var o,r=["onSignInAttempt","onBduSelected","onAuthenticationStateChange","onInfoClicked","onAlreadyAuthenticated"],i={},a={},l={},c={},f=function(l,e,s,g){l.addEventListener(e,function(e){for(var n=l.querySelectorAll(s),t=e.target,r=0,o=n.length;r<o;r++)for(var i=t,a=n[r];i&&i!==l;){if(i===a)return g.call(a,e);i=i.parentNode}},!1)},t=function(e,n){g.log("event","removing event:"+e+" from DOM"),g.constants.ui.element.removeEventListener(e,n,!1)},s=function(e,n){var t;"logout_result"!==e&&"onModalClose"!==e&&(g.log("event","no user listening to the event, stacked "+e),d(e,n)),t=e,-1!==r.indexOf(t)&&g.errorhandler.onWarning(new v.Warning("No user was listening to the event "+e+" when it was being thrown, it is being stacked waiting for the listener to register to release the stack","WBAB01"))},d=function(e,n){l[e]||(l[e]=[]),l[e].push(n)},n=function(e){var n=g.config.options.schema||"bmauth";g.log("event","broadcasting message for ios "+n+"://url?msg=",e),window.location=n+"://url?msg="+encodeURIComponent(JSON.stringify(e))};return{init:function(){o=this,c=[]},addListenerToDom:function(e,n,t){var r,o,i,a,l,s;r=e,o=n,i=t,c.push({eventName:r,target:o,callback:i}),a=e,l=n,s=t,g.log("event","add dom listener: "+a+" on "+l),f(g.constants.ui.element,a,l,s)},removeListenerFromDom:function(e,n){t(e,n)},removeAllListenersFromDom:function(){g.log("event","removing all listeners"),c.forEach(function(e){t(e.eventName,e.callback)}),c=[]},broadcastForApp:function(e){switch(g.config.platform){case"ios":n(e);break;case"android":!function(e){if(g.log("event","broadcastin message for android.",e),"undefined"==typeof androidInterface)throw new v.Error("Sending message to Android failed. No class instance with the name 'webAppInterfaceAndroid' was injected in the webview","EBAB05");androidInterface.sendMessage(JSON.stringify(e))}(e);break;default:g.errorhandler.onWarning(new v.Warning("Broadcasting for app failed as the configured platform "+g.config.platform+" is not valid","warning-10")),n(e)}},addListener:function(e,n){return i[e]||(i[e]=[]),i[e].push(n),g.log("event","add listener: "+e+"["+i[e].length+"]"),function(e){if(l[e]&&0<l[e].length){g.log("event","re-firing: "+e);for(var n=0,t=l[e].length;n<t;n++){var r=l[e].shift();o.trigger(e,r)}}}(e),[e,n]},removeListener:function(e,n){var t;if(i[e]){t=i[e].length;for(var r=0;r<t;r++)i[e][r]===n&&(i[e].splice(r,1),g.log("event","removed event: "+e+"["+i[e].length+"]"))}},trigger:function(){var e,n=Array.prototype.slice.call(arguments),t=n.shift();if(i[t]&&0<i[t].length){e=i[t],g.log("event","triggered "+t,{"callbacks.length":e.length,args:n});for(var r=e.length;r--;)e[r].apply(window,n)}else s(t,n)},addInternalListener:function(e,n){return a[e]||(a[e]=[]),a[e].push(n),g.log("event","add internal listener: "+e+"["+a[e].length+"]"),[e,n]},removeInternalListener:function(e,n){var t;if(a[e]){t=a[e].length;for(var r=0;r<t;r++)a[e][r]===n&&(a[e].splice(r,1),g.log("event","removed internal event: "+e+"["+a[e].length+"]"))}},triggerInternal:function(){var e,n=Array.prototype.slice.call(arguments),t=n.shift();if(a[t]&&0<a[t].length){e=a[t],g.log("event","internally triggered "+t,{"callbacks.length":e.length,args:n});for(var r=e.length;r--;)e[r].apply(window,n)}else s(t,n)}}}})}(BmAuth,jQuery);
!function(l,d){"use strict";l.define({name:"Modal",type:"api-method",value:function(s){var o,i=!1,a={_startTime:null,_endTime:null,duration:null,start:function(){this._startTime=Date.now()},stop:function(){this._endTime=Date.now(),this.duration=this._endTime-this._startTime}},n=function(){o&&o.close()},r=function(e){return function(i){s.log("view","inserting "+i+" CSS into the head");var e=document.createElement("link"),a=document.createElement("div");e.type="text/css",e.rel="stylesheet",e.href=s.constants.url.authRoot+"styles/"+i+".css",e.id="bmauth-css-"+i,e.className="bmauth-css",a.id="beacon-"+i,document.head.appendChild(e),document.body.appendChild(a);var n=s.vwfix.mayFix(i),t=new Promise(function(n,e){var t,o;t=window.setTimeout(function(){window.clearInterval(o),document.body.removeChild(a);var e=new l.Error("Stylesheet "+i+" did not get loaded into page by 8 seconds","EBAX11");s.errorhandler.onError(e),n()},s.constants.timer.styelsheetTimeoutTreshold),o=window.setInterval(function(){42===a.clientWidth&&(window.clearInterval(o),window.clearTimeout(t),document.body.removeChild(a),n())},30)});return Promise.all([t,n])}(e)},c=function(){d(document).off("close","#axis-auth.remodal"),d(document).on("close","#axis-auth.remodal",function(e){try{s.event.trigger("onModalClose"),s.log("view","modal is clossing"),i=!1,d("head .bmauth-css").remove(),s.log("view","removed BmAuth CSSs from the head"),s.event.removeAllListenersFromDom(),s.view.remove(s.constants.ui.overlayBG),s.view.remove(s.constants.ui.overlay),s.log("view","modal removed from page"),o=null,!1,s.constants.ui.element=null}catch(e){s.errorhandler.onError(e)}}),s.event.addListenerToDom("click",".axis-auth-close",function(e){e.stopImmediatePropagation(),n()}),s.event.addListenerToDom("click",".axis-auth-info",function(e){s.tracking.onInfoClicked(),"cravetv"===s.config.brand?s.view.displayFAQ(s.constants.url.faq+"crave-faq.html?lang="+s.config.lang):"rds"===s.config.brand?s.view.displayFAQ(s.constants.url.faq+"rds-faq.html?lang="+s.config.lang):"tsn"===s.config.brand?s.view.displayFAQ(s.constants.url.faq+"tsn-faq.html?lang="+s.config.lang):s.view.displayFAQ(s.constants.url.faq+"main.html?lang="+s.config.lang)}),s.event.addListenerToDom("click",".axis-auth-ok-bottom",function(e){s.modal.close(10)}),"cravetv"===s.config.brand||"rds"===s.config.brand||"tsn"===s.config.brand?(s.event.addListenerToDom("click",".axis-auth-feedback",function(e){s.view.displayFeedBack()}),s.event.addListenerToDom("click",".bmauth-goto-account",function(e){s.event.trigger("onUpdateAccountClick")})):s.event.addListenerToDom("click",".axis-auth-back",function(e){e.stopImmediatePropagation(),s.view.navigateBack()})};return{display:function(){var e,n=s.config.brand.toLowerCase();if(e="cravetv"===n?"cravetv":"rds"===n?"rds":"tsn"===n?"tsn":"main",i)return Promise.resolve();a.start();var t=r(e);return t.then(function(){s.view.insertModal(),s.log("view","modal inserted into page"),o=d("[data-remodal-id=axisauth]").remodal({hashTracking:!1,closeOnOutsideClick:s.config.options.closeModalOnOutsideClick}),s.constants.ui.element=document.querySelector(s.constants.ui.id),!0,c(),s.log("view","modal is opened"),o.open(),s.event.trigger("onModalOpen"),i=!0,a.stop(),s.log("view","all CSSs was loaded in "+a.duration+"ms")}),t},close:function(e){e?setTimeout(function(){n()},e):n()}}}})}(BmAuth,jQuery);
!function(o,e){"use strict";Storage.intToString=function(e){return String(e)},Storage.stringToInt=function(e){return parseInt(e,10)||0},Storage.isSameSiteNoneCompatible=function(e){return!Storage.isSameSiteNoneIncompatible(String(e))},Storage.isSameSiteNoneIncompatible=function(e){return Storage.hasWebKitSameSiteBug(e)||Storage.dropsUnrecognizedSameSiteCookies(e)},Storage.hasWebKitSameSiteBug=function(e){return Storage.isIosVersion(12,e)||Storage.isMacosxVersion(10,14,e)&&(Storage.isSafari(e)||Storage.isMacEmbeddedBrowser(e))},Storage.dropsUnrecognizedSameSiteCookies=function(e){return Storage.isChromiumBased(e)&&Storage.isChromiumVersionAtLeast(51,e)&&!Storage.isChromiumVersionAtLeast(67,e)||Storage.isUcBrowser(e)&&!Storage.isUcBrowserVersionAtLeast(12,13,2,e)},Storage.regexContains=function(e,t){return null!==e.match(t)},Storage.extractRegexMatch=function(e,t,o){var r=e.match(t);return null!==r&&void 0!==r[o]?r[o]:null},Storage.isIosVersion=function(e,t){return Storage.extractRegexMatch(t,/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//,1)===Storage.intToString(e)},Storage.isMacosxVersion=function(e,t,o){var r=/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//;return Storage.extractRegexMatch(o,r,1)===Storage.intToString(e)&&Storage.extractRegexMatch(o,r,2)===Storage.intToString(t)},Storage.isSafari=function(e){return null!==e.match(/Version\/.* Safari\//)&&!Storage.isChromiumBased(e)},Storage.isMacEmbeddedBrowser=function(e){return Storage.regexContains(e,/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\) AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/)},Storage.isChromiumBased=function(e){return Storage.regexContains(e,/Chrom(e|ium)/)},Storage.isChromiumVersionAtLeast=function(e,t){return e<=Storage.stringToInt(extractRegexMatch(t,/Chrom[^ \/]+\/(\d+)[\.\d]* /,1))},Storage.isUcBrowser=function(e){return Storage.regexContains(e,/UCBrowser\//)},Storage.isUcBrowserVersionAtLeast=function(e,t,o,r){var a=/UCBrowser\/(\d+)\.(\d+)\.(\d+)[\.\d]* /,n=Storage.stringToInt(extractRegexMatch(r,a,1)),i=Storage.stringToInt(extractRegexMatch(r,a,2)),s=Storage.stringToInt(extractRegexMatch(r,a,3));return n!==e?e<n:i!=t?t<i:o<=s},o.define({type:"api-method",name:"Storage",value:function(i){var s,t=2628e6,g=function(e,t){return(t=void 0!==t?t:"BMAuth")+"_"+e};return{init:function(){s=function(){try{return JSON.stringify({a:"b"}),"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),i.log("storage","browser local storage support is: "+s)},get:function(e,t){e=g(e,t);var o,r,a=new Date;try{return s?null!==(o=localStorage.getItem(e))?(o=JSON.parse(o)).expires?o.expires>Number(a.getTime())?(i.log("storage","localstorage.get "+e,o),o.data):(i.log("storage","localstorage.get "+e+" returned null since it was expired"),this.remove(e),null):(i.log("storage","localstorage.get "+e,o),o.data):(i.log("storage","localstorage.get could not find "+e),null):null!==(o=(r=e)&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(r).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null)?(o=JSON.parse(o),i.log("storage","cookie.get "+e,o),o):(i.log("storage","cookie.get could not find "+e),null)}catch(e){}},set:function(e,t,o,r){try{e=g(e,r);var a=new Date;if(s){var n={data:t,timestamp:a.getTime()};o&&(n.expires=Number(a.getTime())+Number(o)),i.log("storage","localstorage.set key:"+e+" value:",n),localStorage.removeItem(e),localStorage.setItem(e,JSON.stringify(n))}else i.log("storage","cookie.set key:"+e+" value:",t),o?a.setTime(a.getTime()+Number(o)):a.setFullYear(2030,1,14),function(e,t,o,r,a,n){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return;var i="";if(o)switch(o.constructor){case Number:i=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:i="; expires="+o;break;case Date:i="; expires="+o.toUTCString()}var s=Storage.isSameSiteNoneCompatible(navigator.userAgent),g=s?";SameSite=None":"",c=n||s?"; secure":"";document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+i+(a?"; domain="+a:"")+(r?"; path="+r:"")+c+g}(e,JSON.stringify(t),a)}catch(e){i.errorhandler.onError(e)}},setSession:function(e,t){try{i.log("storage","set in sessionStorage (name: "+e+", value: "+t),sessionStorage.setItem(g(e),JSON.stringify(t))}catch(e){throw new o.Error("User was in a browser private mode that doesn't support session\\local storage","EBAF02")}},getSession:function(e){var t=sessionStorage.getItem(g(e));return i.log("storage","get from sessionStorage name: "+e),JSON.parse(t)},removeSession:function(e){sessionStorage.removeItem(g(e)),i.log("storage","removed from sessionStorage name: "+e)},setCacheDuration:function(e){i.log("storage","cache duration changed from "+t+" to "+e),t=e},hasItem:function(e){return e=g(e),s?localStorage.hasItem(e):!!(t=e)&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie);var t},reset:function(){s?function(){for(var e=[],t=0;t<localStorage.length;t++)"BMAuth_"===localStorage.key(t).substring(0,7)&&e.push(localStorage.key(t));for(t=0;t<e.length;t++)localStorage.removeItem(e[t])}():function(){for(var e=document.cookie.split(/=[^;]*(?:;\s*|$)/),t=0;t<e.length;t++)/^BMAuth_/.test(e[t])&&(document.cookie=e[t]+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}(name),window.ais_client._reset_cache(!0)},remove:function(e){e=g(e),s?localStorage.removeItem(e):function(e,t,o){!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(t?"; path="+t:""))}(e)}}}})}(BmAuth,jQuery);
!function(t){"use strict";var e=function(){};e.prototype.start=function(){this._startTime=Date.now()},e.prototype.stop=function(){this._endTime=Date.now(),this.duration=this._endTime-this._startTime},e.prototype.reset=function(){this._startTime=null,this._endTime=null,this.duration=null},t.newDefine({name:"Timer",type:"api-method",value:e})}(BmAuth);
!function(i,n){"use strict";i.define({name:"tracking",type:"api-method",value:function(t){return{onSignInAttempt:function(){t.event.trigger("onSignInAttempt")},onBduSelected:function(n){t.event.trigger("onBduSelected",n)},onAuthnChanged:function(n){t.event.trigger("onAuthenticationStateChange",n)},onAlreadyAuthenticated:function(){t.event.trigger("onAlreadyAuthenticated")},onInfoClicked:function(){t.event.trigger("onInfoClicked")},inCorrectCode:function(n){var e="Invalid activation shortcode at "+Date.now();t.errorhandler.onWarning(new i.Warning(e,"WBAE10"))}}}})}(BmAuth,jQuery);
!function(e,i){"use strict";e.define({name:"ui",type:"api-method",value:function(e){return{displayRedirectLogin:function(){return this.userAgentIsApple()||this.isDisplayedInAWebview()},shouldCheckThirdPartyCookiesAllowed:function(e){return e||this.isAndroidWebView()||this.userAgentIsFirefox()||this.userAgentIsApple()},isDisplayedInAWebview:function(){return this.isIOSWebView()},isIOSWebView:function(){var e=window.navigator.standalone,i=window.navigator.userAgent.toLowerCase(),n=/safari/.test(i);return!(!/iphone|ipod|ipad/.test(i)||e||n)},isAndroidWebView:function(){var e=window.navigator.userAgent.toLowerCase();return/.*(Linux; Android.*wv.*AppleWebKit.*Version\/\d+\.\d+).*/gi.test(e)},userAgentIsApple:function(){return(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints||/safari/.test(window.navigator.userAgent.toLowerCase())&&!/chrome/.test(window.navigator.userAgent.toLowerCase()))&&!window.MSStream},userAgentIsFirefox:function(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")},userAgentIsChromium:function(){var e=window.chrome,i=window.navigator,n=i.vendor,t=void 0!==window.opr,r=-1<i.userAgent.indexOf("Edge");return i.userAgent.match("CriOS")||null!=e&&"Google Inc."===n||t||r}}}})}(BmAuth,jQuery);
!function(e){"use strict";jQuery.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()}}(),function(h,b,T){"use strict";h.define({name:"view",type:"api-method",value:function(i){var a,n={},o=["bdu-chooser","faq","d2c-bdu-chooser","d2c-d2c-login","d2c-d2c-login-ios","d2c-faq","d2c-quick-login"],s=["bdu-chooser","d2c-bdu-chooser","d2c-d2c-login","d2c-d2c-login-ios","d2c-quick-login"],r={errorTextOnly:{name:"error-text-only",content:{paragraphs:["There has been a technical problem!","Please try again and if the problem persists, please contact your television service provider."],showBackButton:!0,closeLinkText:"Close"}},errorTpCookie:{name:"error-tpcookie",content:{showBackButton:!0,closeLinkText:"Close",chrome:{paragraph1:"",list1:"",list2:"",list3:""},firefox:{paragraph1:"",list1:"",list2:""},apple:{paragraph1:"",list1:"",list2:"",list3:"",list4:"",list5:""},other:{paragraph1:"",list1:"",list2:""},conclusion1:"",conclusion2:""}},successMessage:{name:"success-message",content:{logoSource:null,text:"You have successfully signed into"}},bduChooser:{name:"bdu-chooser",nameLong:"bdu-chooser-long",data:{}},bduLogin:{name:"bdu-login",data:{}},faq:{name:"faq",data:{url:null}}},t=function(e){var o;switch(e){case"EBAX00":case"error-01":(o=r.errorTextOnly.content).paragraphs[0]=i.config.messages.error[e],o.paragraphs[1]=i.config.messages.error.error_p2,o.closeLinkText=i.config.messages.main.closeLinkText,o.header=i.config.messages.main.header,i.view.displayTemplate(r.errorTextOnly.name,o);break;case"EBAD01":case"EBAD02":case"EBAD03":case"EBAD04":case"EBAD05":case"EBAD06":case"EBAE02":case"EBAE03":case"EBAE04":case"EBAE05":case"EBAE06":case"EBAE07":(o=r.errorTextOnly.content).paragraphs[0]=i.config.messages.error["error-60-p1"],o.paragraphs[1]=i.config.messages.error["error-60-p2"],o.closeLinkText=i.config.messages.main.closeLinkText,o.header=i.config.messages.main.header,i.view.displayTemplate(r.errorTextOnly.name,o);break;case"EBAC04":(o=r.errorTextOnly.content).paragraphs[0]=i.config.messages.error["error-68-p1"],o.paragraphs[1]=i.config.messages.error["error-68-p2"],o.closeLinkText=i.config.messages.main.closeLinkText,o.header=i.config.messages.main.header,i.view.displayTemplate(r.errorTextOnly.name,o);break;case"EBAF01":case"error-31":case"error-32":(o=r.errorTpCookie.content).tpCookieUrl=i.config.tpCookieUrl,o.tpCookieUrlText=i.config.messages.error["error-30-urlText"],o.closeLinkText=i.config.messages.main.closeLinkText,o.header=i.config.messages.main.header,o.chrome.paragraph1=i.config.messages.error["error-30-chrome-p1"],o.chrome.list1=i.config.messages.error["error-30-chrome-li1"],o.chrome.list2=i.config.messages.error["error-30-chrome-li2"],o.chrome.list3=i.config.messages.error["error-30-chrome-li3"],o.firefox.paragraph1=i.config.messages.error["error-30-firefox-p1"],o.firefox.list1=i.config.messages.error["error-30-firefox-li1"],o.firefox.list2=i.config.messages.error["error-30-firefox-li2"],o.apple.paragraph1=i.config.messages.error["error-30-apple-p1"],o.apple.list1=i.config.messages.error["error-30-apple-li1"],o.apple.list2=i.config.messages.error["error-30-apple-li2"],o.apple.list3=i.config.messages.error["error-30-apple-li3"],o.apple.list4=i.config.messages.error["error-30-apple-li4"],o.apple.list5=i.config.messages.error["error-30-apple-li5"],o.other.paragraph1=i.config.messages.error["error-30-other-p1"],o.other.list1=i.config.messages.error["error-30-other-li1"],o.other.list2=i.config.messages.error["error-30-other-li2"],o.conclusion1=i.config.messages.error["error-30-conclusion1"],o.conclusion2=i.config.messages.error["error-30-conclusion2"],o.isBrowserChrome=i.ui.userAgentIsChromium(),o.isBrowserFirefox=i.ui.userAgentIsFirefox(),o.isBrowserApple=i.ui.userAgentIsApple(),o.isBrowserOther=!o.isBrowserChrome&&!o.isBrowserFirefox&&!o.isBrowserApple,i.view.displayTemplate(r.errorTpCookie.name,o);break;case"EBAF02-activate":(o=r.errorTextOnly.content).paragraphs[0]=i.config.messages.error["EBAF02-activate-p1"],o.paragraphs[1]=i.config.messages.error["EBAF02-activate-p2"],o.closeLinkText=i.config.messages.main.closeLinkText,o.header=i.config.messages.main.header,i.view.displayTemplate(r.errorTextOnly.name,o);break;default:i.view.displayTemplate(r.errorTextOnly.name,r.errorTextOnly.content)}i.event.addListenerToDom("click",".close-button",function(e){i.modal.close()})},c=function(e,o){var s;n[e]?(s=n[e],i.log("view","display template "+e+" (cached)")):(s=d(e,o),p(e)&&(n[e]=s),f(e)&&(a=e),i.log("view","display template "+e)),g(i.constants.ui.container,s)},d=function(e,o){var s=i.template[e];if(!s)throw new h.Error("Template not found (templateName:"+e+")","EBAA03");return T.render(s,o)},g=function(e,o){b(e).html(o)},l=function(){var e=b("#axis-auth").find(".axis-auth-main"),o=e.find(".axis-auth-middle"),s=e.find(".axis-auth-logos-container");if(o.hasScrollBar()){e.addClass("with-scroll"),o.addClass("scrolled");var a=s[0].offsetWidth-s[0].clientWidth;void 0===window.orientation?(o.addClass("show-scroll"),o[0].style.width=o[0].clientWidth+a+"px"):a<10&&o.addClass("mini-scrol")}else e.removeClass("with-scroll"),o.removeClass("scrolled"),"web"===i.config.platform&&(o.removeClass("show-scroll"),o[0].style.width="")},f=function(e){return-1!==s.indexOf(e)},m=function(){setTimeout(function(){b(".axis-auth-container").addClass("bmauth-keyboard-on")},100)},u=function(){setTimeout(function(){b(".axis-auth-container").removeClass("bmauth-keyboard-on")},1e3)},p=function(e){return-1!==o.indexOf(e)};return{init:function(){n={}},displayError:function(e){e&&void 0!==e.code?("cravetv"!==i.config.brand&&"rds"!==i.config.brand&&"tsn"!==i.config.brand||(r.errorTextOnly.name="d2c-error-text-only",r.errorTextOnly.content.header=i.config.messages.main.d2cHeader,r.errorTextOnly.content.faqLinkText=i.config.messages.main.faqLinkText,r.errorTextOnly.content.helpLinkText=i.config.messages.main.helpLinktext,r.errorTextOnly.content.closeLinkText=i.config.messages.main.closeLinkText,r.errorTpCookie.name="d2c-error-tpcookie",r.errorTpCookie.content.header=i.config.messages.main.d2cHeader,r.errorTpCookie.content.faqLinkText=i.config.messages.main.faqLinkText,r.errorTpCookie.content.helpLinkText=i.config.messages.main.helpLinktext,r.errorTpCookie.content.closeLinkText=i.config.messages.main.closeLinkText),t(e.code)):(t("error-00"),i.errorhandler.onWarning(new h.Warning("Error could not be displayed because it was not instance of error","WBAA02"))),n["bdu-chooser"]||b(".axis-auth-back").hide()},displayMessage:function(e){t(e),n["bdu-chooser"]||b(".axis-auth-back").hide()},displayD2CAuthZNoMessage:function(){var e;"cravetv"===i.config.brand?e="windows8"===i.config.platform||"android"===i.config.platform?"bmcravetv://account/subscription/subscriptions":"https://www.crave.ca/subscribe":"rds"===i.config.brand?e="android"===i.config.platform?"intent://ca.rds.go://endirect/play/68998":"https://account.bellmedia.ca/login/dtc/subscription?action=subscribe&service=rds&lang=fr":"tsn"===i.config.brand&&(e="android"===i.config.platform?"intent://ca.tsn.mobile.android/app/page/live#Intent;scheme=android-app;package=ca.tsn.mobile.android;end":"https://account.bellmedia.ca/login/dtc/subscription?action=subscribe&service=tsn&lang=en");var o={header:i.config.messages.main.d2cHeader,faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,closeLinkText:i.config.messages.main.closeLinkText,subscribeUrl:e,subscribeUrlText:i.config.messages.authZNoMessage.subscribeUrlText,message_1:i.config.messages.authZNoMessage.message_l1,message_2:i.config.messages.authZNoMessage.message_l2};i.view.displayTemplate("d2c-error-d2c-authzno",o)},displayAuthZNoMessage:function(e){"cravetv"==e&&(e="crave");var o,s=e.toUpperCase();(o=JSON.parse(JSON.stringify(r.errorTextOnly.content))).paragraphs[0]=i.config.messages.error["authzNo-p1-left"]+s+i.config.messages.error["authzNo-p1-right"],o.paragraphs[1]=i.config.messages.error["authzNo-p2"],o.closeLinkText=i.config.messages.main.closeLinkText,o.header=i.config.messages.main.header,o.showBackButton=!1,"cravetv"!==i.config.brand&&"rds"!==i.config.brand&&"tsn"!==i.config.brand||(r.errorTextOnly.name="d2c-error-text-only",o.header=i.config.messages.main.d2cHeader,o.faqLinkText=i.config.messages.main.faqLinkText,o.helpLinkText=i.config.messages.main.helpLinktext,o.closeLinkText=i.config.messages.main.closeLinkText),i.view.displayTemplate(r.errorTextOnly.name,o),i.event.addListenerToDom("click",".close-button",function(){i.modal.close()})},displayACustomuthZNoMessage:function(e){var o;(o=JSON.parse(JSON.stringify(r.errorTextOnly.content))).paragraphs[0]=e,o.paragraphs[1]="",o.closeLinkText=i.config.messages.main.closeLinkText,o.header=i.config.messages.main.header,o.showBackButton=!1,"cravetv"!==i.config.brand&&"rds"!==i.config.brand&&"tsn"!==i.config.brand||(r.errorTextOnly.name="d2c-error-text-only",o.header=i.config.messages.main.d2cHeader,o.faqLinkText=i.config.messages.main.faqLinkText,o.helpLinkText=i.config.messages.main.helpLinktext,o.closeLinkText=i.config.messages.main.closeLinkText),i.view.displayTemplate(r.errorTextOnly.name,o),i.event.addListenerToDom("click",".close-button",function(){i.modal.close()})},displayAuthZNoMessageMultiAuthz:function(e,o){var s={logoSource:e,header:i.config.messages.main.header,topText:i.config.messages.error["authzNo-multi-top"],bottomText:i.config.messages.error["authzNo-multi-bottom"],notAuthorizedResources:o.notAuthorized,brand:i.config.brand,buttonText:"ios"===i.config.platform||"android"===i.config.platform?"Back":"close"};i.view.displayTemplate("authzno-message-multi",s),i.event.addListenerToDom("click",".close-button",function(){i.modal.close()})},displaySuccessMessage:function(e){var o;"cravetv"===i.config.brand||"rds"===i.config.brand||"tsn"===i.config.brand?(o=r.successMessage.content,o={logoSource:e,header:i.config.messages.main.header,text:i.config.messages.success.signin},i.view.displayTemplate(r.successMessage.name,o)):(o={faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,logoSource:e,header:i.config.messages.main.d2cHeader,text:i.config.messages.success.signin},i.view.displayTemplate("d2c-success",o))},displaySuccessMessageMultiAuthz:function(e,o){var s={logoSource:e,header:i.config.messages.main.header,text:i.config.messages.success.signin,accessToText:i.config.messages.success.successMultiAccessto,noAccessToText:i.config.messages.success.successMultiNoAccessto,contactTV:i.config.messages.success.contactTV,authorizedResources:o.authorized,notAuthorizedResources:o.notAuthorized,hasNoAuthz:0<o.notAuthorized.length,numYes:"logo"+o.authorized.length,numNo:"logo"+o.notAuthorized.length,topShort:2<=o.notAuthorized.length?"top-short":""};i.view.displayTemplate("success-message-all",s)},displayCrossAuthenticatedMessage:function(){var e=r.successMessage.content;e={logoSource:null,header:i.config.messages.main.header,text:i.config.messages.success["cross-site-signin"]},i.view.displayTemplate(r.successMessage.name,e)},displayInitialView:function(e,o,s){"cravetv"===i.config.brand||"rds"===i.config.brand||"tsn"===i.config.brand?s?this.displayD2cChooser(e,o):this.displayD2cLogin(e,o):this.displayBduChooser(e)},displayBduChooser:function(e){r.bduChooser.data={logos:e,header:i.config.messages.main.header,subHeader:i.config.messages.bduChooser.subHeader,guestUsers:i.config.messages.bduChooser.guestUsers,providerNotListed:i.config.messages.bduChooser.providerNotListed,bellmediaLogo:i.vars.bellmediaLogo,iframeSource:i.constants.url.authRoot+"pages/activate.html?continue="+btoa(-1!==window.location.href.indexOf("?")?window.location.href:window.location.href+"?")},i.view.displayTemplate(r.bduChooser.name,r.bduChooser.data),l()},displayQuickSignIn:function(e,o){"cravetv"===i.config.brand?(i.module.authn.setSignInBduInfo("CanadaSub"),i.module.authn.setBduUrn(i.module.authn.getBduAkamaiSource(i.vars.d2cUrn))):"rds"===i.config.brand?(i.module.authn.setSignInBduInfo("RDSCanadaSub"),i.module.authn.setBduUrn(i.module.authn.getBduAkamaiSource(i.vars.d2cUrn))):"tsn"===i.config.brand&&(i.module.authn.setSignInBduInfo("TSNCanadaSub"),i.module.authn.setBduUrn(i.module.authn.getBduAkamaiSource(i.vars.d2cUrn))),r.bduChooser.data={subHeader:""===o?o:i.config.messages.main.QuickSignInText,noHeaderClass:""===o?"no-header":"",faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,source:e},i.view.displayTemplate("d2c-quick-login",r.bduChooser.data)},displayD2cLogin:function(o,s){var e=!1;"cravetv"===i.config.brand?(i.module.authn.setSignInBduInfo("CanadaSub"),i.module.authn.setBduUrn(i.module.authn.getBduAkamaiSource(i.vars.d2cUrn)),i.tracking.onBduSelected("CanadaSub"),e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"appletv"!==i.config.platform):"rds"===i.config.brand?(i.module.authn.setSignInBduInfo("RDSCanadaSub"),i.module.authn.setBduUrn(i.module.authn.getBduAkamaiSource(i.vars.d2cUrn)),i.tracking.onBduSelected("RDSCanadaSub"),e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"android"!==i.config.platform&&"appletv"!==i.config.platform):"tsn"===i.config.brand&&(i.module.authn.setSignInBduInfo("TSNCanadaSub"),i.module.authn.setBduUrn(i.module.authn.getBduAkamaiSource(i.vars.d2cUrn)),i.tracking.onBduSelected("TSNCanadaSub"),e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"android"!==i.config.platform&&"appletv"!==i.config.platform),r.bduChooser.data={header:i.config.messages.main.d2cHeader,subHeader:i.config.messages.bduChooser.d2cSubheader,faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,d2cTabText:i.config.messages.bduChooser.d2cTabText,d2cTabText_sub:i.config.messages.bduChooser.d2cTabText_sub,chooserTabText:i.config.messages.bduChooser.chooserTabText,chooserTabText_sub:i.config.messages.bduChooser.chooserTabText_sub,bduUrn:s,newToD2CText:i.config.messages.bduChooser.newToD2CText,startD2CTrial:i.config.messages.bduChooser.startD2CTrial,hideSubscribe:e,d2cConnection:i.config.messages.bduChooser.d2cConnection,d2cColor:i.config.messages.bduChooser.d2cColor},i.ui.isAndroidWebView()||!0===i.config.options.fromWebview||i.ui.userAgentIsFirefox()?i.view.displayTemplate("d2c-d2c-login",r.bduChooser.data):i.view.displayTemplate("d2c-d2c-login-ios",r.bduChooser.data),i.event.addListenerToDom("click","#tab-chooser",function(e){i.view.displayD2cChooser(o,s)}),window.addEventListener("native.keyboardshow",m),window.addEventListener("native.keyboardhide",u)},displayD2cChooser:function(o,s){var e=!1;"cravetv"===i.config.brand?e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"appletv"!==i.config.platform:"rds"===i.config.brand?e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"android"!==i.config.platform&&"appletv"!==i.config.platform:"tsn"===i.config.brand&&(e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"android"!==i.config.platform&&"appletv"!==i.config.platform),r.bduChooser.data={logos:o,header:i.config.messages.main.d2cHeader,subHeader:i.config.messages.bduChooser.d2cSubheader,faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,d2cTabText:i.config.messages.bduChooser.d2cTabText,d2cTabText_sub:i.config.messages.bduChooser.d2cTabText_sub,chooserTabText:i.config.messages.bduChooser.chooserTabText,chooserTabText_sub:i.config.messages.bduChooser.chooserTabText_sub,newToD2CText:i.config.messages.bduChooser.newToD2CText,startD2CTrial:i.config.messages.bduChooser.startD2CTrial,noProviderD2Cspan:i.config.messages.bduChooser.noProviderD2Cspan,noProviderD2Clink:i.config.messages.bduChooser.noProviderD2Clink,hideSubscribe:e},i.view.displayTemplate("d2c-bdu-chooser",r.bduChooser.data),i.event.addListenerToDom("click","#tab-d2c",function(e){i.view.displayD2cLogin(o,s)})},displayFrontDoor:function(){var e=!1;"cravetv"===i.config.brand?e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"appletv"!==i.config.platform:"rds"===i.config.brand?e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"android"!==i.config.platform&&"appletv"!==i.config.platform:"tsn"===i.config.brand&&(e="ios"!==i.config.platform&&"windows8"!==i.config.platform&&"android"!==i.config.platform&&"appletv"!==i.config.platform);var o={fdTitle:i.config.messages.frontDoor.fdTitle,fdText:i.config.messages.frontDoor.fdText,button_fdSubscribe:i.config.messages.frontDoor.button_fdSubscribe,button_fdSignInQuestion:i.config.messages.frontDoor.button_fdSignInQuestion,button_fdSignInAnswer:i.config.messages.frontDoor.button_fdSignInAnswer,hideSubscribe:e};i.view.displayTemplate("d2c-front-door",o)},displayFeedBack:function(e){var o={faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,urn:i.constants.url.feedback,backLinkText:i.config.messages.faq.backLinkText},s=this,a=function(e){try{"BMFeedbackClose"===JSON.parse(e.data).messageSender&&(window.removeEventListener("message",a,!1),s.navigateBack())}catch(e){window.removeEventListener("message",a,!1),s.navigateBack()}};i.view.displayTemplate("d2c-feedback",o),window.addEventListener("message",a,!1)},loadBduLoginIframe:function(e,o,s){var a=this;if("cravetv"!==i.config.brand&&"rds"!==i.config.brand&&"tsn"!==i.config.brand)r.bduLogin.data={source:e,header:i.config.messages.main.header},i.ui.isAndroidWebView()||!0===i.config.options.fromWebview||i.ui.userAgentIsFirefox()?i.view.displayTemplate(r.bduLogin.name,r.bduLogin.data):window.location.href=e;else{var n={source:e,header:i.config.messages.main.d2cHeader,subHeader:i.config.messages.bduChooser.d2cSubheader,faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,backLinkText:i.config.messages.main.backLinkText,d2cTabText:i.config.messages.bduChooser.d2cTabText,d2cTabText_sub:i.config.messages.bduChooser.d2cTabText_sub,chooserTabText:i.config.messages.bduChooser.chooserTabText,chooserTabText_sub:i.config.messages.bduChooser.chooserTabText_sub};i.ui.isAndroidWebView()||!0===i.config.options.fromWebview||i.ui.userAgentIsFirefox()?i.view.displayTemplate("d2c-bdu-login",n):window.location.href=e,i.event.addListenerToDom("click","#tab-d2c",function(e){i.view.displayD2cLogin(o,s)}),i.event.addListenerToDom("click","#tab-chooser",function(e){i.view.displayD2cChooser(o,s)}),i.event.addListenerToDom("click",".bmauth-back-button",function(e){a.navigateBack()})}},loadBduLoginIframeHidden:function(e){r.bduLogin.data={source:e,header:i.config.messages.main.header},i.view.renderHiddenTemplate(r.bduLogin.name+"-hidden",r.bduLogin.data)},displayFAQ:function(e){var o=this;if("cravetv"!==i.config.brand&&"rds"!==i.config.brand&&"tsn"!==i.config.brand)r.faq.data={url:e,header:i.config.messages.main.header,subTitle:i.config.messages.faq.subTitle,faqs:i.config.faq},i.view.displayTemplate(r.faq.name,r.faq.data);else{var s={header:i.config.messages.main.d2cHeader,subHeader:i.config.messages.faq.subTitle,faqLinkText:i.config.messages.main.faqLinkText,helpLinkText:i.config.messages.main.helpLinktext,d2cTabText:i.config.messages.bduChooser.d2cTabText,subTitle:i.config.messages.faq.subTitle,backLinkText:i.config.messages.faq.backLinkText,faqs:i.config.faq};i.view.displayTemplate("d2c-faq",s),i.event.addListenerToDom("click",".bmauth-back-button",function(e){o.navigateBack()})}b(".bmauth-answer").hide(),b(".bmauth-question").click(function(e){var o=b(this).parent().parent().find(".bmauth-faq-chevron"),s=b(this).parent().find(".bmauth-answer");s.is(":visible")?s.hide(200):s.show(200),o.toggleClass("downward")}),n["bdu-chooser"]||b(".axis-auth-back").hide()},navigateBack:function(e,o){"cravetv"!==i.config.brand&&"rds"!==i.config.brand&&"tsn"!==i.config.brand?(c(a),l()):c(a)},displayTemplate:function(e,o){c(e,o)},renderHiddenTemplate:function(e,o){var s=d(e,o);b(i.constants.ui.container).prepend(s)},insert:function(e,o){b(e).append(o)},empty:function(e){b(e).empty()},remove:function(e){b(e).remove()},insertModal:function(){this.insert("body",d("modal-base",{brand:i.config.brand}))}}}})}(BmAuth,jQuery,Mustache);
!function(f,w){"use strict";f.define({name:"vwfix",type:"api-method",value:function(s){var n,u=function(e,n){var t=i(e.css);s.log("vwfix",n+" is being inserted into the head"),w("head").append('<style id="'+n+'">'+t+"</style>")},i=function(e){n=["vw","vh","vm"];var i=window.innerWidth,r=window.innerHeight,a=Math.min(i,r);return e.replace(new RegExp("\\b([0-9]*\\.?[0-9]+)("+n.join("|")+")\\b","gi"),function(e,n,t){switch(t){case"vw":return n*i/100+"px";case"vh":return n*r/100+"px";case"vm":return n*a/100+"px"}})};return{mayFix:function(o){return new Promise(function(e,n){var a,t,i=s.constants.url.authRoot+"styles/vwfix."+o+".js",r="vwfix."+o,c=document.createElement("_").style;["vw"].filter(function(e){return c.width="",c.width="10"+e,!c.width}).length?(s.log("vwfix","inserting vw fix for "+o+".css"),(a=i,t=r,new Promise(function(n,r){w.ajax({url:a,contentType:"application/javascript",jsonpCallback:"callback",dataType:"jsonp",success:function(e){try{u(e,t),n()}catch(e){r(e)}},error:function(e,n,t){s.log("vwfix","getCSS("+a+") "+t);var i=new f.Error("Reading the vw-fix js file failed. (filename: "+a+",error: "+t+")","EBAE08");r(i)}})})).then(e).catch(n)):e()})}}}})}(BmAuth,jQuery);
!function(p,h,e){"use strict";p.define({name:"AuthAdmin",type:"module",value:function(u){var t,c={_startTime:null,_endTime:null,duration:null,start:function(){this._startTime=null,this._endTime=null,this.duration=null,this._startTime=Date.now()},stop:function(){this._endTime=Date.now(),this.duration=this._endTime-this._startTime},isConfigWarningTreshold:function(){return this.duration>u.constants.timer.configWarningTreshold}},o=function(){return t.brand.faq},l=function(){u.config.brandUrn=t.brand.akamai.platform_id,u.config.lang=t.brand.lang.def,u.config.messages=d(),u.config.faq=o(),u.config.isMultiAuthzFlow=t.brand.hasMultiAuthzFloq,u.config.tpCookieUrl=t.brand.tpCookieUrl},e=function(){return new Promise(function(r,i){var e,s={contentType:"application/json",url:(e=u.constants.url.config+u.config.brand+"/"+u.config.platform+"/"+("prod"===u.config.environment?"prod":"test"),u.log("admin","brandconfig urn is "+e),e),timeout:u.constants.timer.configTimeouTreshold,dataType:"jsonp",jsonpCallback:"axisconfig",crossDomain:!0,cache:!0},n=0;function a(e){c.stop(),c.isConfigWarningTreshold()&&u.errorhandler.onWarning(new p.Warning("AuthAdmin config request took "+c.duration+" ms","WBAD01",{duration:c.duration})),t=e.config,u.log("admin","recieved config in "+c.duration+"ms:",t);try{u.storage.setSession("brandConfig",t)}catch(e){u.config.messages=d();try{u.config.faq=o()}catch(e){}i(e)}l(),r()}c.start(),h.ajax(s).done(a).fail(function(e,r){!function o(e,r){c.stop();if(n<3)n++,u.errorhandler.onWarning(new p.Warning("AuthAdmin config request failed as warning on "+n+" try after "+c.duration+"ms. ("+r+")","WBAE01",{duration:c.duration})),c.start(),h.ajax(s).done(a).fail(function(e,r){o(e,r)});else{var t;t="timeout"===r?new p.Error("Getting brand config from authadmin failed. (reason: timeout "+c.duration+"ms)","EBAD01",{duration:c.duration}):new p.Error("Getting brand config from authadmin failed. (reason: "+r+")","EBAE01"),i(t)}}(0,r)})})},d=function(){var e;return e="ios"===u.config.platform||"android"===u.config.platform,"cravetv"===u.config.brand?"en"===u.config.lang?{main:{header:"Sign in to Watch",d2cHeader:"Sign In",faqLinkText:"FAQ",helpLinktext:"HELP",backLinkText:"Back",closeLinkText:"Close",QuickSignInText:"Signing you into Crave"},bduChooser:{subHeader:"Choose your TV service provider to get access to live streaming and more content.",guestUsers:"Access for all guest users",providerNotListed:"Provider not listed? Stay tuned, we will be adding more TV providers shortly.",d2cSubheader:"How did you subscribe?",d2cTabText:"Directly From Crave",d2cTabText_sub:"",chooserTabText:"Through My TV Provider",chooserTabText_sub:"",newToD2CText:"New to Crave?",startD2CTrial:"Subscribe Now!",noProviderD2Cspan:"TV provider not listed?",noProviderD2Clink:"Subscribe directly",d2cConnection:"Sign In",d2cColor:"#00c1f3"},error:{error_p2:"Please try again and if the problem persists, please contact your television service provider.","error-00":"There has been a technical problem!","error-01":"There has been a network issue!","error-60-p1":"Sorry, your request could not go through at this time.","error-60-p2":"Please try again later.","error-30-p1a":"We have detected that your browser is blocking third party cookies which are needed for authentication. You are required to enable third party cookies.","error-30-p2a":"Provided","error-30-p2b":"are the tips on how to accomplish this.","error-30-p3a":"You are currently using the IOS 13 operating system on an Apple device. At this time, iOS 13 may not support TV/Video sign-in on your mobile browser. We are working to resolve the issue as quickly as possible. In the meantime, you can try again, watch in our app which you can download ","error-30-p3b":" or use a desktop browser to register a Samsung TV, Apple TV Gen3 or other device","error-30-urlText":"here","error-30-chrome-p1":"Please access your Chrome settings to validate the following:","error-30-chrome-li1":"Go to the General Settings section.","error-30-chrome-li2":"Ensure that the option “Allow all cookies” is selected.","error-30-chrome-li3":"Close the Chrome browser tab that is currently open and try log in again.","error-30-firefox-p1":"Please access your Firefox settings by going into “Options” and click on the “Privacy & Security” section, where you will have a list of items related to Content Blocking.","error-30-firefox-li1":"Make sure you have the “Custom” option selected and that you are not blocking “Trackers” and not blocking “Cookies”.","error-30-firefox-li2":"Close the Firefox browser tab that is currently open and try log in again.","error-30-apple-p1":"Please access your Safari settings to validate the following:","error-30-apple-li1":"Go to Settings and select Safari and then go to Privacy & Security section.","error-30-apple-li2":'Ensure "Prevent Cross-Site Tracking" is turned off.',"error-30-apple-li3":'Ensure "Block All Cookies" is turned off.',"error-30-apple-li4":'Ensure "Do Not Track" is turned off.',"error-30-apple-li5":"Close the Safari browser tab that is currently open and try log in again.","error-30-other-p1":"Please access your browser setting to validate the following:","error-30-other-li1":"Make sure you are allowing cookies and intersite tracking.","error-30-other-li2":"Close the browser tab that is currently open after changing your settings and try log in again.","error-30-conclusion1":"We recommend that you also clear your cookies and browsing history before you try again.","error-30-conclusion2":"If you're still experiencing issues to log in, please try with a different browser.","authzNo-p1-left":"To watch video, you must be subscribed to ","authzNo-p1-right":" with your television service provider.","authzNo-p2":"If you already subscribe to this channel and are still experiencing difficulties, please contact your service provider.","authzNo-multi-top":"To enjoy thousands of hours of spectacular content from these channels, please contact your service provider today to subscribe.","authzNo-multi-bottom":"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider.","error-68-p1":"You have an invalid postal code, unfortunately we can't process further.","error-68-p2":"Please contact your service provider.","EBAF02-activate-p1":"Alert: You are in private browsing mode.","EBAF02-activate-p2":"In order to continue, you need to disable private browsing.For steps to disable private browsing, please visit FAQs on the app or '?' on this screen."},success:{signin:"You have successfully signed into","cross-site-signin":"Video Sign In successful.",successMultiAccessto:"Which provides you access to the following channel(s):",successMultiNoAccessto:"You are currently not subscribed to the following channel(s):",contactTV:"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider."},faq:{subTitle:"",backLinkText:"Close"},frontDoor:{fdTitle:"Stream On!",fdText:"Get ready to stream the best of TV",button_fdSubscribe:"Subscribe now!",button_fdSignInQuestion:"Already a subscriber?",button_fdSignInAnswer:"Sign In"},authZNoMessage:{subscribeUrlText:"Update Account",message_l1:"We noticed you don't have a valid subscription.",message_l2:"Please update your payment details to continue watching Crave."}}:{main:{header:"Se connecter pour regarder",d2cHeader:"[fr]SIGN IN",faqLinkText:"[fr]FAQ",helpLinktext:"[fr]HELP",backLinkText:"[fr]< BACK",closeLinkText:"Fermer",QuickSignInText:"[fr]Signing you in"},bduChooser:{subHeader:"Choisissez votre fournisseur pour accéder aux diffusions en direct et à du contenu supplémentaire.",guestUsers:"Accès pour les utilisateurs invités de Bell Média.",providerNotListed:"Votre fournisseur n’est pas dans la liste? Restez à l’affût, nous ajouterons des fournisseurs bientôt.",d2cSubheader:"[fr]How did you subscribe",d2cTabText:"[fr]Directly From Crave",d2cTabText_sub:"",chooserTabText:"[fr]Through My TV Provider",chooserTabText_sub:"",newToD2CText:"[fr]New to Crave?",startD2CTrial:"[fr]Start you free 30 day trial",noProviderD2Cspan:"[fr]TV provider not listed?",noProviderD2Clink:"[fr]Subscribe directly through Crave",d2cConnection:"Sign In",d2cColor:"#00c1f3"},error:{error_p2:"Veuillez essayer de nouveau. Si le problème persiste, veuillez contacter votre télédistributeur.","error-00":"Il y a un problème technique!","error-01":"There has been a network issue!","error-60-p1":"Désolé, votre requête ne peut pas être acheminé maintenant.","error-60-p2":"Veuillez réessayer plus tard.","error-30-p1":"Nous avons détecté que votre navigateur bloque les cookies tiers qui sont nécessaires afin de vous identifier. Veuillez les activer.","error-30-p2":"Voici les instructions afin d’y parvenir.","authzNo-p1-left":"Vous devez être abonné à  ","authzNo-p1-right":" auprès de votre fournisseur de services de télévision afin de visionner une vidéo","authzNo-p2":"Si vous êtes déjà abonné à cette chaîne et éprouvez toujours des difficultés, veuillez contacter votre fournisseur."},success:{signin:" Vous êtes maintenant connectés à","cross-site-signin":"Vous avez été authentifié multisite."},faq:{subTitle:"",backLinkText:"Fermer"},frontDoor:{fdTitle:"[fr]Stream On!",fdText:"[fr]Get ready to stream the best of TV",button_fdSubscribe:"[fr]Subscribe now!",button_fdSignInQuestion:"[fr]Already a subscriber?",button_fdSignInAnswer:"[fr]Sign In"},authZNoMessage:{subscribeUrlText:"Update Account",message_l1:"We noticed you don't have a valid subscription.",message_l2:"Please update your payment details to continue watching Crave."}}:"rds"===u.config.brand?"en"===u.config.lang?{main:{header:"SIGN IN",d2cHeader:"SIGN IN",faqLinkText:"FAQ",helpLinktext:"HELP",backLinkText:"< BACK",closeLinkText:"CLOSE",QuickSignInText:"Signing you into RDS"},bduChooser:{subHeader:"Choose your TV service provider to get access to live streaming and more content.",guestUsers:"Access for all guest users",providerNotListed:"Provider not listed? Stay tuned, we will be adding more TV providers shortly.",d2cSubheader:"How did you subscribe?",d2cTabText:"RDS DIRECT",d2cTabText_sub:"Enter your account info",chooserTabText:"RDS GO",chooserTabText_sub:"Select your TV provider",newToD2CText:"New to RDS? ",startD2CTrial:" Start your 7-day trial",noProviderD2Cspan:"TV provider not listed?",noProviderD2Clink:"Subscribe directly",d2cConnection:"Sign In",d2cColor:"#b90a0a"},error:{error_p2:"Please try again and if the problem persists, please contact your television service provider.","error-00":"There has been a technical problem!","error-01":"There has been a network issue!","error-60-p1":"Sorry, your request could not go through at this time.","error-60-p2":"Please try again later.","error-30-p1":"We have detected that your browser is blocking third party cookies which are needed for authentication. You are required to enable third party cookies.","error-30-p2a":"Provided","error-30-p2b":"are the tips on how to accomplish this.","error-30-p3a":"You are currently using the IOS 13 operating system on an Apple device. At this time, iOS 13 may not support TV/Video sign-in on your mobile browser. We are working to resolve the issue as quickly as possible. In the meantime, you can try again, watch in our app which you can download ","error-30-p3b":" or use a desktop browser to register a Samsung TV, Apple TV Gen3 or other device","error-30-urlText":"here","error-30-chrome-p1":"Please access your Chrome settings to validate the following:","error-30-chrome-li1":"Go to the General Settings section.","error-30-chrome-li2":"Ensure that the option “Allow all cookies” is selected.","error-30-chrome-li3":"Close the Chrome browser tab that is currently open and try log in again.","error-30-firefox-p1":"Please access your Firefox settings by going into “Options” and click on the “Privacy & Security” section, where you will have a list of items related to Content Blocking.","error-30-firefox-li1":"Make sure you have the “Custom” option selected and that you are not blocking “Trackers” and not blocking “Cookies”.","error-30-firefox-li2":"Close the Firefox browser tab that is currently open and try log in again.","error-30-apple-p1":"Please access your Safari settings to validate the following:","error-30-apple-li1":"Go to Settings and select Safari and then go to Privacy & Security section.","error-30-apple-li2":'Ensure "Prevent Cross-Site Tracking" is turned off.',"error-30-apple-li3":'Ensure "Block All Cookies" is turned off.',"error-30-apple-li4":'Ensure "Do Not Track" is turned off.',"error-30-apple-li5":"Close the Safari browser tab that is currently open and try log in again.","error-30-other-p1":"Please access your browser setting to validate the following:","error-30-other-li1":"Make sure you are allowing cookies and intersite tracking.","error-30-other-li2":"Close the browser tab that is currently open after changing your settings and try log in again.","error-30-conclusion1":"We recommend that you also clear your cookies and browsing history before you try again.","error-30-conclusion2":"If you're still experiencing issues to log in, please try with a different browser.","authzNo-p1-left":"To watch video, you must be subscribed to ","authzNo-p1-right":" with your television service provider.","authzNo-p2":"If you already subscribe to this channel and are still experiencing difficulties, please contact your service provider.","authzNo-multi-top":"To enjoy thousands of hours of spectacular content from these channels, please contact your service provider today to subscribe.","authzNo-multi-bottom":"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider.","error-68-p1":"You have an invalid postal code, unfortunately we can't process further.","error-68-p2":"Please contact your service provider.","EBAF02-activate-p1":"Alert: You are in private browsing mode.","EBAF02-activate-p2":"In order to continue, you need to disable private browsing.For steps to disable private browsing, please visit FAQs on the app or '?' on this screen."},success:{signin:"You have successfully signed into","cross-site-signin":"Video Sign In successful.",successMultiAccessto:"Which provides you access to the following channel(s):",successMultiNoAccessto:"You are currently not subscribed to the following channel(s):",contactTV:"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider."},faq:{subTitle:"FAQ",backLinkText:"< BACK"},frontDoor:{fdTitle:"Start Streaming!",fdText:"Get ready to watch your favourite sports",button_fdSubscribe:"Get a free 7-day trial on us",button_fdSignInQuestion:"Already a subscriber?",button_fdSignInAnswer:"Sign In"},authZNoMessage:{subscribeUrlText:"Update Account",message_l1:"We noticed you don't have a valid subscription.",message_l2:"Please update your payment details to continue watching RDS DIRECT."}}:{main:{header:"SE CONNECTER",d2cHeader:"SE CONNECTER",faqLinkText:"FAQ",helpLinktext:"AIDE",backLinkText:"< RETOUR",closeLinkText:"FERMER",QuickSignInText:"En connexion"},bduChooser:{subHeader:"Choisissez votre fournisseur pour accéder aux diffusions en direct et à du contenu supplémentaire.",guestUsers:"Accès pour les utilisateurs invités de Bell Média.",providerNotListed:"Votre fournisseur n’est pas dans la liste? Restez à l’affût, nous ajouterons des fournisseurs bientôt.",d2cSubheader:"Comment êtes-vous abonnés?",d2cTabText:"RDS DIRECT",d2cTabText_sub:"Entrez les détails du compte",chooserTabText:"RDS GO",chooserTabText_sub:"Choisissez votre télédistributeur",newToD2CText:"Vous n’avez pas RDS? ",startD2CTrial:" Abonnez-vous",noProviderD2Cspan:"Votre télédistributeur n'y est pas?",noProviderD2Clink:"Abonnez-vous directement",d2cConnection:"Connexion",d2cColor:"#b90a0a"},error:{error_p2:"Veuillez essayer de nouveau. Si le problème persiste, veuillez contacter votre télédistributeur.","error-00":"Il y a un problème technique!","error-01":"Il y a eu un problème de réseau!","error-60-p1":"Désolé, votre requête ne peut pas être acheminé maintenant.","error-60-p2":"Veuillez réessayer plus tard.","error-30-p1":"Nous avons détecté que votre navigateur bloque les cookies tiers qui sont nécessaires afin de vous identifier. Veuillez les activer.","error-30-p2b":" les instructions afin d’y parvenir","error-30-p3a":"Vous utilisez actuellement le système d'exploitation IOS 13 sur un appareil Apple. Il est possible qu'iOS 13 ne supporte pas la connexion TV / Vidéo sur votre navigateur mobile. Nous travaillons pour résoudre le problème le plus rapidement possible. En attendant, veuillez réessayer ou utiliser notre application mobile que vous pouvez télécharger ","error-30-p3b":" ou encore utiliser un navigateur Web pour enregistrer un téléviseur Samsung, Apple TV Gen3 ou un autre appareil","error-30-urlText":"Voici","error-30-chrome-p1":"Veuillez accéder à vos paramètres Chrome pour valider les items suivants:","error-30-chrome-li1":"Allez dans la section Paramètres Généraux.","error-30-chrome-li2":"Assurez-vous que l’option « Autoriser tous les cookies » est sélectionnée.","error-30-chrome-li3":"Fermez l'onglet actif de votre navigateur Chrome et essayez de vous connecter à nouveau.","error-30-firefox-p1":"Veuillez accéder les paramètres Firefox en cliquant sur « Options », puis sur la section « Vie privée et sécurité », où vous verrez une liste d’items liés au blocage de contenu.","error-30-firefox-li1":"Veuillez vous assurer que l’option « Personnalisée » est sélectionnée et que vous ne bloquez pas les « Traqueurs » ni les « Cookies ».","error-30-firefox-li2":"Fermez l'onglet actif de votre navigateur Firefox et essayez de vous connecter à nouveau.","error-30-apple-p1":"Veuillez accéder à vos paramètres Safari pour valider les items suivants:","error-30-apple-li1":"Allez dans Paramètres, sélectionnez Safari puis allez à la section Confidentialité et sécurité.","error-30-apple-li2":"Assurez-vous que l'option « Empêcher le suivi intersite » est désactivée.","error-30-apple-li3":"Assurez-vous que l'option « Bloquer tous les cookies » est désactivée.","error-30-apple-li4":"Assurez-vous que l'option « Ne pas suivre mes activités » est désactivée.","error-30-apple-li5":"Fermez l'onglet actif de votre navigateur Safari et essayez de vous connecter à nouveau.","error-30-other-p1":"Veuillez accéder aux paramètres de votre navigateur pour valider les items suivants:","error-30-other-li1":"Assurez-vous que vous permettez l'utilisation des cookies et le suivi intersite.","error-30-other-li2":"Fermez l'onglet actif de votre navigateur après avoir effectué les changements et essayez de vous connecter à nouveau.","error-30-conclusion1":"Nous recommandons que vous effaciez vos cookies et votre historique de navigation avant d'essayer à nouveau.","error-30-conclusion2":"Si vous éprouvez toujours des problèmes pour vous connecter, veuillez essayer avec un autre navigateur.","authzNo-p1-left":"Vous devez être abonné à ","authzNo-p1-right":" auprès de votre fournisseur de services de télévision afin de visionner une vidéo","authzNo-p2":"ISi vous êtes déjà abonné à cette chaîne et éprouvez toujours des difficultés, veuillez contacter votre fournisseur.","authzNo-multi-top":"[fr] To enjoy thousands of hours of spectacular content from these channels, please contact your service provider today to subscribe.","authzNo-multi-bottom":"Si vous êtes déjà abonnés à cette chaîne et éprouvez des difficultés, veuillez communiquer avec votre télédistributeur.","error-68-p1":"Votre code postal est invalide. Malheureusement, nous ne pouvons traiter cette demande.","error-68-p2":"Veuillez communiquer avec votre fournisseur de service.","EBAF02-activate-p1":"Alerte: Vous êtes en mode de navigation privée.","EBAF02-activate-p2":"Afin de poursuivre, vous devez désactiver le mode de navigation privée.Pour consulter les étapes pour désactiver le mode de navigation privée, veuillez s'il vous plaît visiter la FAQ sur l'application  ou '?' sur cet écran."},success:{signin:"Vous êtes maintenant connectés à","cross-site-signin":"Vous avez été authentifié multisite.",successMultiAccessto:"[fr] Which provides you access to the following channel(s):",successMultiNoAccessto:"Vous n'êtes pas abonné à cet/ces chaîne(s):",contactTV:"Si vous êtes déjà abonnés à cette chaîne et éprouvez des difficultés, veuillez communiquer avec votre télédistributeur."},faq:{subTitle:"FAQ",backLinkText:"< RETOUR"},frontDoor:{fdTitle:"ÉCOUTEZ MAINTENANT",fdText:"Des événements sportifs en direct et en HD, sur l’appareil de votre choix!",button_fdSubscribe:"NOUVEAU À RDS? ABONNEZ-VOUS",button_fdSignInQuestion:"Êtes-vous un abonné? ",button_fdSignInAnswer:"Se connecter"},authZNoMessage:{subscribeUrlText:e?"FERMER":"Mettre le compte à jour",message_l1:"Votre abonnement n'est pas valide.",message_l2:e?"Visitez le www.rds.ca/emissions/en-direct/compte pour mettre à jour vos informations de paiement.":"Merci de mettre à jour votre méthode de paiement pour continuer de profiter de RDS DIRECT."}}:"tsn"!==u.config.brand?"en"===u.config.lang?{main:{header:"Sign In",d2cHeader:"Sign In",faqLinkText:"FAQ",helpLinktext:"HELP",backLinkText:"< BACK",closeLinkText:"CLOSE",QuickSignInText:"Signing you in"},bduChooser:{subHeader:"Choose your TV service provider to get access to live streaming and more content.",guestUsers:"Access for all guest users",providerNotListed:"Provider not listed? Stay tuned, we will be adding more TV providers shortly.",d2cSubheader:"How did you subscribe?",d2cTabText:"Directly From Crave",d2cTabText_sub:"",chooserTabText:"Through My TV Provider",chooserTabText_sub:"",newToD2CText:"New to Crave?",startD2CTrial:"Subscribe Now!",noProviderD2Cspan:"TV provider not listed?",noProviderD2Clink:"Subscribe directly"},error:{error_p2:"Please try again and if the problem persists, please contact your television service provider.","error-00":"There has been a technical problem!","error-01":"There has been a network issue!","error-60-p1":"Sorry, your request could not go through at this time.","error-60-p2":"Please try again later.","error-30-p1":"We have detected that your browser is blocking third party cookies which are needed for authentication. You are required to enable third party cookies.","error-30-p2a":"Provided","error-30-p2b":"are the tips on how to accomplish this.","error-30-p3a":"You are currently using the IOS 13 operating system on an Apple device. At this time, iOS 13 may not support TV/Video sign-in on your mobile browser. We are working to resolve the issue as quickly as possible. In the meantime, you can try again, watch in our app which you can download ","error-30-p3b":" or use a desktop browser to register a Samsung TV, Apple TV Gen3 or other device","error-30-urlText":"here","error-30-chrome-p1":"Please access your Chrome settings to validate the following:","error-30-chrome-li1":"Go to the General Settings section.","error-30-chrome-li2":"Ensure that the option “Allow all cookies” is selected.","error-30-chrome-li3":"Close the Chrome browser tab that is currently open and try log in again.","error-30-firefox-p1":"Please access your Firefox settings by going into “Options” and click on the “Privacy & Security” section, where you will have a list of items related to Content Blocking.","error-30-firefox-li1":"Make sure you have the “Custom” option selected and that you are not blocking “Trackers” and not blocking “Cookies”.","error-30-firefox-li2":"Close the Firefox browser tab that is currently open and try log in again.","error-30-apple-p1":"Please access your Safari settings to validate the following:","error-30-apple-li1":"Go to Settings and select Safari and then go to Privacy & Security section.","error-30-apple-li2":'Ensure "Prevent Cross-Site Tracking" is turned off.',"error-30-apple-li3":'Ensure "Block All Cookies" is turned off.',"error-30-apple-li4":'Ensure "Do Not Track" is turned off.',"error-30-apple-li5":"Close the Safari browser tab that is currently open and try log in again.","error-30-other-p1":"Please access your browser setting to validate the following:","error-30-other-li1":"Make sure you are allowing cookies and intersite tracking.","error-30-other-li2":"Close the browser tab that is currently open after changing your settings and try log in again.","error-30-conclusion1":"We recommend that you also clear your cookies and browsing history before you try again.","error-30-conclusion2":"If you're still experiencing issues to log in, please try with a different browser.","authzNo-p1-left":"To watch video, you must be subscribed to ","authzNo-p1-right":" with your television service provider.","authzNo-p2":"If you already subscribe to this channel and are still experiencing difficulties, please contact your service provider.","authzNo-multi-top":"To enjoy thousands of hours of spectacular content from these channels, please contact your service provider today to subscribe.","authzNo-multi-bottom":"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider.","error-68-p1":"You have an invalid postal code, unfortunately we can't process further.","error-68-p2":"Please contact your service provider.","EBAF02-activate-p1":"Alert: You are in private browsing mode.","EBAF02-activate-p2":"In order to continue, you need to disable private browsing.For steps to disable private browsing, please visit FAQs on the app or '?' on this screen."},success:{signin:"You have successfully signed into","cross-site-signin":"Video Sign In successful.",successMultiAccessto:"Which provides you access to the following channel(s):",successMultiNoAccessto:"You are currently not subscribed to the following channel(s):",contactTV:"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider."},faq:{subTitle:"",backLinkText:"Close"},frontDoor:{fdTitle:"Stream On!",fdText:"Get ready to stream the best of TV",button_fdSubscribe:"Subscribe Now!",button_fdSignInQuestion:"Already a subscriber?",button_fdSignInAnswer:"Sign In"},authZNoMessage:{subscribeUrlText:"Update Account",message_l1:"We noticed you don't have a valid subscription.",message_l2:"Please update your payment details to continue watching."}}:{main:{header:"Se connecter pour regarder",d2cHeader:"[fr]SIGN IN",faqLinkText:"[fr]FAQ",helpLinktext:"[fr]HELP",backLinkText:"[fr]< BACK",closeLinkText:"Fermer",QuickSignInText:"[fr]Signing you in"},bduChooser:{subHeader:"Choisissez votre fournisseur pour accéder aux diffusions en direct et à du contenu supplémentaire.",guestUsers:"Accès pour les utilisateurs invités de Bell Média.",providerNotListed:"Votre fournisseur n’est pas dans la liste? Restez à l’affût, nous ajouterons des fournisseurs bientôt.",d2cSubheader:"[fr]How did you subscribe",d2cTabText:"[fr]Directly From Crave",d2cTabText_sub:"",chooserTabText:"[fr]Through My TV Provider",chooserTabText_sub:"",newToD2CText:"[fr]New to Crave?",startD2CTrial:"[fr]Start you free 30 day trial",noProviderD2Cspan:"[fr]TV provider not listed?",noProviderD2Clink:"[fr]Subscribe directly"},error:{error_p2:"Veuillez essayer de nouveau. Si le problème persiste, veuillez contacter votre télédistributeur.","error-00":"Il y a un problème technique!","error-01":"There has been a network issue!","error-60-p1":"Désolé, votre requête ne peut pas être acheminé maintenant.","error-60-p2":"Veuillez réessayer plus tard.","error-30-p1":"Nous avons détecté que votre navigateur bloque les cookies tiers qui sont nécessaires afin de vous identifier. Veuillez les activer.","error-30-p2":"Voici les instructions afin d’y parvenir.","error-30-p3a":"Vous utilisez actuellement le système d'exploitation IOS 13 sur un appareil Apple. Il est possible qu'iOS 13 ne supporte pas la connexion TV / Vidéo sur votre navigateur mobile. Nous travaillons pour résoudre le problème le plus rapidement possible. En attendant, veuillez réessayer ou utiliser notre application mobile que vous pouvez télécharger ","error-30-p3b":" ou encore utiliser un navigateur Web pour enregistrer un téléviseur Samsung, Apple TV Gen3 ou un autre appareil","authzNo-p1-left":"Vous devez être abonné à  ","authzNo-p1-right":" auprès de votre fournisseur de services de télévision afin de visionner une vidéo","authzNo-p2":"Si vous êtes déjà abonné à cette chaîne et éprouvez toujours des difficultés, veuillez contacter votre fournisseur."},success:{signin:" Vous êtes maintenant connectés à","cross-site-signin":"Vous avez été authentifié multisite."},faq:{subTitle:"",backLinkText:"Fermer"},frontDoor:{fdTitle:"[fr]Stream On!",fdText:"[fr]Get ready to stream the best of TV",button_fdSubscribe:"[fr]New to Crave? Subscribe Now!",button_fdSignInQuestion:"[fr]Already a subscriber?",button_fdSignInAnswer:"[fr]Sign In"},authZNoMessage:{subscribeUrlText:"Update Account",message_l1:"We noticed you don't have a valid subscription.",message_l2:"Please update your payment details to continue watching."}}:"en"===u.config.lang?{main:{header:"SIGN IN",d2cHeader:"SIGN IN",faqLinkText:"FAQ",helpLinktext:"HELP",backLinkText:"< BACK",closeLinkText:"CLOSE",QuickSignInText:"Signing you into TSN"},bduChooser:{subHeader:"Choose your TV service provider to get access to live streaming and more content.",guestUsers:"Access for all guest users",providerNotListed:"Provider not listed? Stay tuned, we will be adding more TV providers shortly.",d2cSubheader:"How do you subscribe?",d2cTabText:"TSN DIRECT",d2cTabText_sub:"Enter Your Account Info",chooserTabText:"TSN GO",chooserTabText_sub:"Select Your TV Provider",newToD2CText:"Don't have TSN? ",startD2CTrial:" Subscribe Now!",noProviderD2Cspan:"TV provider not listed?",noProviderD2Clink:"Subscribe directly",d2cConnection:"Sign In",d2cColor:"#b90a0a"},error:{error_p2:"Please try again and if the problem persists, please contact your television service provider.","error-00":"There has been a technical problem!","error-01":"There has been a network issue!","error-60-p1":"Sorry, your request could not go through at this time.","error-60-p2":"Please try again later.","error-30-p1":"We have detected that your browser is blocking third party cookies which are needed for authentication. You are required to enable third party cookies.","error-30-p2a":"Provided","error-30-p2b":"are the tips on how to accomplish this.","error-30-p3a":"You are currently using the IOS 13 operating system on an Apple device. At this time, iOS 13 may not support TV/Video sign-in on your mobile browser. We are working to resolve the issue as quickly as possible. In the meantime, you can try again, watch in our app which you can download ","error-30-p3b":" or use a desktop browser to register a Samsung TV, Apple TV Gen3 or other device","error-30-urlText":"here","error-30-chrome-p1":"Please access your Chrome settings to validate the following:","error-30-chrome-li1":"Go to the General Settings section.","error-30-chrome-li2":"Ensure that the option “Allow all cookies” is selected.","error-30-chrome-li3":"Close the Chrome browser tab that is currently open and try log in again.","error-30-firefox-p1":"Please access your Firefox settings by going into “Options” and click on the “Privacy & Security” section, where you will have a list of items related to Content Blocking.","error-30-firefox-li1":"Make sure you have the “Custom” option selected and that you are not blocking “Trackers” and not blocking “Cookies”.","error-30-firefox-li2":"Close the Firefox browser tab that is currently open and try log in again.","error-30-apple-p1":"Please access your Safari settings to validate the following:","error-30-apple-li1":"Go to Settings and select Safari and then go to Privacy & Security section.","error-30-apple-li2":'Ensure "Prevent Cross-Site Tracking" is turned off.',"error-30-apple-li3":'Ensure "Block All Cookies" is turned off.',"error-30-apple-li4":'Ensure "Do Not Track" is turned off.',"error-30-apple-li5":"Close the Safari browser tab that is currently open and try log in again.","error-30-other-p1":"Please access your browser setting to validate the following:","error-30-other-li1":"Make sure you are allowing cookies and intersite tracking.","error-30-other-li2":"Close the browser tab that is currently open after changing your settings and try log in again.","error-30-conclusion1":"We recommend that you also clear your cookies and browsing history before you try again.","error-30-conclusion2":"If you're still experiencing issues to log in, please try with a different browser.","authzNo-p1-left":"To watch video, you must be subscribed to ","authzNo-p1-right":" with your television service provider.","authzNo-p2":"If you already subscribe to this channel and are still experiencing difficulties, please contact your service provider.","authzNo-multi-top":"To enjoy thousands of hours of spectacular content from these channels, please contact your service provider today to subscribe.","authzNo-multi-bottom":"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider.","error-68-p1":"You have an invalid postal code, unfortunately we can't process further.","error-68-p2":"Please contact your service provider.","EBAF02-activate-p1":"Alert: You are in private browsing mode.","EBAF02-activate-p2":"In order to continue, you need to disable private browsing.For steps to disable private browsing, please visit FAQs on the app or '?' on this screen."},success:{signin:"You have successfully signed into","cross-site-signin":"Video Sign In successful.",successMultiAccessto:"Which provides you access to the following channel(s):",successMultiNoAccessto:"You are currently not subscribed to the following channel(s):",contactTV:"If you are already a subscriber and are experiencing difficulties, please contact your TV service provider."},faq:{subTitle:"FAQ",backLinkText:"< BACK"},frontDoor:{fdTitle:"START STREAMING!",fdText:"Live stream sports in HD on your favourite devices.",button_fdSubscribe:"SUBSCRIBE NOW",button_fdSignInQuestion:"ALREADY A SUBSCRIBER?",button_fdSignInAnswer:"SIGN IN"},authZNoMessage:{subscribeUrlText:e?"Close":"Update Account",message_l1:"We noticed you don't have a valid subscription.",message_l2:e?"Visit www.tsn.ca/account to update your account and add payment details.":"Please update your payment details to continue watching TSN DIRECT."}}:void 0};return{init:function(){!1,t=null,void 0},getConfig:function(){return u.log("admin","getting brand config"),null===t?null===(t=u.storage.getSession("brandConfig"))?e():(u.log("admin","reading brandConfig from session",t),l(),Promise.resolve()):(u.log("admin","reading brandConfig from cache",t),l(),Promise.resolve())},brandBduList:function(){return t.brand.bdus},resourceIds:function(){var e=[];for(var r in t.brand.akamai.resourceID)e.push(r);return e},getAuthZResources:function(){return t.brand.akamai.resourceID},resourceIdsLogos:function(){return t.brand.akamai.resourceId},getBrandTrackingSuites:function(){return t.brand.tracking.rsid},getBduFromName:function(e){for(var r=0,o=t.brand.bdus.length;r<o;r++)if(t.brand.bdus[r].name===e)return t.brand.bdus[r];return null},getResourceName:function(e){if(t.brand.akamai.resourceID[e]){var r=t.brand.akamai.resourceID[e].displayName;return void 0!==r?r:e}return e}}}})}(BmAuth,jQuery,ais_client);
!function(W,L,k){"use strict";W.define({name:"AuthN",type:"module",value:function(u){var e,t,o,i,n,s,a,d=!1,g=!1,r=!1,l={status:void 0,signInBduName:null,signInBduLogoSrc:null,signInBdu:null,ttl:null},c={_startTime:null,_endTime:null,duration:null,start:function(){this._startTime=Date.now()},stop:function(){this._endTime=Date.now(),this.duration=this._endTime-this._startTime},isIdentityWarningTreshold:function(){return this.duration>u.constants.timer.identityWarningTreshold},isBounceWarningTreshold:function(){return this.duration>u.constants.timer.bounceWarningTreshold},isInitWarningTreshold:function(){return this.duration>u.constants.timer.initWarningTreshold},isRegisterWarningTreshold:function(){return this.duration>u.constants.timer.registerWarningTreshold},reset:function(){this._startTime=null,this._endTime=null,this.duration=null}},h=null,m=function(n){return k.loginFormat(n,u.constants.akamaiConfig.responseTarget)},f=function(n){return!(-1===u.constants.accepted.messageOrigin.authn.indexOf("//"+n.origin.replace(/.*?:\/\//g,""))||!function(n){try{JSON.parse(n)}catch(n){return!1}return!0}(n.data))},B=function(n,t,e,r){try{t.stopImmediatePropagation();var i=L(n),a=m(i.data("urn"));return o=i,l.signInBduName=o.data("name"),"BellMG"===l.signInBduName?l.signInBduLogoSrc=o.data("img"):l.signInBduLogoSrc=o.find("img").attr("src"),u.storage.set("signInBduName",l.signInBduName),u.tracking.onBduSelected(l.signInBduName),u.view.loadBduLoginIframe(a,e,r),s=a,Promise.resolve()}catch(n){return Promise.reject(n)}var o},v=function(){"function"==typeof i&&(window.removeEventListener("message",i,!1),i=void 0);var n=new Promise(function(e,r){i=function(n){if(f(n)&&!0!==g)try{var t=JSON.parse(n.data);if("aisRedirect"!==t.messageSender)return;if(u.log("authn","akamai authn redirect message recived:"),!function(n){var t=pako.inflateRaw(L.base64.decode(n),{to:"string"});t=t.slice(12,t.length-2),a=jQuery.parseJSON(t),y(a);var e="logout_result"!==a._type&&a.authenticated;return u.log("authn","akamai authentication redirect responnce isValid: "+e,a),e}(t.response))throw new W.Error("Akamai authentication redirect failed as the response did not indicate the user was authenticated (responseType: "+a._type+", authenticated:"+a.authenticated+" ","EBAE02");g=!0,S(),u.setLastAisCallTime(),e()}catch(n){r(n)}},window.addEventListener("message",i,!1)});return n.then(function(){window.removeEventListener("message",i,!1)}).catch(function(){window.removeEventListener("message",i,!1)}),n},A=function(){try{if(null===l.status)return null;if(void 0!==l.status)return l.status;var n=u.storage.get("authn");return null!==n?(u.log("authn","isAuthn returns "+n+" after reading from storage"),n):null!==(n=u.storage.getSession("authn"))?(u.log("authn","isAuthn returns "+n+" after reading from session"),n):(u.storage.reset(),u.log("authn","isAuthn returns null as storage return null"),null)}catch(n){return u.errorhandler.onWarning(new W.Warning("authN._isAuthenticatedLocal(), returns null due to an exception. (error: "+n+")","WBAA03")),null}},T=function(){var n=new Promise(function(r,i){var a=setTimeout(function(){i(new W.Error("Akamai identity request timeout (duration: "+u.constants.timer.identityTimeoutTreshold+")","EBAD02"))},u.constants.timer.identityTimeoutTreshold);c.start(),k.assignhandler("identity",function(n,t){try{if(clearTimeout(a),c.stop(),c.isIdentityWarningTreshold()&&u.errorhandler.onWarning(new W.Warning("Akamai identity request duration took "+c.duration+" ms","WBAD02",{duration:c.duration})),u.log("authn","identity recieved in "+c.duration+" ms",t),I((h=t).identity.attributes.postal_code))u.setLastAisCallTime(),u.storage.set("aisuid",h.identity.aisuid),r(t);else{var e=new W.Error("Akamai identity token has an invalid postal code (postalCode: "+h.identity.attributes.postal_code+")","EBAC04");i(e)}}catch(e){i(W.Error.fromError(e))}}),t=function(n){u.log("authn","identity resolved with null as Akamai logout_result event was listened"),clearTimeout(n),c.stop(),u.trackLogoutResult(),r(null)},u.event.addListener("logout_result",t),k.identity()});return n.then(function(){u.event.removeListener("logout_result",t)},function(){u.event.removeListener("logout_result",t)}),n},I=function(n){if(Array.isArray(n)&&(n=n[0]),null==n)return!1;var t=new RegExp("^[ABCEGHJKLMNPRSTVXY]{1}\\d{1}[A-Z]{1}$","i");return n=n.trim().substring(0,3),!!t.test(n)},w=function(a){var n=new Promise(function(e,r){var i=setTimeout(function(){r(new W.Error("Akamai register device request timeout (duration: "+u.constants.timer.registerTimeoutTreshold+")","EBAD07"),a)},u.constants.timer.registerTimeoutTreshold);d=!0,c.start(),k.assignhandler("device",function(n,t){try{clearTimeout(i),c.stop(),c.isRegisterWarningTreshold()&&u.errorhandler.onWarning(new W.Warning("Akamai register device request duration took "+c.duration+" ms","WBAD06",{duration:c.duration})),u.log("authn","register device recieved in "+c.duration+" ms",t),u.setLastAisCallTime(),e({type:"activated",response:t})}catch(n){r(W.Error.fromError(n),a)}}),o=function(n){u.log("authn","register device fullfiled with incorrectCode as Akamai logout_result event was listened"),clearTimeout(i),c.stop(),u.tracking.inCorrectCode(a),e({type:"incorrectCode",response:n})},u.event.addListener("logout_result",o),k.registerDevice(a)}),t=function(){u.event.removeListener("logout_result",o),d=!1};return n.then(t,t),n},p=function(){return new Promise(function(r,i){u.log("authn","requesting akamai init");var a=setTimeout(function(){i(new W.Error("Akamai init request timeout (duration: "+u.constants.timer.initTimeoutTreshold+")","EBAD06"))},u.constants.timer.initTimeoutTreshold);function n(n,t){try{if(clearTimeout(a),c.stop(),c.isInitWarningTreshold()&&u.errorhandler.onWarning(new W.Warning("Akamai init request duration took "+c.duration+" ms","WBAD05",{duration:c.duration})),u.log("authn","init recieved in "+c.duration+" ms",t),!0===t.authenticated){for(var e in t.idps)if(t.idps.hasOwnProperty(e)){l.signInBduName=t.idps[e].name,u.storage.set("signInBduName",l.signInBduName),u.tracking.onBduSelected(l.signInBduName),u.log("authn","getting bduname:"+l.signInBduName+" after cross site authentciation");break}y(t)}r(t.authenticated)}catch(n){i(W.Error.fromError(n))}}c.start(),k.assignhandler("init",n),k.assignhandler("chooser",n),k.init()})},S=function(){u.storage.set("signinTime",Date.now())},y=function(n){l.ttl=n.expires-n.servertime,u.log("authn","authn TTL is set",l.ttl),l.ttl-=Math.floor(5*l.ttl/100)};return{init:function(){e=this,l.status=A(),u.log("authn","at init isAuthenticated:",l.status),0,r=u.storage.get("updateTriggerFlag")},handleAkamaiRedirect:function(){return r=2,"CanadaSub"!==l.signInBduName&&"RDSCanadaSub"!==l.signInBduName&&"TSNCanadaSub"!==l.signInBduName||(r=0),function t(e){return v().catch(function(n){return e<r?(u.errorhandler.onWarning(new W.Warning("Akamai authentication redirect failed as warning on "+(e+1)+" try. (error:"+n+")","warning-90")),u.view.loadBduLoginIframeHidden(s),t(++e)):Promise.reject(n)})}(0);var r},setBduUrn:function(n){s=n},getBduAkamaiSource:function(n){return m(n)},resetJsCache:function(){l={status:r=g=d=!1,signInBduName:null,signInBduLogoSrc:null,signInBdu:null,ttl:null},h=null},handleAkamaiLogoutResult:function(){k.assignhandler("logout_result",function(n,t){!1===d&&e.forceSignOutLocal(),u.event.trigger("logout_result",t)})},getIdentity:function(){return null!==h?Promise.resolve(h):(r=2,function t(e){return T().catch(function(n){return e<r&&"EBAC04"!==n.code?(u.errorhandler.onWarning(new W.Warning("Akamai identity request failed as warning on "+(e+1)+" try. (error:"+n+")","WBAE02")),t(++e)):Promise.reject(n)})}(0));var r},forceSignOut:function(){u.log("authn","user is forced signed out"),u.event.trigger("onSignOutForced"),k.logout(),this.changeAuthnStatus(!1)},forceSignOutLocal:function(){null===l.status&&!0!==l.status||(u.log("authn","user is force signed out (local)"),u.event.trigger("onSignOutForced"),this.changeAuthnStatus(!1))},signOut:function(){u.log("authn","user signed out"),k.logout(),this.changeAuthnStatus(!1)},isAuthenticatedLocal:function(){return A()},isAuthenticatedGlobal:function(){return r=2,function t(e){return p().catch(function(n){return e<r?(u.errorhandler.onWarning(new W.Warning("Akamai init request failed as warning on "+(e+1)+" try. (error:"+n+")","WBAE06")),t(++e)):Promise.reject(n)})}(0);var r},changeAuthnStatus:function(n){u.vars.differed.isAuthenticated=null,u.log("authn","user authentication status changed from "+l.status+" to "+n),null!==l.status&&l.status!==n?(l.status=n,u.tracking.onAuthnChanged(n)):l.status=n,!0===n?u.storage.set("authn",!0):(u.storage.reset(),u.storage.setSession("authn",!1),g=!1,u.resetJsCache())},handleBduClick:function(r,i){return new Promise(function(t,e){n=function(n){B(this,n,r,i).then(t).catch(e)},u.event.addListenerToDom("click",".bmauth-signin-logo",n),u.event.addListenerToDom("click",".auth9_btnBMG",n)})},getSignInBduName:function(){try{return null!==l.signInBduName||(l.signInBduName=u.storage.get("signInBduName"),null===l.signInBduName&&u.errorhandler.onWarning(new W.Warning("Sign-in Bdu name was null when it was requested","WBAA04"))),l.signInBduName}catch(n){return u.errorhandler.onError(n),null}},setSignInBduInfo:function(n){for(var t=!1,e=JSON.parse(sessionStorage.BMAuth_brandConfig).brand.bdus,r=0;r<e.length;r++)e[r].name===n&&(t=u.constants.url.assets+e[r].logos.md);l.signInBduName=n,l.signInBduLogoSrc=t,u.storage.set("signInBduName",n),u.storage.set("signInBduLogoSrc",t)},getSignInSelectedLogo:function(){if(!l.signInBduLogoSrc||null===l.signInBduLogoSrc){var n=u.storage.get("signInBdu");null!==n?l.signInBduLogoSrc=n.logo:u.errorhandler.onWarning(new W.Warning("Could not retrieve the user sign-in Selected BDU logo (bduName: "+l.signInBduName+")","WBAA05"))}return l.signInBduLogoSrc},updateAuthnTTL:function(){u.log("authn","updating authentication TTL");var n=u.storage.get("authn");u.storage.set("authn",n)},getSignInBdu:function(){try{return null!==l.signInBdu||(l.signInBdu=u.storage.get("signInBdu")),l.signInBdu}catch(n){return u.errorhandler.onError(n),null}},setSignInBdu:function(n){try{null===n&&u.errorhandler.onWarning(new W.Warning("Setting sign in bdu in storage failed as the passed argument bdu was null","WBAZ00")),l.signInBdu=n,u.storage.set("signInBdu",n)}catch(n){u.errorhandler.onError(n)}},getAuthnTTL:function(){try{return null!==l.ttl?l.ttl:u.constants.cache.authn}catch(n){u.errorhandler.onError(n)}},registerDevice:function(n){return r=n,i=2,function t(e){return w(r).catch(function(n){return e<i?(u.errorhandler.onWarning(new W.Warning("Akamai register device request failed as warning on "+(e+1)+" try. (error:"+n+")","WBAE07")),t(++e)):Promise.reject(n)})}(0);var r,i},flagAccountUpdate:function(n){(r=n)?u.storage.set("updateTriggerFlag",r,5e4):(u.storage.remove("updateTriggerFlag"),u.log("account","flag true for update account"))},isAccountUpdateFlaggedInTime:function(){r&&(!0!==u.storage.get("updateTriggerFlag")&&this.flagAccountUpdate(!1));return r}}}})}(BmAuth,jQuery,ais_client);
!function(i,n,e){"use strict";var t=function(e){this.STORAGE_NAME="authz_",this.api=e,this._authorizedResources=[],this._authZtokens=[],this._authorizedResources=this.api.storage.get("authorizedResourceIDs"),null===this._authorizedResources&&(this._authorizedResources=[])};t.prototype.isAuthZWarningTreshold=function(e){return e>this.api.constants.timer.authZWarningTreshold},t.prototype._getAuthzRequestUrn=function(e){return this.api.constants.url.aisBase+this.api.config.brandUrn+"/identity/resourceAccess/"+e+"?format=jsonp&responsefield=authz"+e},t.prototype._checkInconsistentAuthz=function(e,t){var r=this.STORAGE_NAME+"_check_"+e,a=this.api.constants.cache.authzConsCheck,o=this.api.getAisuid(),s=this.api.storage.get(r,"BmAuthPersis");if(null!==s&&null!==o&&s.aisuid===o&&s.authz.authorization!==t.authorization){var u=null!==s.timestamp?Math.round((Date.now()-s.timestamp)/6e4):"Nan",n="Authz inconsistency: "+t.authorization+" at "+Date.now()+" previously "+s.authz.authorization+" at "+s.timestamp+" ("+u+" minutes)";this.api.errorhandler.onWarning(new i.Warning(n,"WBAE08"))}this.api.storage.set(r,{authz:t,aisuid:o,timestamp:Date.now()},a,"BmAuthPersis")},t.prototype._handleAuthZQueryJob=function(s){var u=this;return new Promise(function(r,a){var e=u.api.storage.get(u.STORAGE_NAME+s);if(null!==e)u.api.log("authz","got authz token from the cache",e),r(e);else{var t={contentType:"application/json",url:u._getAuthzRequestUrn(s),timeout:u.api.constants.timer.authZTimeoutTreshold,dataType:"jsonp",jsonpCallback:"authz"+s,crossDomain:!0,cache:!0},o=new u.api.Timer;o.start(),n.ajax(t).done(function(e){try{switch(o.stop(),u.isAuthZWarningTreshold(o.duration)&&u.api.errorhandler.onWarning(new i.Warning("Akamai authz request for "+s+" duration took "+o.duration+" ms.","WBAD04",{duration:o.duration})),u.api.log("authz","response recieved in "+o.duration+" ms",e),e._type){case"authz_query":u.api.isD2cUser(!0)&&u.api.log("authz","authz is cached with d2c duration");var t=u.api.isD2cUser(!0)?u.api.constants.cache.authzD2c:u.api.constants.cache.authz;u.api.storage.set(u.STORAGE_NAME+s,e,t),u.api.setLastAisCallTime(),u._checkInconsistentAuthz(s,e),r(e);break;case"logout_result":u.api.log("authz","authz resolved with null as Akamai logout_result event was listened"),u.api.trackLogoutResult(),u.api.forceSignOutLocal(),r(null);break;default:throw new i.Error("The "+e._type+" is anunexpeced response type for authz request","EBAE02")}}catch(e){a(i.Error.fromError(e))}}).fail(function(e,t){o.stop(),a(new i.Error("Akamai authz request failed timeout/error. "+JSON.stringify(e)+" "+t,"EBAD04"))})}})},t.prototype._handleAuthZQuery=function(e){var a=this;return function t(r){return a._handleAuthZQueryJob(e).then(function(e){var t;return null!==e?(-1===a._authZtokens.indexOf(e)&&a._authZtokens.push(e),!0===e.authorization?(-1===a._authorizedResources.indexOf(e.resource)&&a._authorizedResources.push(e.resource),a.api.log("authz","authorized resource",a._authorizedResources),(t={authZ:!0,authZ_resources:{}}).authZ_resources[e.resource]=!0,t.authz_tokens={},t.authz_tokens[e.resource]=e):((t={authZ:!1,authZ_resources:{}}).authZ_resources[e.resource]=!1,e.message&&(t.message=e.message)),Promise.resolve(t)):Promise.resolve(null)}).catch(function(e){return r<2?(a.api.errorhandler.onWarning(new i.Warning("Akamai authz request for failed as warning on "+(r+1)+" try. (error:"+e.message+")","WBAE04")),t(++r)):Promise.reject(e)})}(0)},t.prototype._handleAuthZQueryListSeperate=function(s){var t=[],u=this;return s.forEach(function(e){t.push(u._handleAuthZQuery(e))}),Promise.all(t).then(function(e){u.api.log("authz","all resouces have been received");for(var t=0,r=s.length,a=0,o={authZ:void 0,authZ_resources:{},authz_tokens:{}};t<r;t++)n.extend(o.authZ_resources,e[t].authZ_resources),n.extend(o.authz_tokens,e[t].authz_tokens),!0===e[t].authZ&&a++;return o.authZ=0!==a,Promise.resolve(o)}).catch(function(e){return Promise.reject(e)})},t.prototype._authzResources=function(e){return e instanceof Array?1<e.length?this._handleAuthZQueryListSeperate(e):1===e.length?this._handleAuthZQuery(e[0]):Promise.reject(new i.Error("Brand Resource_Ids count was not greater or equall to 1.","EBAC05")):Promise.reject(new i.Error("Brand Resource_Ids must be instanceof Array","EBAC05"))},t.prototype.resetJsCache=function(){this._authorizedResources=[],this._authZtokens=[]},t.prototype.authorizeResources=function(e){var t=this._authzResources(e),r=this;return t.then(function(e){r.api.storage.set("authorizedResourceIDs",r._authorizedResources)}),t},t.prototype.isResourceIdInAuthorizedList=function(e){var t=-1===this._authorizedResources.indexOf(e.Authentication.Resources[0].ResourceCode);return this.api.log("video","return "+t+" after checking if the resource ID is authz (video.id: "+e.Id+")"),t},t.prototype.getAuthzTokens=function(){return this._authZtokens},t.prototype.getAuthzWithLogo=function(){},i.newDefine({name:"Authz",type:"module",value:t})}(BmAuth,jQuery,ais_client);
!function(t){"use strict";var e=function(){};e.prototype.start=function(){this._startTime=Date.now()},e.prototype.stop=function(){this._endTime=Date.now(),this.duration=this._endTime-this._startTime},e.prototype.reset=function(){this._startTime=null,this._endTime=null,this.duration=null},t.newDefine({name:"Timer",type:"api-method",value:e})}(BmAuth);
!function(d,m){"use strict";d.define({type:"module",name:"TpCookie",value:function(n){var a=null,s={_startTime:null,_endTime:null,duration:null,timeOutTimer:null,start:function(){this._startTime=null,this._endTime=null,this.duration=null,this._startTime=Date.now()},stop:function(){this._endTime=Date.now(),this.duration=this._endTime-this._startTime},reset:function(){this._startTime=null,this._endTime=null,this.duration=null}},u={iframe:{set:n.constants.url.tpCookieSet,set_id:"tp-cookie-set",verify:n.constants.url.tpCookieVerify,verify_id:"tp-cookie-verify"},isSupported:null},e=function(){var i,e=function(){window.removeEventListener("message",i,!1),a=!0,n.view.remove("#"+u.iframe.set_id),n.log("tpcookie","removed the set tpCookie iframe"),n.view.remove("#"+u.iframe.verify_id),n.log("tpcookie","removed the verify tpCookie iframe")},t=new Promise(function(r,o){var e,t;s.timeOutTimer=setTimeout(function(){o(new d.Error("3rd party cookie check timeout (duration: "+n.constants.timer.thirdPartyCookieTimeout+")","EBAD05"))},n.constants.timer.thirdPartyCookieTimeout),s.start(),i=function(e){var t;if(t=e,-1!==n.constants.accepted.messageOrigin.tpCookie.indexOf("//"+t.origin.replace(/.*?:\/\//g,"")))try{var i=JSON.parse(e.data);if("BmAuthTPC"!==i.messageSender||!0===a)return;clearTimeout(s.timeOutTimer),s.stop(),n.log("tpcookie","message recived in "+s.duration+"ms",i),null!==i.data.isSupported&&(!0===i.data.isSupported?u.isSupported=!0:(u.isSupported=!1,null!==i.data.read&&n.errorhandler.onWarning(new d.Warning("Despite 3rd party cookie being read its value was not equal to what was planted","WBAA06")))),n.log("tpcookie","3rd party cookie check is resolved (isSupported: "+u.isSupported+")"),r(u.isSupported)}catch(e){o(d.Error.fromError(e))}},window.addEventListener("message",i,!1),e=m("<iframe />"),t=u.iframe.set+"?gl=1&"+(new Date).getTime(),e.attr("src",t).hide(),e.attr("id",u.iframe.set_id),n.view.insert("body",e),n.log("tpcookie","added the set tpCookie iframe"),setTimeout(function(){var e,t;e=m("<iframe />"),t=u.iframe.verify+"?gl=1&"+(new Date).getTime(),e.attr("src",t).hide(),e.attr("id",u.iframe.verify_id),n.view.insert("body",e),n.log("tpcookie","added the verify tpCookie iframe")},1e3)});return t.then(e,e),t};return{checkTpCookieEnabled:function(){try{return null!==u.isSupported&&!0===u.isSupported?(n.log("tpcookie","CACHED: 3rd party cookie check is resolved (isSupported: "+u.isSupported+")"),Promise.resolve(u.isSupported)):(r=2,function t(i){return e().catch(function(e){return i<r?(n.errorhandler.onWarning(new d.Warning("tpCookie request failed as warning on "+(i+1)+" try (error:"+e+")","WBAE05")),t(++i)):Promise.resolve(!1)})}(0))}catch(e){return Promise.reject(d.Error.fromError(e))}var r}}}})}(BmAuth,jQuery);
!function(y,e,b){"use strict";y.define({type:"controller",name:"main",value:function(d,n){var l,h,f,i,g,e=null,t=null,r=function(e,t,n){for(var o=JSON.parse(JSON.stringify(e)),a=function(e){switch(e){case"cravetv":case"rds":case"tsn":return!0;default:return!1}}(d.config.brand),i=0,r=o.length;i<r;i++)if(!1!==o[i].inChooser)if(o[i].logos&&o[i].logos[n]&&(o[i].logo=t+o[i].logos[n]),Boolean(a)||"BellMG"!==o[i].name)if("CanadaSub"!==o[i].name)if("RDSCanadaSub"!==o[i].name)if("TSNCanadaSub"!==o[i].name);else{switch(d.vars.d2cLogin=o[i].logo,d.constants.authSetting.environment){case"dev":d.vars.d2cUrn="urn:tsn:ca:idp:dev";break;case"qa":d.vars.d2cUrn="urn:tsn:ca:idp:qa";break;case"staging":d.vars.d2cUrn="urn:tsn:ca:idp:staging";break;default:d.vars.d2cUrn="urn:tsn:ca:idp:prod"}o.splice(i,1),r--,i--}else{switch(d.vars.d2cLogin=o[i].logo,d.constants.authSetting.environment){case"dev":d.vars.d2cUrn="urn:rds:ca:idp:dev";break;case"qa":d.vars.d2cUrn="urn:rds:ca:idp:qa";break;case"staging":d.vars.d2cUrn="urn:rds:ca:idp:staging";break;default:d.vars.d2cUrn="urn:rds:ca:idp:prod"}o.splice(i,1),r--,i--}else{switch(d.vars.d2cLogin=o[i].logo,d.constants.authSetting.environment){case"dev":d.vars.d2cUrn="urn:cravetv:ca:idp:dev";break;case"qa":d.vars.d2cUrn="urn:cravetv:ca:idp:qa";break;default:d.vars.d2cUrn="urn:cravetv:ca:idp:prod"}o.splice(i,1),r--,i--}else d.vars.bellmediaLogo=o[i].logo,o.splice(i,1),r--,i--;else o.splice(i,1),r--,i--;return o},v=function(e){return!!d.config.options.extraData&&-1!==d.config.options.extraData.indexOf(e)},p=function(e,t){var n={authorized:[],notAuthorized:[]},o=JSON.parse(JSON.stringify(e));for(var a in o)o[a].authorized=t[a],o[a].logo1=d.constants.url.assetsRoot+o[a].logo1,o[a].logo2=d.constants.url.assetsRoot+o[a].logo2,!0===t[a]?n.authorized.push(o[a]):n.notAuthorized.push(o[a]);return n},c=function(s,u){return new Promise(function(i,e){(u=void 0!==u?u:{}).showSuccess=void 0===u.showSuccess||u.showSuccess,u.autoCloseOnSuccess=void 0===u.autoCloseOnSuccess||u.autoCloseOnSuccess;var r,c,t=f.authorizeResources(l.resourceIds()),n=h.getIdentity();Promise.all([t,n]).then(function(e){var t,n,o=e[0],a=e[1];if(null===o||null===a)throw new y.Error("After successful  authn step, identity or authz request returned a logout_result response","EBAE07");r={authenticated:!!w()||o.authZ,passedAuthNStep:!0,passedAuthZStep:o.authZ,authZ_resources:o.authZ_resources,identity_token:a},null===(n=h.getSignInBdu())&&(null!==(t=h.getSignInBduName())&&(n=l.getBduFromName(t)),null!==n?(n.logo||(n.logo=d.constants.url.assets+n.logos.md),n.logos&&delete n.logos,delete n.id,h.setSignInBdu(n)):d.errorhandler.onWarning(new y.Warning("Could not find the signin bdu from the signin bduname ("+t+")","WBAC03"))),d.log("authn","selected bdu",n),c=n,h.changeAuthnStatus(r.authenticated),d.event.removeListener("onModalClose",g),r.authenticated?(r.type="fullfiled_authenticated",v("bdu")&&(null!==c?(r.signInBdu=JSON.parse(JSON.stringify(c)),delete r.signInBdu.id,delete r.signInBdu.inChooser,delete r.signInBdu.customAuthzMessage):r.signInBdu=null),v("authz")&&(r.authzTokens=f.getAuthzTokens()),!1===s&&!0===u.showSuccess&&(!1===d.config.isMultiAuthzFlow?!1===r.passedAuthZStep&&w()&&!u.fromCanPlayVideo?(d.view.displayD2CAuthZNoMessage(),u.autoCloseOnSuccess=!1):d.view.displaySuccessMessage(h.getSignInSelectedLogo()):d.view.displaySuccessMessageMultiAuthz(h.getSignInSelectedLogo(),p(l.getAuthZResources(),o.authZ_resources))),u.autoCloseOnSuccess&&(u.showSuccess?!1===d.config.isMultiAuthzFlow?d.modal.close(d.constants.timer.closeModalOnSuccess):d.modal.close(d.constants.timer.closeModalOnSuccessMulti):d.modal.close(0))):(r.type="fullfiled_authZNo",!1===s?h.forceSignOut():h.forceSignOutLocal(),!1===s&&(!1===d.config.isMultiAuthzFlow?w()?d.view.displayD2CAuthZNoMessage():null!==c&&!0===c.customAuthzMessage&&o.message?d.view.displayACustomuthZNoMessage(o.message):d.view.displayAuthZNoMessage(d.config.brand):d.view.displayAuthZNoMessageMultiAuthz(h.getSignInSelectedLogo(),p(l.getAuthZResources(),o.authZ_resources)))),i(!1===s?r:r.authenticated)}).catch(e)})},s=function(i){return new Promise(function(o,e){var a,t=f.authorizeResources(i),n=h.getIdentity();Promise.all([t,n]).then(function(e){var t=e[0],n=e[1];null===t||null===n?o({authenticated:!1,authorized:!1,identity_token:null,authZ_token:null,type:"fulfilled_logout"}):(!0===t.authZ?(a={authenticated:!0,authorized:!0,authZ_token:t.authz_tokens[i[0]],identity_token:n,type:"fulfilled_authorization"},d.log("canPlayVideo","video authorized after authz check")):(a={authenticated:!0,authorized:!1,authZ_token:null,identity_token:n,type:"fulfilled_authorization"},d.modal.display().then(function(){w()?d.view.displayD2CAuthZNoMessage():d.view.displayAuthZNoMessage(l.getResourceName(i[0]))}),d.log("canPlayVideo","video not authorized after authz check")),o(a))}).catch(e)})},u=function(e){if("object"!=typeof e)throw new y.Error("Video must be of type Object (video: "+e+")","EBAB03");if(!e.Authentication)throw new y.Error("Video.Authentication was missing form the video object (video.Id: "+e.Id+")","EBAC01");if("boolean"!=typeof e.Authentication.Required)throw new y.Error("Video.Authentication.Required was missing form the video object (video.Id: "+e.Id+")","EBAC02");if(!0===e.Authentication.Required&&0===e.Authentication.Resources.length)throw new y.Error("Video did not have Resource IDs while had authentication required (video.Id: "+e.Id+")","EBAC03")},a=function(e){return u(e),!1===e.Authentication.Required?(d.log("videoLock","return false as the video did not need authenticated check (video.id: "+e.Id+")"),!1):h.isAuthenticatedLocal()?f.isResourceIdInAuthorizedList(e):(d.log("videoLock","return true as user was not authenticated (video.id: "+e.Id+")"),!0)},o=function(e){e&&(null===d.storage.getSession("onAlreadyAuthenticated")&&(d.tracking.onAlreadyAuthenticated(),d.storage.setSession("onAlreadyAuthenticated",!0)))},m=function(){return d.log("authn","authentication status is requested"),null===d.vars.differed.isAuthenticated&&(d.vars.differed.isAuthenticated="in_process",e=new Promise(function(t,n){d.ready.then(function(){var e=h.isAuthenticatedLocal();null!==e?t(e):h.isAuthenticatedGlobal().then(function(e){!0===e?(d.log("authn","isAuthenticated returns true after checking it with Akamai"),c(!0).then(t).catch(function(e){d.errorhandler.onError(e),h.forceSignOutLocal()})):(h.changeAuthnStatus(!1),d.log("authn","isAuthenticated returns false after checking it with Akamai"),t(!1))}).catch(n)}).catch(n)})),e.catch(function(e){d.errorhandler.onError(e)}),e},A=function(a){var e=new Promise(function(n,o){d.ready.then(function(){if(h.isAuthenticatedLocal()){d.errorhandler.onWarning(new y.Warning("BmAuth.handleSignIn() was called when the user was already authenticated","WBAB06")),d.tracking.onAuthnChanged(h.isAuthenticatedLocal());n({authenticated:!0,passedAuthNStep:!0,passedAuthZStep:!0,authZ_resources:null,identity_token:null,type:"fullfiled_authenticated"})}else d.modal.display().then(function(){d.tracking.onSignInAttempt(),g=function(){n({authenticated:!1,passedAuthNStep:!1,passedAuthZStep:!1,authZ_resources:{},identity_token:null,type:"userClose"})},d.event.addListener("message",S),d.event.addListener("onModalClose",g),d.ui.shouldCheckThirdPartyCookiesAllowed(d.config.options.fromWebview)&&i.checkTpCookieEnabled().then(function(e){!1===e&&o(new y.Error("3rd Party cookie was disabled for the user","EBAF01"))});var e=l.brandBduList(),t=d.constants.url.assets;e=r(e,t,"md"),d.view.displayInitialView(e,h.getBduAkamaiSource(d.vars.d2cUrn),a.showChooser),h.handleBduClick(e,h.getBduAkamaiSource(d.vars.d2cUrn)).catch(o),"cravetv"!==d.config.brand&&"rds"!==d.config.brand&&"tsn"!==d.config.brand||(d.event.addListenerToDom("click",".bmauth-free-trial",function(e){n({authenticated:!1,passedAuthNStep:!1,passedAuthZStep:!1,authZ_resources:{},identity_token:null,type:"triggerSubscribe"}),d.modal.close(10)}),d.event.addListener("onUpdateAccountClick",function(){h.flagAccountUpdate(!0)})),h.handleAkamaiRedirect(h.getBduAkamaiSource()).then(function(){c(!1,a).then(n).catch(o)}).catch(o)}).catch(o)}).catch(o)});if(!0===d.config.options.fromWebview&&d.event.addListener("onModalClose",function(){d.event.broadcastForApp({cmd:"close",type:"userClose"})}),e.then(function(e){!0===d.config.options.fromWebview&&function(e){switch(e.type){case"fullfiled_authenticated":case"fullfiled_authZNo":e.cmd=null;break;case"userClose":e.cmd="close";break;default:e.cmd=null}d.event.broadcastForApp(e)}(e)}).catch(function(e){d.event.removeListener("onModalClose",g),d.errorhandler.onError(e),h.forceSignOut(),!0===d.config.options.fromWebview&&function(e){if("EBAB05"!==e.code){var t={cmd:null,type:"error"};t.error={code:e.code,message:e.message},d.log("webview","error occured",t,"warning"),d.event.broadcastForApp(t)}}(e)}),d.config.options.fulfillOnClose){var o=new Promise(function(e,t){var n=function(){e(),d.event.removeListener("onModalClose",n)};d.event.addListener("onModalClose",n)});return new Promise(function(t,n){Promise.all([e,o]).then(function(e){t(e[0])}).catch(function(e){var t=function(){n(e),d.event.removeListener("onModalClose",t)};d.event.addListener("onModalClose",t)})})}return e},S=function(e){if("earlyBroadcast"==e.data){d.event.broadcastForApp({authenticated:!0,passedAuthNStep:!0,passedAuthZStep:!0,authZ_resources:null,identity_token:null,type:"fullfiled_authenticated"})}},w=function(){var e=h.getSignInBduName();return"CanadaSub"===e||"cravetvqa"===e||"cravetv"===e||"RDSCanadaSub"===e||"RDSCanadaSubDev"===e||"RDSCanadaSubQA"===e||"RDSCanadaSubStaging"===e||"TSNCanadaSub"===e||"TSNCanadaSubDev"===e||"TSNCanadaSubQA"===e||"TSNCanadaSubStaging"===e};return{init:function(){var e=new Promise(function(e,t){d.storage.init(),d.event.init(),d.view.init(),l=d.createModule("authadmin"),h=d.createModule("authn"),f=new n.Authz(d),i=d.createModule("tpcookie"),!0===d.config.options.fromWebview&&(d.storage.reset(),d.resetJsCache()),l.getConfig().then(function(){b.setLogging(!1),b.setPlatformId(d.config.brandUrn),b.setCacheTime("identity",d.constants.cache.identity),b.setCacheTime("bounce",0),b.setCacheTime("init",0),"https:"===window.location.protocol?b.setProtocol("https://"):"ios-cravetv"!==window.osPlatform&&"android-cravetv"!==window.osPlatform||b.setProtocol("https://"),function(n){var o=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("aisresponse");if(o&&!0!==d.config.options.fromWebview){var e=new Promise(function(e,t){d.ready.then(function(){h.handleAkamaiRedirect(h.getBduAkamaiSource()).then(function(){c(!1,n).then(function(e){if(sessionStorage.getItem("BMAuth_code")){var t=new CustomEvent("preRegisterDeviceFulfilled");window.dispatchEvent(t)}return e}).catch(t)}).catch(t),window.postMessage(JSON.stringify({messageSender:"aisRedirect",response:o}),"*")}).catch(t)});if(d.config.options.fulfillOnClose){var a=new Promise(function(e,t){var n=function(){e(),d.event.removeListener("onModalClose",n)};d.event.addListener("onModalClose",n)});return new Promise(function(t,n){Promise.all([e,a]).then(function(e){t(e[0])}).catch(function(e){var t=function(){n(e),d.event.removeListener("onModalClose",t)};d.event.addListener("onModalClose",t)})})}}}({}),h.handleAkamaiLogoutResult(),d.log("main","BmAuth initiated and ready"),e()}).catch(t)});return Promise.all([e,d.domReady]).then(function(){d.event.triggerInternal("onReady"),m().then(o)}).catch(function(e){d.event.triggerInternal("onReadyFailed",e)})},handleSignIn:function(e){var a;return(e=void 0!==e?e:{}).showFrontDoor=void 0!==e.showFrontDoor&&e.showFrontDoor,e.fromCanPlayVideo=void 0!==e.fromCanPlayVideo&&e.fromCanPlayVideo,e.showChooser=void 0!==e.showChooser&&e.showChooser,null===d.vars.differed.handleSignIn&&(d.vars.differed.handleSignIn="in_process",e.showFrontDoor?(a=e,t=new Promise(function(n,o){d.modal.display().then(function(){d.view.displayFrontDoor(),d.event.addListenerToDom("click",".front-door-subscribe",function(e){n({authorized:!1,identity_token:null,authZ_token:null,type:"triggerSubscribe"}),d.modal.close(0)});var t=function(){n({authorized:!1,identity_token:null,authZ_token:null,type:"userClose"})};d.event.addListener("onModalClose",t),d.event.addListenerToDom("click",".bmauth-action-box.frontdoor-signin",function(e){d.event.removeListener("onModalClose",t),A(a).then(n).catch(o)})})})):t=A(e)),t.then(function(e){d.vars.differed.handleSignIn=null,d.log("signin","fulfilled with",e)}).catch(function(e){d.vars.differed.handleSignIn=null}),t},isAuthenticated:function(){return m()},handleSignOut:function(){return new Promise(function(e,t){d.ready.then(function(){h.signOut(),e()}).catch(function(e){d.errorhandler.onError(e),t(e)})})},handleLocalSignOut:function(){return new Promise(function(e,t){d.ready.then(function(){h.forceSignOutLocal(),e()}).catch(function(e){d.errorhandler.onError(e),t(e)})})},canPlayVideo:function(i){var r=this,c=!1,e=new Promise(function(o,a){d.ready.then(function(){if(u(i),d.log("canPlayVideo:","info",i),!1===i.Authentication.Required)d.log("canPlayVideo","video authorized wuthout authentication check"),o({authenticated:h.isAuthenticatedLocal(),authorized:!0,identity_token:null,authZ_token:null});else{var t=function(e){"fullfiled_authenticated"===e.type?s([i.Authentication.Resources[0].ResourceCode]).then(o).catch(a):"triggerSubscribe"===e.type?o({authenticated:!1,authorized:!1,identity_token:null,authZ_token:null,type:"triggerSubscribe"}):"userClose"===e.type?o({authenticated:!1,authorized:!1,identity_token:null,authZ_token:null,type:"userClose"}):o({authenticated:!1,authorized:!1,identity_token:null,authZ_token:null,type:"fulfilled"})},n={fromCanPlayVideo:!0};!h.isAuthenticatedLocal()||h.isAccountUpdateFlaggedInTime()?("cravetv"!==d.config.brand&&"rds"!==d.config.brand&&"tsn"!==d.config.brand||"ios"===d.config.platform||"windows8"===d.config.platform||(n.showFrontDoor=!0),h.isAccountUpdateFlaggedInTime()?(d.log("account","logging the user out"),h.forceSignOut(),d.storage.remove("updateTriggerTime"),h.flagAccountUpdate(!1),r.quickSignIn({showSuccess:!1}).then(t).catch(function(e){c=!0,a(e)})):r.handleSignIn(n).then(t).catch(function(e){c=!0,a(e)})):s([i.Authentication.Resources[0].ResourceCode]).then(function(e){"logout_result"===e?r.handleSignIn(n).then(t).catch(function(e){c=!0,a(e)}):o(e)}).catch(a)}}).catch(a)});return e.catch(function(e){c||d.errorhandler.onError(e,!0)}),!1===d.config.options.fulfillOnClose?(e.then(function(e){d.log("canPlayVideo","fulfilled with",e)}),e):new Promise(function(n,o){e.then(function(e){if(e.authorized||"userClose"===e.type||"triggerSubscribe"===e.type)n(e);else{var t=function(){d.log("canPlayVideo","fulfilled with",e),n(e),d.event.removeListener("onModalClose",t)};d.event.addListener("onModalClose",t)}}).catch(function(e){if(c)o(e);else{var t=function(){o(e),d.event.removeListener("onModalClose",t)};d.event.addListener("onModalClose",t)}})})},videoHasLock:function(t){try{return a(t)}catch(e){return d.log("videoLock: return true as an exception has occured (video.id: "+t.Id+")"),d.errorhandler.onException(e),!0}},videosAddLockStatus:function(o){var e=new Promise(function(e,t){d.ready.then(function(){if(d.log("videoLock","passed videos",o),!Array.isArray(o))throw new y.Error("The argument videos must be of type Array - (videos: "+o+")","EBAB04");for(var t=0,n=o.length;t<n;t++)try{o[t].Authentication.hasLock=a(o[t])}catch(e){"EBAC01"===e.code?(o[t].Authentication={},o[t].Authentication.hasLock=!0):"EBAC02"===e.code||"EBAC03"===e.code?o[t].Authentication.hasLock=!0:(o.splice(t,1),t--,n--),d.errorhandler.onError(e,!1)}e(o)}).catch(t)});return e.catch(d.errorhandler.onError),e},getSignInBduName:function(){if(!this.isAuthenticatedLocal())return null;var e=h.getSignInBduName();return d.log("authn","returning signInBduName (name: "+e+")"),e},getTrackingSuites:function(a){return new Promise(function(o,e){d.ready.then(function(){var e=l.getBrandTrackingSuites(),t=function(e,t){var n=null;switch(d.config.platform){case"web":n=e.desktop;break;case"ios":n=!0===t?e.iosTablet:e.iosPhone;break;case"android":n=!0===t?e.androidTablet:e.androidPhone;break;case"xbox360":n=e.xbox360;break;case"xboxone":n=e.xboxOne;break;case"samsungtv":n=e.samsungTV;break;case"windows8":n=e.windows8;break;case"roku":n=e.roku;break;case"appletv":n=e.appleTV;break;case"amazonfire":n=e.amazonFire;break;case"androidtv":n=e.androidTV;break;default:n=e.desktop}return n}(e,a);null===t&&d.errorhandler.onWarning(new y.Warning("Tracking suite for platform "+d.config.platform+" could not be found in auth admin config","WBAC01")),null===e.globalSuite&&d.errorhandler.onWarning(new y.Warning("Global tracking suite could not be found in auth admin config","WBAC02"));var n={globalSuite:e.globalSuite,brandPlatformSuite:t};o(n)}).catch(e)})},getIdentity:function(){var e=new Promise(function(e,t){d.ready.then(function(){h.isAuthenticatedLocal()?h.getIdentity().then(e).catch(t):e(null)}).catch(t)});return e.catch(d.errorhandler.onException),e},displayMessage:function(e){d.modal.display().then(function(){d.view.displayMessage(e)})},registerDevice:function(o,e){d.log("activate","registerDecide called in controller");var a=this,t=new Promise(function(t,n){d.ready.then(function(){h.isAuthenticatedLocal()?h.registerDevice(o).then(t).catch(n):a.handleSignIn(e).then(function(e){"userClose"===e.type&&t({type:e.type}),"triggerSubscribe"===e.type?t({type:"triggerSubscribe"}):!0===e.authenticated?h.registerDevice(o).then(t).catch(n):t({type:"notAuthenticated"})}).catch(n)})});return t.catch(d.errorhandler.onError),t},isAuthenticatedLocal:function(){return h.isAuthenticatedLocal()},closeModal:function(e){d.modal.close(e)},forceSignOutLocal:function(){h.forceSignOutLocal()},resetJsCache:function(){h.resetJsCache(),f.resetJsCache()},isD2cUser:function(e){return e=void 0!==e&&e,d.log("isD2c","called"),!(!e&&!this.isAuthenticatedLocal())&&w()},quickSignIn:function(e){return a=e=void 0!==e?e:{},(t=new Promise(function(n,o){d.ready.then(function(){d.modal.display().then(function(){d.tracking.onSignInAttempt(),d.ui.shouldCheckThirdPartyCookiesAllowed(d.config.options.fromWebview)&&i.checkTpCookieEnabled().then(function(e){!1===e&&o(new y.Error("3rd Party cookie was disabled for the user","EBAF01"))}),g=function(){n({authenticated:!1,passedAuthNStep:!1,passedAuthZStep:!1,authZ_resources:{},identity_token:null,type:"userClose"})},d.event.addListener("onModalClose",g);var e=l.brandBduList(),t=d.constants.url.assets;e=r(e,t,"md"),d.view.displayQuickSignIn(h.getBduAkamaiSource(d.vars.d2cUrn),a.headerText),h.handleAkamaiRedirect(d.vars.d2cUrn).then(function(){h.setSignInBduInfo("CanadaSub"),c(!1,{showSuccess:!1}).then(n).catch(o)}).catch(o)}).catch(o)}).catch(o)})).catch(function(e){d.event.removeListener("onModalClose",g),d.errorhandler.onError(e),h.forceSignOut()}),t;var a,t}}}})}(BmAuth,jQuery,ais_client);
!function(a){"use strict";window.BmAuth.define({type:"template",name:"authzno-message-multi",value:function(){return['<div class="axis-auth-header">','<a class="axis-auth-info remodal-info"></a>',"{{#showBackButton}}",'<a class="axis-auth-back remodal-back"></a>',"{{/showBackButton}}",'<a class="axis-auth-close remodal-close"></a>',"<h1>Sign in to Watch</h1>","</div>",'<div class="axis-auth-main no-footer {{brand}}">','<div class="axis-auth-middle">','<div class="axis-auth-error-container multi-authz">','<div class="axis-auth-message-body logo5">','<span class="axis-success-message bmauth-authzno-top">{{topText}}</span> ','<div class="bmauth-noaccessto-channels">',"{{#notAuthorizedResources}}",'<div class="bmauth-authzyes-logo">','<img src="{{logo2}}">',"</img>","</div>","{{/notAuthorizedResources}}","</div>",'<span class="axis-success-message bmauth-authzno-bottom">{{bottomText}}</span> ',"</div>",'<div class="axis-auth-message-footer">','<button class="axis-auth-action-bottom axis-auth-ok-bottom close-button">{{buttonText}}</button>',"</div>","</div>","</div>","</div>"].join("")}})}();
!function(a,i){"use strict";window.BmAuth.define({type:"template",name:"bdu-chooser",value:function(){return['<div class="axis-auth-header">','<a  class="axis-auth-info remodal-info"></a>','<a  class="axis-auth-close remodal-close"></a>',"<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main">','<div class="axis-auth-message-container">',"<p>{{subHeader}}","</p>","</div>",'<div class="axis-auth-middle">','<div class="axis-auth-logos-container">',"{{#logos}}",'<div data-name="{{name}}" data-urn={{urn}} class="axis-auth-provider-logo bmauth-signin-logo">',"{{#logo}}",'<img src="{{logo}}" alt="{{displayName}}">',"{{/logo}}","{{^logo}}","<span>{{displayName}}</span>","{{/logo}}","</div>","{{/logos}}","</div>","</div>",'<div class="axis-auth-search-container"> ','<p><a data-name="BellMG" data-img="{{bellmediaLogo}}" data-urn="urn:bellmedia:com:idp:custom:prod" class="auth9_btnBMG">{{guestUsers}}</a>',"<br>",'<span class="auth9_txt3">',"{{providerNotListed}}","</span>","</p>","</div>","</div>",'<div style="display: none;">','<iframe src="{{iframeSource}}" name="ifrBmAuthSetContinue" id="ifrBmAuthSetContinue" scrolling="auto" frameborder="0"></iframe>',"</div>"].join("")}})}(0,jQuery);
!function(a,i){"use strict";window.BmAuth.define({type:"template",name:"bdu-login",value:function(){return['<div class="axis-auth-header">','<a class="axis-auth-info remodal-info"></a>','<a class="axis-auth-back remodal-back"></a>','<a class="axis-auth-close remodal-close"></a>',"<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main no-footer no-side-padding">','<div class="axis-auth-middle axis-auth-middle axis-auth-scroll-container">  ','<iframe src="{{source}}" name="ifrBmAuthApi" id="ifrBmAuthApi" scrolling="auto" frameborder="0"></iframe>',"</div>","</div>"].join("")}})}(0,jQuery);
!function(i,e){"use strict";window.BmAuth.define({type:"template",name:"bdu-login-hidden",value:function(){return['<div class="axis-auth-main no-footer no-side-padding" style="display: none;">','<div class="axis-auth-middle axis-auth-middle axis-auth-scroll-container">  ','<iframe src="{{source}}" name="ifrBmAuthApi" id="ifrBmAuthApi" scrolling="auto" frameborder="0"></iframe>',"</div>","</div>"].join("")}})}(0,jQuery);
!function(e,i){"use strict";window.BmAuth.define({type:"template",name:"code-screen",value:function(){return['<div class="axis-auth-header">',"<h1>Activate Your Device</h1>","</div>",'<div class="axis-auth-main no-footer">','<div class="axis-auth-middle">','<div class="axis-auth-code-screen">',"</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"d2c-bdu-chooser",value:function(){return['<div class="axis-auth-header">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","<h2>{{subHeader}}</h2>","</div>",'<div class="axis-auth-main with-scroll">','<div class="bmauth-tab-bar">','<div class="bmauth-tab">','<div class="tab-container">','<span id="tab-d2c" class="d2c-tab-heading">{{d2cTabText}}</span>','<span id="tab-d2c" class="d2c-tab-sub">{{d2cTabText_sub}}</span>',"</div>","</div>",'<div class="bmauth-tab active">','<div class="tab-container">','<span id="tab-chooser" class="d2c-tab-heading">{{chooserTabText}}</span>','<span id="tab-chooser" class="d2c-tab-sub">{{chooserTabText_sub}}</span>',"</div>","</div>","</div>",'<div class="bmauth-chooser-wrapper">','<div class="axis-auth-middle scrolled show-scroll" >','<div class="axis-auth-logos-container">',"{{#logos}}",'<div data-name="{{name}}" data-urn={{urn}} class="axis-auth-provider-logo bmauth-signin-logo">',"{{#logo}}",'<img src="{{logo}}" alt="{{displayName}}">',"{{/logo}}","{{^logo}}","<span>{{displayName}}</span>","{{/logo}}","</div>","{{/logos}}","</div>","</div>",'<div class="bmauth-chooser-footer">',"</div>","</div>","{{#hideSubscribe}}",'<div class="axis-auth-search-container">',"<span>{{noProviderD2Cspan}} </span>",'<a class="bmauth-free-trial">{{noProviderD2Clink}}</a>',"</div>","{{/hideSubscribe}}","</div>"].join("")}})}(0,jQuery);
!function(a,i){"use strict";window.BmAuth.define({type:"template",name:"d2c-bdu-login",value:function(){return['<div class="axis-auth-header bmauth-bdu-login">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main bmauth-bdu-login">','<div class="axis-auth-middle-bdu">','<iframe src="{{source}}" name="ifrBmAuthApi" id="ifrBmAuthApi" scrolling="auto" frameborder="0"></iframe>',"</div>",'<div class="bmauth-footer">','<div class="bmauth-button bmauth-back-button"><span>{{{backLinkText}}}</span></div>',"</div>","</div>"].join("")}})}(0,jQuery);
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"d2c-d2c-login",value:function(){return['<div class="axis-auth-header">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","<h2>{{subHeader}}</h2>","</div>",'<div class="axis-auth-main bmauth-d2c-login">','<div class="bmauth-tab-bar">','<div class="bmauth-tab active">','<div class="tab-container">','<span id="tab-d2c" class="d2c-tab-heading">{{d2cTabText}}</span>','<span id="tab-d2c" class="d2c-tab-sub">{{d2cTabText_sub}}</span>',"</div>","</div>",'<div class="bmauth-tab">','<div class="tab-container">','<span id="tab-chooser" class="d2c-tab-heading">{{chooserTabText}}</span>','<span id="tab-chooser" class="d2c-tab-sub">{{chooserTabText_sub}}</span>',"</div>","</div>","</div>",'<div class="axis-auth-middle">','<iframe src="{{bduUrn}}" name="ifrBmAuthApi" id="ifrBmAuthApi" scrolling="auto" frameborder="0"></iframe>',"</div>","{{#hideSubscribe}}",'<div class="axis-auth-search-container">',"<span>{{newToD2CText}} </span>",'<a class="bmauth-free-trial">{{startD2CTrial}}</a>',"</div>","{{/hideSubscribe}}","</div>"].join("")}})}(0,jQuery);
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"d2c-d2c-login-ios",value:function(){return['<div class="axis-auth-header">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","<h2>{{subHeader}}</h2>","</div>",'<div class="axis-auth-main bmauth-d2c-login">','<div class="bmauth-tab-bar">','<div class="bmauth-tab active">','<div class="tab-container">','<span id="tab-d2c" class="d2c-tab-heading">{{d2cTabText}}</span>','<span id="tab-d2c" class="d2c-tab-sub">{{d2cTabText_sub}}</span>',"</div>","</div>",'<div class="bmauth-tab">','<div class="tab-container">','<span id="tab-chooser" class="d2c-tab-heading">{{chooserTabText}}</span>','<span id="tab-chooser" class="d2c-tab-sub">{{chooserTabText_sub}}</span>',"</div>","</div>","</div>",'<div class="axis-auth-middle">','<a href="{{bduUrn}}" style="display: block; margin-top: 5px; padding-right: 15px; padding-left: 15px; box-sizing: border-box; min-width: 136px; width: 100%; height: 53px; text-transform: uppercase; text-decoration: none; line-height: 53px; font-size: 24px; color: white; background-color: {{d2cColor}}; border-color: transparent; cursor: pointer;">{{d2cConnection}} </a>',"</div>","{{#hideSubscribe}}",'<div class="axis-auth-search-container">',"<span>{{newToD2CText}} </span>",'<a class="bmauth-free-trial">{{startD2CTrial}}</a>',"</div>","{{/hideSubscribe}}","</div>"].join("")}})}(0,jQuery);
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"d2c-error-d2c-authzno",value:function(){return['<div class="axis-auth-header bmauth-d2c-success">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main no-footer bmauth-d2c-error">','<div class="axis-auth-middle">','<div class="axis-auth-error-container">','<div class="axis-auth-message-header">','<div class="axis-auth-disclaimer"></div>',"</div>",'<div class="axis-auth-message-body">',"{{message_1}}","</br>","</br>","{{message_2}}","</div>",'<div class="axis-auth-message-footer">','<button class="axis-auth-action-bottom axis-auth-ok-bottom close-button bmauth-goto-account">{{subscribeUrlText}}</button>',"</div>","</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"d2c-error-text-only",value:function(){return['<div class="axis-auth-header bmauth-d2c-success">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main no-footer bmauth-d2c-error">','<div class="axis-auth-middle">','<div class="axis-auth-error-container">','<div class="axis-auth-message-header">','<div class="axis-auth-disclaimer"></div>',"</div>",'<div class="axis-auth-message-body">',"{{#paragraphs}}","<p>{{.}}</p>","{{/paragraphs}}","</div>",'<div class="axis-auth-message-footer">','<button class="axis-auth-action-bottom axis-auth-ok-bottom close-button">{{closeLinkText}}</button>',"</div>","</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"d2c-error-tpcookie",value:function(){return['<div class="axis-auth-header bmauth-d2c-success">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main no-footer bmauth-d2c-error">','<div class="axis-auth-middle">','<div class="axis-auth-error-container">','<div class="axis-auth-message-header">','<div class="axis-auth-disclaimer"></div>',"</div>",'<div class="axis-auth-message-body">','<p>{{pg1}} {{pg2a}} <a href="{{tpCookieUrl}}" target="_blank" >{{tpCookieUrlText}}<a/> {{pg2b}}</p>',"</div>",'<div class="axis-auth-message-footer">','<button class="axis-auth-action-bottom axis-auth-ok-bottom close-button">{{closeLinkText}}</button>',"</div>","</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"d2c-faq",value:function(){return['<div class="axis-auth-header bmauth-faq">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info bmauth-active">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","</div>",'<div class="axis-auth-main no-footer bmauth-faq">','<div class="axis-auth-middle">','<div class="axis-faq-container">','<div class="axis-faq-heading">{{subTitle}}</div>','<div class="bmauth-faqs">',"{{#faqs}}",'<div class="bmauth-faq">','<div class="bmuth-faq-item-l">','<span class="bmauth-faq-chevron">‹</span>',"</div>",'<div class="bmuth-faq-item-r">','<span class="bmauth-question">{{question}}</span>','<div class="bmauth-answer" >{{{answer}}}</div>',"</div>","</div>","{{/faqs}}","</div>",'<div class="bmauth-footer">','<div class="bmauth-button bmauth-back-button"><span>{{{backLinkText}}}</span></div>',"</div>","</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,e){"use strict";window.BmAuth.define({type:"template",name:"d2c-feedback",value:function(){return['<div class="axis-auth-header bmauth-faq">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info ">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback bmauth-active">{{helpLinkText}}</a>',"</div>","</div>",'<div class="axis-auth-main no-footer bmauth-faq">','<div class="axis-auth-middle">','<div class="axis-feedback-container">','<iframe src="{{urn}}" ','scrolling="no" frameborder="0" ></iframe>',"</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,i){"use strict";window.BmAuth.define({type:"template",name:"d2c-front-door",value:function(){return['<div class="axis-auth-header bmauth-frontdoor">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info"></a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback"></a>',"</div>","<h1>{{fdTitle}}</h1>","<h2>{{fdText}}</h2>","</div>",'<div class="axis-auth-main bmauth-frontdoor">','<div class="axis-auth-middle">','<div class="bmauth-frontdoor-container">',"{{#hideSubscribe}}",'<div class="bmauth-buttom front-door-subscribe">{{button_fdSubscribe}}</div>',"{{/hideSubscribe}}",'<div class="bmauth-action-box frontdoor-signin">{{button_fdSignInQuestion}} <span class="bmauth-frontdoor-signin">{{button_fdSignInAnswer}}</span></div>',"</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,i){"use strict";window.BmAuth.define({type:"template",name:"d2c-quick-login",value:function(){return['<div class="axis-auth-header bmauth-bdu-login {{noHeaderClass}}">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h2>{{subHeader}}</h2>","</div>",'<div class="axis-auth-main bmauth-bdu-login quick-login  {{noHeaderClass}}">','<div class="axis-auth-middle">','<iframe src="{{source}}" name="ifrBmAuthApi" id="ifrBmAuthApi" scrolling="auto" frameborder="0"></iframe>',"</div>","</div>"].join("")}})}(0,jQuery);
!function(s,a){"use strict";window.BmAuth.define({type:"template",name:"d2c-success",value:function(){return['<div class="axis-auth-header bmauth-d2c-success">',"<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main bmauth-d2c-success">','<div class="axis-auth-middle">','<div class="axis-success-container">','<span class="axis-success-message">{{text}}</span> ','<div class="axis-auth-provider-logo">','<img src="{{logoSource}}">',"</div>","</div>","</div>",'<div class="axis-auth-ad-placer"></div>',"</div>"].join("")}})}(0,jQuery);
!function(a){"use strict";window.BmAuth.define({type:"template",name:"error-text-only",value:function(){return['<div class="axis-auth-header">','<a class="axis-auth-info remodal-info"></a>',"{{#showBackButton}}",'<a class="axis-auth-back remodal-back"></a>',"{{/showBackButton}}",'<a class="axis-auth-close remodal-close"></a>',"<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main no-footer">','<div class="axis-auth-middle">','<div class="axis-auth-error-container">','<div class="axis-auth-message-header">','<div class="axis-auth-disclaimer"></div>',"</div>",'<div class="axis-auth-message-body">',"{{#paragraphs}}","<p>{{.}}</p>","{{/paragraphs}}","</div>",'<div class="axis-auth-message-footer">','<button class="axis-auth-action-bottom axis-auth-ok-bottom close-button">{{closeLinkText}}</button>',"</div>","</div>","</div>","</div>"].join("")}})}();
!function(i){"use strict";window.BmAuth.define({type:"template",name:"error-tpcookie",value:function(){return['<div class="axis-auth-header">','<a class="axis-auth-info remodal-info"></a>',"{{#showBackButton}}",'<a class="axis-auth-back remodal-back"></a>',"{{/showBackButton}}",'<a class="axis-auth-close remodal-close"></a>',"<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main no-footer">','<div class="axis-auth-middle">','<div class="axis-auth-error-container">','<div class="axis-auth-message-header" style="margin-top: 20px;">','<div class="axis-auth-disclaimer"></div>',"</div>",'<div class="axis-auth-message-body" style="margin-top: 0;">',"{{#isBrowserChrome}}","<p>{{chrome.paragraph1}}</p>",'<ul style="text-align: left">',"<li>{{chrome.list1}}</li>","<li>{{chrome.list2}}</li>","<li>{{chrome.list3}}</li>","</ul>","{{/isBrowserChrome}}","{{#isBrowserFirefox}}","<p>{{firefox.paragraph1}}</p>",'<ul style="text-align: left">',"<li>{{firefox.list1}}</li>","<li>{{firefox.list2}}</li>","</ul>","{{/isBrowserFirefox}}","{{#isBrowserApple}}","<p>{{apple.paragraph1}}</p>",'<ul style="text-align: left">',"<li>{{apple.list1}}</li>","<li>{{apple.list2}}</li>","<li>{{apple.list3}}</li>","<li>{{apple.list4}}</li>","<li>{{apple.list5}}</li>","</ul>","{{/isBrowserApple}}","{{#isBrowserOther}}","<p>{{other.paragraph1}}</p>",'<ul style="text-align: left">',"<li>{{other.list1}}</li>","<li>{{other.list2}}</li>","</ul>","{{/isBrowserOther}}","<p>{{conclusion1}}</p>","<p>{{conclusion2}}</p>","</div>",'<div class="axis-auth-message-footer">','<button class="axis-auth-action-bottom axis-auth-ok-bottom close-button">{{closeLinkText}}</button>',"</div>","</div>","</div>","</div>"].join("")}})}();
!function(a,s){"use strict";window.BmAuth.define({type:"template",name:"faq",value:function(){return['<div class="axis-auth-header">','<div class="axis-auth-header-textbar">','<a class="axis-auth-info remodal-info">{{faqLinkText}}</a>','<a class="axis-auth-close remodal-close"></a>','<a class="axis-auth-feedback remodal-feedback">{{helpLinkText}}</a>',"</div>","<h1>{{header}}</h1>","<h2>{{subHeader}}</h2>","</div>",'<div class="axis-auth-main no-footer">','<div class="axis-auth-middle">','<div class="axis-faq-container">','<h2 lang="en" style="display:block;">{{subTitle}}</h2>','<div class="bmauth-faqs">',"{{#faqs}}",'<div class="bmauth-faq">','<div class="bmuth-faq-item-l">','<span class="bmauth-faq-chevron">‹</span>',"</div>",'<div class="bmuth-faq-item-r">','<span class="bmauth-question">{{question}}</span>','<div class="bmauth-answer" >{{{answer}}}</div>',"</div>","</div>","{{/faqs}}","</div>","</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(a,i){"use strict";window.BmAuth.define({type:"template",name:"modal-base",value:function(){return['<div class="remodal-bg axis-modal-bg">','<div id="axis-auth" class="remodal bmauth-remodal {{brand}}" data-remodal-id="axisauth">','<div class="axis-auth-container axis-modal">',"</div>","</div>","</div>"].join("")}})}(0,jQuery);
!function(s){"use strict";window.BmAuth.define({type:"template",name:"success-message-all",value:function(){return['<div class="axis-auth-header">','<a class="axis-auth-info remodal-info"></a>','<a class="axis-auth-close remodal-close"></a>',"<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main two-row {{topShort}}"> ','<div class="axis-auth-middle multi-authz ">','<div class="axis-success-container  {{numYes}}">','<span class="axis-success-message">{{text}}</span> ','<div class="axis-auth-provider-logo">','<img src="{{logoSource}}">',"</div>","<div>",'<span class="axis-success-message bmauth-accessto-message">{{accessToText}}</span> ','<div class="bmauth-accessto-channels">',"{{#authorizedResources}}",'<div class="bmauth-authzyes-logo">','<img src="{{logo1}}">',"</img>","</div>","{{/authorizedResources}}","</div>","</div>","</div>","</div> ",'<div class="axis-auth-ad-placer multi-authz">',"{{#hasNoAuthz}}",'<span class="axis-success-message bmauth-noaccessto-message">{{noAccessToText}}</span> ','<div class="bmauth-noaccessto-channels {{numNo}}">',"{{#notAuthorizedResources}}",'<div class="bmauth-authzyes-logo">','<img src="{{logo2}}">',"</img>","</div>","{{/notAuthorizedResources}}","</div>",'<span class="axis-success-message bmauth-contacttv-message">{{contactTV}}</span> ',"{{/hasNoAuthz}}","</div>","</div>"].join("")}})}();
!function(s,a){"use strict";window.BmAuth.define({type:"template",name:"success-message",value:function(){return['<div class="axis-auth-header">','<a class="axis-auth-info remodal-info"></a>','<a class="axis-auth-close remodal-close"></a>',"<h1>{{header}}</h1>","</div>",'<div class="axis-auth-main two-row"> ','<div class="axis-auth-middle">','<div class="axis-success-container">','<span class="axis-success-message">{{text}}</span> ','<div class="axis-auth-provider-logo">','<img src="{{logoSource}}">',"</div>","</div>","</div> ",'<div class="axis-auth-ad-placer">',"</div>","</div>"].join("")}})}(0,jQuery);